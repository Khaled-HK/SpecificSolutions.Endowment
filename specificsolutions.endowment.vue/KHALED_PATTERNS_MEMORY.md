# ููุท ุฎุงูุฏ - Khaled Pattern

## ูุธุฑุฉ ุนุงูุฉ
ููุท ุฎุงูุฏ ูู ูุธุงู ุดุงูู ููุชุญูู ูู ุตุญุฉ ุงูููุงุฐุฌ ูุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ูู ุชุทุจูู Vue.js ูุน .NET backend. ูุนุชูุฏ ุนูู ุชูููุฐ ุงูููุชุฑุฉ ูุงูุชุญููู ุฅูู DTO ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (LINQ to Entities) ุฏุงุฎู ุงูู Repository.

## ุงูููููุงุช ุงูุฃุณุงุณูุฉ

### 1. ููุท ุงูููุชุฑุฉ ูู Backend
- **ุงููููุน**: Repository Layer
- **ุงูุทุฑููุฉ**: `GetByFilterAsync` ูู ูู Repository
- **ุงูููุฒุงุช**: 
  - ููุชุฑุฉ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ุชุญููู ุฅูู DTO ูุจุงุดุฑุฉ
  - ุฏุนู Paging
  - ุงุณุชุฏุนุงุก ูุจุงุดุฑ ูู Handler

### 2. ูุธุงู ุงูุชุญูู ูู ุตุญุฉ ุงูููุงุฐุฌ (Frontend)
- **ุงูููู ุงูุฃุณุงุณู**: `useFormValidation.ts`
- **ุงูููููุงุช**: `ValidatedTextField.vue`
- **ุงูููุฒุงุช**:
  - ุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ
  - ุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  - ุชุญูู ูู ุฃุฑูุงู ุงูููุงุชู
  - ุฏุนู ุงูุฑุณุงุฆู ุงููุฎุตุตุฉ
  - ุชูุงูู ูุน FluentValidation backend

### 3. ุฅุฏุงุฑุฉ ุงูุนูุงููู ุงูุฏููุงููููุฉ
- **ุงููุธุงู**: i18n (Vue I18n)
- **ุงููููุงุช**: 
  - `ar.json` (ุงูุนุฑุจูุฉ)
  - `en.json` (ุงูุฅูุฌููุฒูุฉ)
- **ุงููููู**: `tableHeaders.{page}.{field}`

### 4. ุฅุฏุงุฑุฉ ุงููุบุฉ ุงููุชุนุฏุฏุฉ (Frontend โ Backend)
- **ุงููุฑููุช ุฅูุฏ**: ุฅุฑุณุงู `Accept-Language` header ูุน ูู ุทูุจ API
- **ุงูุจุงู ุฅูุฏ**: `ThreadCultureMiddleware` ููุฑุฃ ุงููุบุฉ ูู ุงูู header
- **ุงูุชูุงูู**: ุฑุณุงุฆู ุงูุฎุทุฃ ุชุฃุชู ุจุงููุบุฉ ุงููุฎุชุงุฑุฉ ูู ุงููุฑููุช ุฅูุฏ
- **ุงููููุงุช ุงููุญุฏุซุฉ**:
  - `src/utils/api.js`
  - `src/composables/useApi.ts`
  - `src/composables/useApi.js`

## ุงูุตูุญุงุช ุงููุทุจูุฉ

### 1. ุตูุญุงุช ุงููุตุงุฏูุฉ
- **Login**: ุชุณุฌูู ุงูุฏุฎูู
- **Register**: ุงูุชุณุฌูู
- **Forgot Password**: ูุณูุงู ูููุฉ ุงููุฑูุฑ

### 2. ุตูุญุงุช ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช
- **Decisions**: ุงููุฑุงุฑุงุช (ุงููููุฐุฌ ุงูุฃุณุงุณู)
- **Regions**: ุงูููุงุทู
- **Cities**: ุงููุฏู โ (ูุญุฏุซ ุจููุท ุฎุงูุฏ)
- **Products**: ุงูููุชุฌุงุช โ (ูุญุฏุซ ุจููุท ุฎุงูุฏ)
- **Offices**: ุงูููุงุชุจ
- **Mosques**: ุงููุณุงุฌุฏ

## ูููู ุงูุนูุงููู ุงูุฏููุงููููุฉ

### ุงููุฑุงุฑุงุช (Decisions)
```json
{
  "title": "ุนููุงู ุงููุฑุงุฑ",
  "referenceNumber": "ุฑูู ุงููุฑุฌุน",
  "description": "ุงููุตู",
  "createdDate": "ุชุงุฑูุฎ ุงูุฅูุดุงุก",
  "actions": "ุงูุฅุฌุฑุงุกุงุช"
}
```

### ุงูููุงุทู (Regions)
```json
{
  "name": "ุงูููุทูุฉ",
  "country": "ุงูุฏููุฉ",
  "actions": "ุงูุฅุฌุฑุงุกุงุช"
}
```

### ุงููุฏู (Cities)
```json
{
  "name": "ุงููุฏููุฉ",
  "regionName": "ุงูููุทูุฉ",
  "country": "ุงูุฏููุฉ",
  "actions": "ุงูุฅุฌุฑุงุกุงุช"
}
```

### ุงูููุชุฌุงุช (Products)
```json
{
  "name": "ุงุณู ุงููุงุฏุฉ",
  "description": "ุงููุตู",
  "price": "ุงูุณุนุฑ",
  "quantity": "ุงููููุฉ",
  "actions": "ุงูุฅุฌุฑุงุกุงุช"
}
```

### ุงูููุงุชุจ (Offices)
```json
{
  "name": "ุงูููุชุจ",
  "regionName": "ุงูููุทูุฉ",
  "phoneNumber": "ุฑูู ุงููุงุชู",
  "actions": "ุงูุฅุฌุฑุงุกุงุช"
}
```

### ุงููุณุงุฌุฏ (Mosques)
```json
{
  "name": "ุงุณู ุงููุณุฌุฏ",
  "fileNumber": "ุฑูู ุงูููู",
  "region": "ุงูููุทูุฉ",
  "office": "ุงูููุชุจ",
  "actions": "ุงูุฅุฌุฑุงุกุงุช"
}
```

## ุงูููุงุฑุณุงุช ุงููุทุจูุฉ

### 1. ุชุตููู ููุญุฏ
- ุงุณุชุฎุฏุงู Snackbar ููุฅุดุนุงุฑุงุช
- ุชุตููู ููุญุฏ ููุฌุฏุงูู
- ุฃุฒุฑุงุฑ ููุญุฏุฉ (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู)
- ุนุฑุถ ุฃุฎุทุงุก ุงูุชุญูู ุจุดูู ููุญุฏ

### 2. ุงูุชุญูู ูู ุงูุตุญุฉ
- ุชุญูู ููุฑู ูู ุงูุญููู
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- ุชุนุทูู ุงูุฃุฒุฑุงุฑ ุนูุฏ ูุฌูุฏ ุฃุฎุทุงุก
- ุชูุธูู ุญุงูุฉ ุงูุชุญูู ูุจู ุงูุชุญูู ุงูุฌุฏูุฏ

### 3. ุฅุฏุงุฑุฉ ุงูุญุงูุฉ
- ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูููุณ (touched state)
- ุนุฑุถ ุงูุฃุฎุทุงุก ููุท ููุญููู ุงูููููุณุฉ
- ุชูุธูู ุงูุฃุฎุทุงุก ุนูุฏ ุงูุชุนุฏูู

### 4. ุฅุฏุงุฑุฉ ุงููุบุฉ ุงููุชุนุฏุฏุฉ
- ุฅุฑุณุงู ุงููุบุฉ ุงููุฎุชุงุฑุฉ ูุน ูู ุทูุจ API
- ุชูุงูู ูุน ThreadCultureMiddleware ูู ุงูุจุงู ุฅูุฏ
- ุฑุณุงุฆู ุฎุทุฃ ูุชุนุฏุฏุฉ ุงููุบุงุช ูู FluentValidation

## ุงูุงุณุชุฎุฏุงู ูู ุงูููุฏ

### ุงุณุชุฎุฏุงู ุงูุนูุงููู ุงูุฏููุงููููุฉ
```vue
<template>
  <v-data-table
    :headers="headers"
    :items="items"
  >
  </v-data-table>
</template>

<script setup>
import { computed } from 'vue'
import { useI18n } from 'vue-i18n'

const { t } = useI18n()

const headers = computed(() => [
  { title: t('tableHeaders.decisions.title'), key: 'title' },
  { title: t('tableHeaders.decisions.referenceNumber'), key: 'referenceNumber' },
  { title: t('tableHeaders.decisions.description'), key: 'description' },
  { title: t('tableHeaders.decisions.createdDate'), key: 'createdDate' },
  { title: t('tableHeaders.decisions.actions'), key: 'actions' }
])
</script>
```

### ุงุณุชุฎุฏุงู ูุธุงู ุงูุชุญูู
```vue
<template>
  <ValidatedTextField
    v-model="form.name"
    :label="t('form.name')"
    :error="validationErrors.name"
    :touched="touchedFields.name"
    @blur="setFieldTouched('name')"
  />
</template>

<script setup>
import { useFormValidation } from '@/composables/useFormValidation'

const {
  validateRequired,
  validateEmail,
  addError,
  clearErrors,
  setFieldTouched,
  validationErrors,
  touchedFields,
  hasErrors
} = useFormValidation()
</script>
```

### ุฅุฑุณุงู ุงููุบุฉ ูุน ุทูุจุงุช API
```javascript
// ูู useApi.ts ู api.js
async beforeFetch({ options }) {
  // ... existing code ...

  // Add Accept-Language header based on current locale
  const { locale } = useI18n()
  const languageMap = {
    'ar': 'ar-LY',
    'en': 'en-US'
  }
  const currentLanguage = languageMap[locale.value] || 'ar-LY'
  
  options.headers = {
    ...options.headers,
    'Accept-Language': currentLanguage,
  }

  return { options }
}
```

## ุงููููุงุช ุงูุฃุณุงุณูุฉ

### Frontend
- `src/composables/useFormValidation.ts` - ูุธุงู ุงูุชุญูู ุงูุฃุณุงุณู
- `src/components/ValidatedTextField.vue` - ูููู ุญูู ุงููุต ูุน ุงูุชุญูู
- `src/plugins/i18n/locales/ar.json` - ุงูุชุฑุฌูุงุช ุงูุนุฑุจูุฉ
- `src/plugins/i18n/locales/en.json` - ุงูุชุฑุฌูุงุช ุงูุฅูุฌููุฒูุฉ
- `src/utils/api.js` - ุฅุนุฏุงุฏุงุช API ูุน ุฅุฑุณุงู ุงููุบุฉ
- `src/composables/useApi.ts` - composable API ูุน ุฅุฑุณุงู ุงููุบุฉ

### Backend
- Repository Pattern ูุน `GetByFilterAsync`
- Handler Pattern ูุน ุงุณุชุฏุนุงุก ูุจุงุดุฑ ููู Repository
- FluentValidation ููุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- `ThreadCultureMiddleware` ููุฑุงุกุฉ ุงููุบุฉ ูู ุงูู headers

## ุงููุฒุงูุง

1. **ุฃุฏุงุก ุนุงูู**: ููุชุฑุฉ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ูุฑููุฉ**: ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช
3. **ูุงุจููุฉ ุงูุตูุงูุฉ**: ููุฏ ููุญุฏ ูููุธู
4. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ**: ุชุญูู ููุฑู ูุฑุณุงุฆู ูุงุถุญุฉ
5. **ูุงุจููุฉ ุงูุชูุณุน**: ุณูููุฉ ุฅุถุงูุฉ ุตูุญุงุช ุฌุฏูุฏุฉ
6. **ุชูุงูู ูุชุนุฏุฏ ุงููุบุงุช**: ุฑุณุงุฆู ุฎุทุฃ ุจุงููุบุฉ ุงููุฎุชุงุฑุฉ

## ุงูุชุทุจูู ุงููุณุชูุจูู

ูุฌุจ ุชุทุจูู ูุฐุง ุงูููุท ุนูู ุฌููุน ุงูุตูุญุงุช ุงูุฌุฏูุฏุฉ ูุงููุชุจููุฉ ูู ุงููุดุฑูุน ูุถูุงู ุงูุงุชุณุงู ูุงูุฌูุฏุฉ ุงูุนุงููุฉ.

## ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ ุนูู ุตูุญุฉ ุงููุฏู

### โ ุงูููุฒุงุช ุงููุทุจูุฉ:
1. **ุงูุนูุงููู ุงูุฏููุงููููุฉ**: ุงุณุชุฎุฏุงู i18n ููุชุฑุฌูุงุช
2. **ูุธุงู ุงูุชุญูู ุงููุญุณู**: ุงุณุชุฎุฏุงู `useFormValidation` composable
3. **ุชุญูู ููุฑู**: ุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ ูุจู ุงูุฅุฑุณุงู
4. **ุชูุงูู ูุน Backend**: ูุนุงูุฌุฉ ุฃุฎุทุงุก FluentValidation
5. **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ**: ุชูุธูู ุงูุฃุฎุทุงุก ุนูุฏ ูุชุญ ุงูููุงุฐุฌ
6. **ุชุนุทูู ุงูุฃุฒุฑุงุฑ**: ุชุนุทูู ุฃุฒุฑุงุฑ ุงูุญูุธ ุนูุฏ ูุฌูุฏ ุฃุฎุทุงุก
7. **ุนุฑุถ ุงูุฃุฎุทุงุก**: ุนุฑุถ ุงูุฃุฎุทุงุก ููุท ููุญููู ุงูููููุณุฉ

### ๐ง ุงูุชุญุฏูุซุงุช ุงูุชูููุฉ:
- ุชุญุฏูุซ ุงูุนูุงููู ูุชุณุชุฎุฏู `t('tableHeaders.cities.*')`
- ุงุณุชุจุฏุงู `validationState` ุจู `shouldShowFieldError` ู `getFieldErrors`
- ุฅุถุงูุฉ ุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ ูู `addCity` ู `updateCity`
- ุชุญุณูู ูุนุงูุฌุฉ ุฃุฎุทุงุก Backend
- ุฅุถุงูุฉ ุชูุธูู ุงูุฃุฎุทุงุก ุนูุฏ ูุชุญ ุงูููุงุฐุฌ

## ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ ุนูู ุตูุญุฉ ุงูููุงุฏ

### โ ุงูููุฒุงุช ุงููุทุจูุฉ:
1. **ุงูุนูุงููู ุงูุฏููุงููููุฉ**: ุงุณุชุฎุฏุงู i18n ููุชุฑุฌูุงุช
2. **ูุธุงู ุงูุชุญูู ุงููุญุณู**: ุงุณุชุฎุฏุงู `useFormValidation` composable
3. **ุชุญูู ููุฑู**: ุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ ูุจู ุงูุฅุฑุณุงู
4. **ุชูุงูู ูุน Backend**: ูุนุงูุฌุฉ ุฃุฎุทุงุก FluentValidation
5. **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ**: ุชูุธูู ุงูุฃุฎุทุงุก ุนูุฏ ูุชุญ ุงูููุงุฐุฌ
6. **ุชุนุทูู ุงูุฃุฒุฑุงุฑ**: ุชุนุทูู ุฃุฒุฑุงุฑ ุงูุญูุธ ุนูุฏ ูุฌูุฏ ุฃุฎุทุงุก
7. **ุนุฑุถ ุงูุฃุฎุทุงุก**: ุนุฑุถ ุงูุฃุฎุทุงุก ููุท ููุญููู ุงูููููุณุฉ
8. **ุชุญูู ูู ุงูุฃุฑูุงู**: ุชุญูู ูู ุงูุณุนุฑ ูุงููููุฉ (ูุง ูููู ุฃู ุชููู ุณุงูุจุฉ)

### ๐ง ุงูุชุญุฏูุซุงุช ุงูุชูููุฉ:
- ุชุญุฏูุซ ุงูุนูุงููู ูุชุณุชุฎุฏู `t('tableHeaders.products.*')`
- ุงุณุชุจุฏุงู `validationState` ุจู `shouldShowFieldError` ู `getFieldErrors`
- ุฅุถุงูุฉ ุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ ูู `addProduct` ู `updateProduct`
- ุชุญุณูู ูุนุงูุฌุฉ ุฃุฎุทุงุก Backend
- ุฅุถุงูุฉ ุชูุธูู ุงูุฃุฎุทุงุก ุนูุฏ ูุชุญ ุงูููุงุฐุฌ
- ุชุญูู ูู ุงูููู ุงูุฑูููุฉ (ุงูุณุนุฑ ูุงููููุฉ)

## ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ ุนูู ุฅุฏุงุฑุฉ ุงููุบุฉ ุงููุชุนุฏุฏุฉ

### โ ุงูููุฒุงุช ุงููุทุจูุฉ:
1. **ุฅุฑุณุงู ุงููุบุฉ ูุน ุงูุทูุจุงุช**: ุฅุถุงูุฉ `Accept-Language` header
2. **ุชูุงูู ูุน ุงูุจุงู ุฅูุฏ**: ุงุณุชุฎุฏุงู `ThreadCultureMiddleware`
3. **ุฑุณุงุฆู ุฎุทุฃ ูุชุนุฏุฏุฉ ุงููุบุงุช**: ุฑุณุงุฆู FluentValidation ุจุงููุบุฉ ุงููุฎุชุงุฑุฉ
4. **ุฏุนู ุงููุบุงุช**: ุงูุนุฑุจูุฉ (ar-LY) ูุงูุฅูุฌููุฒูุฉ (en-US)

### ๐ง ุงูุชุญุฏูุซุงุช ุงูุชูููุฉ:
- ุชุญุฏูุซ `src/utils/api.js` ูุฅุฑุณุงู `Accept-Language` header
- ุชุญุฏูุซ `src/composables/useApi.ts` ูุฅุฑุณุงู `Accept-Language` header
- ุชุญุฏูุซ `src/composables/useApi.js` ูุฅุฑุณุงู `Accept-Language` header
- ุชูุงูู ูุน `ThreadCultureMiddleware` ูู ุงูุจุงู ุฅูุฏ
- ุฅุตูุงุญ ุฃุฎุทุงุก TypeScript ูู ูููุงุช TypeScript

## ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ ุนูู ุตูุญุฉ ุงููุณุงุฌุฏ

### โ ุงูููุฒุงุช ุงููุทุจูุฉ:
1. **ุงูุนูุงููู ุงูุฏููุงููููุฉ**: ุงุณุชุฎุฏุงู i18n ููุชุฑุฌูุงุช
2. **ูุธุงู ุงูุชุญูู ุงููุญุณู**: ุงุณุชุฎุฏุงู `useFormValidation` composable
3. **ุชุญูู ููุฑู**: ุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ ูุจู ุงูุฅุฑุณุงู
4. **ุชูุงูู ูุน Backend**: ูุนุงูุฌุฉ ุฃุฎุทุงุก FluentValidation
5. **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ**: ุชูุธูู ุงูุฃุฎุทุงุก ุนูุฏ ูุชุญ ุงูููุงุฐุฌ
6. **ุชุนุทูู ุงูุฃุฒุฑุงุฑ**: ุชุนุทูู ุฃุฒุฑุงุฑ ุงูุญูุธ ุนูุฏ ูุฌูุฏ ุฃุฎุทุงุก
7. **ุนุฑุถ ุงูุฃุฎุทุงุก**: ุนุฑุถ ุงูุฃุฎุทุงุก ููุท ููุญููู ุงูููููุณุฉ
8. **ุชุญูู ูู ุงูุฃุฑูุงู**: ุชุญูู ูู ุงููุณุงุญุงุช ูุนุฏุฏ ุงูุทูุงุจู (ููู ููุฌุจุฉ)
9. **ุฏุนู ุชูุงุตูู ุงููุจูู**: ุฅุฏุงุฑุฉ ุชูุงุตูู ุงููุจูู ูุงูููุงุฏ

### ๐ง ุงูุชุญุฏูุซุงุช ุงูุชูููุฉ:
- ุชุญุฏูุซ ุงูุนูุงููู ูุชุณุชุฎุฏู `t('tableHeaders.mosques.*')`
- ุชุญุฏูุซ ุนูุงููู ุชูุงุตูู ุงููุจูู ูุชุณุชุฎุฏู `t('tableHeaders.buildingDetails.*')`
- ุงุณุชุจุฏุงู `validationState` ุจู `shouldShowFieldError` ู `getFieldErrors`
- ุฅุถุงูุฉ ุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ ูู `addMosque` ู `updateMosque`
- ุชุญุณูู ูุนุงูุฌุฉ ุฃุฎุทุงุก Backend
- ุฅุถุงูุฉ ุชูุธูู ุงูุฃุฎุทุงุก ุนูุฏ ูุชุญ ุงูููุงุฐุฌ
- ุชุญูู ูู ุงูููู ุงูุฑูููุฉ (ุงููุณุงุญุงุช ูุนุฏุฏ ุงูุทูุงุจู)
- ุฅุถุงูุฉ ุฏุนู ุฅุฏุงุฑุฉ ุงูููุงุฏ ูู ุชูุงุตูู ุงููุจูู 