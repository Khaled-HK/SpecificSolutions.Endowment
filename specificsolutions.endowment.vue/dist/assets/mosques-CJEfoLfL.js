import{aZ as Ml,r as d,w as tl,D as Nl,P as Fl,a as Al,c as Ie,o as L,b as a,e as t,s as r,t as b,d as g,f as H,l as Se,aa as D,V as C,p as K,aV as X}from"./index-Bg4xuB1X.js";import{$ as w}from"./api-CtflMH2I.js";import{V as Ue}from"./VAlert-EJXBu8ko.js";import{b as A,V as E,d as B,c as ze}from"./VCard-DDR_Ypqe.js";import{V as El}from"./VDivider-DifrbBpe.js";import{V as I}from"./VCardText-s50m09-4.js";import{V as Z,a as s}from"./VRow-BAQcKL2W.js";import{V as f}from"./VTextField-BHcrK3Dr.js";import{V as Oe}from"./VDataTable-DmO6crSb.js";import{V as T}from"./VSelect-8-VDNGkd.js";import{V as Ll}from"./VPagination-Dz7DRFWj.js";import{V as Y}from"./VTooltip-B2B8tXvV.js";import{V as _}from"./VChip-H4A1W8rV.js";import{V as ol}from"./VAvatar-BsFM-TZJ.js";import{V as h}from"./VForm-BSFgP32H.js";import{V as ee}from"./VAutocomplete-CD5SZDGH.js";import{V as ul}from"./VTextarea-CPImoRvr.js";import{V as U}from"./VSpacer-z6O_zCSB.js";import{V as $}from"./VDialog-CWNQOwlq.js";import{V as il}from"./VCheckbox-FBPOCfUZ.js";import{_ as Pl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-9rIf2CJL.js";import"./VImg-NlJe-KFk.js";/* empty css              *//* empty css                   */import"./VCounter-DeZ2K8Z1.js";import"./VField-vHjrVG5U.js";import"./form-Cuh6vgJQ.js";import"./easing-CjukEv2V.js";import"./VInput-jwilm1jM.js";import"./forwardRefs-C-GTDzx5.js";import"./VCheckboxBtn-DUP9cNAP.js";import"./VSelectionControl-C-J5k8Iq.js";import"./VTable-BTzlTVHi.js";import"./filter-hnx0p1D_.js";import"./VList-BRBkP7En.js";import"./ssrBoot-YZDDE8_j.js";import"./dialog-transition-BFSA7jd1.js";import"./VMenu-BI4u-Xp1.js";import"./VOverlay-DtU6ufsq.js";import"./delay-B1a-6wqT.js";import"./lazy-CtldSEvy.js";import"./scopeId-CE5cAIa2.js";import"./VSlideGroup-DaNbB7e2.js";const Bl={class:"d-flex gap-2"},$l={class:"d-flex align-center"},Tl={class:"d-flex flex-column ms-3"},zl={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Ol={class:"text-medium-emphasis"},Rl={key:1,class:"text-medium-emphasis"},Wl={key:1,class:"text-medium-emphasis"},jl={key:1,class:"text-medium-emphasis"},Ql={class:"d-flex gap-1"},Gl={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},Hl={class:"text-center py-8"},Zl={class:"d-flex align-center"},Jl={class:"d-flex flex-column ms-3"},Kl={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Xl={class:"text-medium-emphasis"},Yl={class:"d-flex gap-1"},_l={class:"text-center text-medium-emphasis py-8"},hl={class:"d-flex justify-end mb-2"},ea={class:"d-flex gap-1"},la=Ml({__name:"mosques",setup(aa){const Me=d([]),le=d([]),ae=d([]),Ne=d(!1),fe=d(!1),ce=d(!1),pe=d(0),Re=[{value:0,label:"لا شيء"},{value:1,label:"جمعة"},{value:2,label:"أوقات"},{value:3,label:"مسجد مركزي"},{value:4,label:"قاعة صلاة عامة"}],We=[{value:0,label:"لا شيء"},{value:1,label:"عام"},{value:2,label:"وطني"}],je=[{value:0,label:"منظمة"},{value:1,label:"محسنين"}],M=()=>new Date().toISOString().split("T")[0],v=d(!1),c=d(""),p=d("success"),te=d(!1),oe=d(!1),W=d(!1),ge=d(!1),ye=d(!1),be=d(!1),V=d(null),j=d(null),Q=d([]),Ve=d(""),N=d([]),z=d(!1),De=d(""),Fe=d(),Ae=d(),S=d({name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}),q=d({id:"",name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}),Qe=[{value:"Facility",label:"منشأة"},{value:"Endowment",label:"وقف"}],n=d({name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:M(),constructionDate:M(),mosqueDefinition:0,mosqueClassification:0,landDonorName:"",prayerCapacity:"",sourceFunds:0,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}),i=d({name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:"",constructionDate:"",mosqueDefinition:1,mosqueClassification:1,landDonorName:"",prayerCapacity:"",sourceFunds:1,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}),k=d({page:1,itemsPerPage:10,sortBy:[""],sortDesc:[!1]}),nl=[{title:"اسم المسجد",key:"mosqueName",sortable:!0},{title:"رقم الملف",key:"fileNumber",sortable:!0},{title:"المنطقة",key:"region",sortable:!0},{title:"المكتب",key:"office",sortable:!0},{title:"الإجراءات",key:"actions",sortable:!1,width:"120px"}],rl=[{title:"اسم المبنى",key:"name",sortable:!0},{title:"عدد الطوابق",key:"floors",sortable:!0},{title:"نوع المبنى",key:"buildingCategory",sortable:!0},{title:"الموقع",key:"withinMosqueArea",sortable:!0},{title:"الإجراءات",key:"actions",sortable:!1,width:"80px"}],O=async()=>{Ne.value=!0;try{const o=new URLSearchParams({PageNumber:k.value.page.toString(),PageSize:k.value.itemsPerPage.toString(),SearchTerm:Ve.value||""}),e=await w(`/Mosque/filter?${o}`);if(Me.value=e.data.items||[],e.data){pe.value=e.data.totalCount||0;const u=Math.ceil(pe.value/k.value.itemsPerPage);k.value.page>u&&u>0&&(k.value.page=u,await O())}}catch(o){console.error("Error loading mosques:",o),c.value="حدث خطأ أثناء تحميل المساجد",p.value="error",v.value=!0,Me.value=[],pe.value=0}finally{Ne.value=!1}},Ge=async()=>{fe.value=!0;try{const e=(await w("/Region/filter?PageSize=100")).data.items||[];le.value=e.map(u=>({...u,name:u.name||u.regionName||u.title||u.id}))}catch(o){console.error("Error loading regions:",o),c.value="حدث خطأ أثناء تحميل المناطق",p.value="error",v.value=!0}finally{fe.value=!1}},He=async()=>{ce.value=!0;try{const e=(await w("/Office/filter?PageSize=100")).data.items||[];ae.value=e.map(u=>({...u,name:u.name||u.officeName||u.title||u.id}))}catch(o){console.error("Error loading offices:",o),c.value="حدث خطأ أثناء تحميل المكاتب",p.value="error",v.value=!0}finally{ce.value=!1}},Ze=async()=>{var o,e;try{const u=m=>{if(!m||m.trim()==="")return M();try{const y=new Date(m);return isNaN(y.getTime())?M():y.toISOString().split("T")[0]}catch{return M()}},l=await w("/Mosque",{method:"POST",body:{name:n.value.name,regionId:n.value.regionId,officeId:n.value.officeId,fileNumber:n.value.fileNumber,definition:n.value.definition,classification:n.value.classification,unit:n.value.unit,nearestLandmark:n.value.nearestLandmark,mapLocation:n.value.mapLocation,sanitation:n.value.sanitation,electricityMeter:n.value.electricityMeter,alternativeEnergySource:n.value.alternativeEnergySource,waterSource:n.value.waterSource,briefDescription:n.value.briefDescription,totalCoveredArea:n.value.totalCoveredArea,totalLandArea:n.value.totalLandArea,numberOfFloors:n.value.numberOfFloors,openingDate:u(n.value.openingDate),constructionDate:u(n.value.constructionDate),mosqueDefinition:n.value.mosqueDefinition,mosqueClassification:n.value.mosqueClassification,landDonorName:n.value.landDonorName,prayerCapacity:n.value.prayerCapacity,sourceFunds:n.value.sourceFunds,servicesSpecialNeeds:n.value.servicesSpecialNeeds,specialEntranceWomen:n.value.specialEntranceWomen,picturePath:n.value.picturePath}});if(l&&l.isSuccess===!1){const m=l.message||((e=(o=l.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء إضافة المسجد";c.value=m,p.value="error",v.value=!0;return}te.value=!1,pl(),O(),c.value="تم إضافة المسجد بنجاح",p.value="success",v.value=!0}catch(u){console.error("Error adding mosque:",u),c.value="حدث خطأ أثناء إضافة المسجد",p.value="error",v.value=!0}},Je=async()=>{var o,e,u,l,m,y,x;try{const F=ve=>{if(!ve||ve.trim()==="")return M();try{const al=new Date(ve);return isNaN(al.getTime())?M():al.toISOString().split("T")[0]}catch{return M()}};console.log("البيانات المرسلة للتحديث:",{id:(o=V.value)==null?void 0:o.mosqueID,name:i.value.name,regionId:i.value.regionId,officeId:i.value.officeId,openingDate:F(i.value.openingDate),constructionDate:F(i.value.constructionDate)}),console.log("ID المرسل:",(e=V.value)==null?void 0:e.mosqueID),console.log("نوع الـ ID:",typeof((u=V.value)==null?void 0:u.mosqueID));const ke=await w(`/Mosque/${(l=V.value)==null?void 0:l.mosqueID}`,{method:"PUT",body:{id:(m=V.value)==null?void 0:m.mosqueID,name:i.value.name,regionId:i.value.regionId,officeId:i.value.officeId,fileNumber:i.value.fileNumber,definition:i.value.definition,classification:i.value.classification,unit:i.value.unit,nearestLandmark:i.value.nearestLandmark,mapLocation:i.value.mapLocation,sanitation:i.value.sanitation,electricityMeter:i.value.electricityMeter,alternativeEnergySource:i.value.alternativeEnergySource,waterSource:i.value.waterSource,briefDescription:i.value.briefDescription,totalCoveredArea:i.value.totalCoveredArea,totalLandArea:i.value.totalLandArea,numberOfFloors:i.value.numberOfFloors,openingDate:F(i.value.openingDate),constructionDate:F(i.value.constructionDate),mosqueDefinition:i.value.mosqueDefinition,mosqueClassification:i.value.mosqueClassification,landDonorName:i.value.landDonorName,prayerCapacity:i.value.prayerCapacity,sourceFunds:i.value.sourceFunds,servicesSpecialNeeds:i.value.servicesSpecialNeeds,specialEntranceWomen:i.value.specialEntranceWomen,picturePath:i.value.picturePath}});if(ke&&ke.isSuccess===!1){const ve=ke.message||((x=(y=ke.errors)==null?void 0:y[0])==null?void 0:x.errorMessage)||"حدث خطأ أثناء تحديث المسجد";c.value=ve,p.value="error",v.value=!0;return}oe.value=!1,O(),c.value="تم تحديث المسجد بنجاح",p.value="success",v.value=!0}catch(F){console.error("Error updating mosque:",F),c.value="حدث خطأ أثناء تحديث المسجد",p.value="error",v.value=!0}},sl=async()=>{var o,e;if(V.value)try{console.log("Attempting to delete mosque:",V.value.mosqueID);const u=await w(`/Mosque/${V.value.mosqueID}`,{method:"DELETE"});if(console.log("Delete response:",u),console.log("Response data:",u.data),u&&u.isSuccess===!1){const l=u.message||((e=(o=u.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء حذف المسجد";console.log("API returned error:",l),c.value=l,p.value="error",v.value=!0,W.value=!1;return}console.log("Mosque deleted successfully"),W.value=!1,O(),c.value="تم حذف المسجد بنجاح",p.value="success",v.value=!0}catch(u){console.error("Error deleting mosque:",u),c.value="حدث خطأ في الاتصال بالخادم",p.value="error",v.value=!0,W.value=!1}},dl=async()=>{if(Q.value.length!==0)try{const o=Q.value.map(l=>w(`/Mosque/${l.mosqueID}`,{method:"DELETE"})),u=(await Promise.all(o)).filter(l=>l&&l.isSuccess===!1);if(u.length>0){const l=u.map(y=>{var x,F;return(y==null?void 0:y.message)||((F=(x=y==null?void 0:y.errors)==null?void 0:x[0])==null?void 0:F.errorMessage)||"حدث خطأ أثناء العملية"}),m=`فشل في حذف ${u.length} عنصر: ${l.join(", ")}`;c.value=m,p.value="error",v.value=!0;return}Q.value=[],O(),c.value="تم حذف المساجد المحددة بنجاح",p.value="success",v.value=!0}catch(o){console.error("Error deleting selected mosques:",o),c.value="حدث خطأ في الاتصال بالخادم",p.value="error",v.value=!0}},ml=async o=>{var m,y;console.log("بيانات المسجد من API:",o),le.value.length===0&&await Ge(),ae.value.length===0&&await He();const e=((m=le.value.find(x=>x.name===o.region))==null?void 0:m.id)||"",u=((y=ae.value.find(x=>x.name===o.office))==null?void 0:y.id)||"";console.log("تم العثور على:",{regionId:e,officeId:u,regionName:o.region,officeName:o.office});const l=x=>{if(!x)return"";try{return new Date(x).toISOString().split("T")[0]}catch{return""}};i.value={name:o.mosqueName,regionId:e,officeId:u,fileNumber:o.fileNumber,definition:o.definition||"",classification:o.classification||"",unit:o.unit,nearestLandmark:o.nearestLandmark,mapLocation:o.mapLocation,sanitation:o.sanitation,electricityMeter:o.electricityMeter,alternativeEnergySource:o.alternativeEnergySource,waterSource:o.waterSource,briefDescription:o.briefDescription,totalCoveredArea:o.totalCoveredArea,totalLandArea:o.totalLandArea,numberOfFloors:o.numberOfFloors,openingDate:l(o.openingDate),constructionDate:l(o.constructionDate),mosqueDefinition:o.mosqueDefinition||0,mosqueClassification:o.mosqueClassification||0,landDonorName:o.landDonorName||"",prayerCapacity:o.prayerCapacity||"",sourceFunds:o.sourceFunds||0,servicesSpecialNeeds:o.servicesSpecialNeeds||!1,specialEntranceWomen:o.specialEntranceWomen||!1,picturePath:o.picturePath||""},V.value=o,oe.value=!0,console.log("editMosque.value عند التعديل:",i.value)},vl=async o=>{V.value=o,ge.value=!0,await Ke(o.mosqueID)},we=async()=>{V.value&&await Ke(V.value.mosqueID)},Ke=async o=>{z.value=!0;try{const e=await w(`/Mosque/${o}`);if(e&&e.data){const u=e.data.buildingId;if(u){const l=await w(`/BuildingDetail/filter?BuildingId=${u}&PageSize=100&PageNumber=1`);l&&l.data?N.value=l.data.items||[]:N.value=[]}else N.value=[]}else N.value=[]}catch(e){console.error("Error loading building details:",e),c.value="حدث خطأ أثناء تحميل تفاصيل المبنى",p.value="error",v.value=!0,N.value=[]}finally{z.value=!1}},fl=o=>{V.value=o,W.value=!0},cl=()=>{n.value.openingDate=M(),n.value.constructionDate=M(),te.value=!0},pl=()=>{n.value={name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:M(),constructionDate:M(),mosqueDefinition:0,mosqueClassification:0,landDonorName:"",prayerCapacity:"",sourceFunds:0,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}},Xe=async()=>{var e,u,l;if(!Fe.value)return;if(!await Fe.value.validate()){c.value="يرجى ملء جميع الحقول المطلوبة",p.value="warning",v.value=!0;return}try{const m=await w(`/Mosque/${(e=V.value)==null?void 0:e.mosqueID}`);if(!m||!m.data){c.value="لم يتم العثور على المسجد",p.value="error",v.value=!0;return}const y=m.data.buildingId;if(!y){c.value="لم يتم العثور على المبنى المرتبط بالمسجد",p.value="error",v.value=!0;return}const x=await w("/BuildingDetail",{method:"POST",body:{name:S.value.name,buildingId:y,floors:S.value.floors,withinMosqueArea:S.value.withinMosqueArea,buildingCategory:S.value.buildingCategory}});if(x&&x.isSuccess===!1){const F=x.message||((l=(u=x.errors)==null?void 0:u[0])==null?void 0:l.errorMessage)||"حدث خطأ أثناء إضافة تفصيل المبنى";c.value=F,p.value="error",v.value=!0;return}Ee(),await we(),c.value="تم إضافة تفصيل المبنى بنجاح",p.value="success",v.value=!0}catch(m){console.error("Error adding building detail:",m),c.value="حدث خطأ أثناء إضافة تفصيل المبنى",p.value="error",v.value=!0}},gl=async o=>{var e,u;try{const l=await w(`/BuildingDetail/${o}`,{method:"DELETE"});if(l&&l.isSuccess===!1){const m=l.message||((u=(e=l.errors)==null?void 0:e[0])==null?void 0:u.errorMessage)||"حدث خطأ أثناء حذف تفصيل المبنى";c.value=m,p.value="error",v.value=!0;return}V.value&&await we(),c.value="تم حذف تفصيل المبنى بنجاح",p.value="success",v.value=!0}catch(l){console.error("Error deleting building detail:",l),c.value="حدث خطأ أثناء حذف تفصيل المبنى",p.value="error",v.value=!0}},Ye=()=>{ye.value=!0},Ee=()=>{ye.value=!1,S.value={name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}},yl=async()=>{if(V.value){z.value=!0;try{const o=await w(`/Mosque/${V.value.mosqueID}`);if(o&&o.data){const e=o.data.buildingId;if(e){const u=await w(`/BuildingDetail/filter?BuildingId=${e}&SearchTerm=${De.value}&PageSize=100&PageNumber=1`);u&&u.data?N.value=u.data.items||[]:N.value=[]}else N.value=[]}else N.value=[]}catch(o){console.error("Error searching building details:",o),c.value="حدث خطأ أثناء البحث في تفاصيل المبنى",p.value="error",v.value=!0,N.value=[]}finally{z.value=!1}}},bl=async()=>{De.value="",await we()},Vl=async o=>{let e="";o.buildingCategory===0||o.buildingCategory==="Facility"?e="Facility":(o.buildingCategory===1||o.buildingCategory,e="Endowment"),q.value={id:o.id,name:o.name,floors:o.floors,withinMosqueArea:o.withinMosqueArea,buildingCategory:e},j.value=o,be.value=!0},Le=()=>{be.value=!1,j.value=null,q.value={id:"",name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}},_e=async()=>{var e,u;if(!Ae.value)return;if(!await Ae.value.validate()){c.value="يرجى ملء جميع الحقول المطلوبة",p.value="warning",v.value=!0;return}try{const l=await w(`/BuildingDetail/${q.value.id}`,{method:"PUT",body:{id:q.value.id,name:q.value.name,floors:q.value.floors,withinMosqueArea:q.value.withinMosqueArea,buildingCategory:q.value.buildingCategory}});if(l&&l.isSuccess===!1){const m=l.message||((u=(e=l.errors)==null?void 0:e[0])==null?void 0:u.errorMessage)||"حدث خطأ أثناء تحديث تفصيل المبنى";c.value=m,p.value="error",v.value=!0;return}Le(),await we(),c.value="تم تحديث تفصيل المبنى بنجاح",p.value="success",v.value=!0}catch(l){console.error("Error updating building detail:",l),c.value="حدث خطأ أثناء تحديث تفصيل المبنى",p.value="error",v.value=!0}},ue=d(!1),ie=d(null),J=d([]),Pe=d(!1),xe=async o=>{Pe.value=!0;try{const e=await w(`/BuildingDetail/${o.id}`);if(!e||!e.data){J.value=[];return}const u=await w(`/FacilityDetail/filter?BuildingDetailId=${o.id}&PageSize=100&searchTerm=`);u&&u.data&&u.data.items?J.value=u.data.items:J.value=[]}catch{J.value=[]}finally{Pe.value=!1}},Dl=async o=>{j.value=o,ie.value=o,ue.value=!0,await xe(o)};tl(Ve,()=>{k.value.page=1,O()},{immediate:!1}),tl([()=>k.value.page,()=>k.value.itemsPerPage],()=>{O()},{immediate:!1}),Nl(()=>{O(),Ge(),He()});const ne=d(!1),G=d({productId:"",quantity:1}),Be=d(!1),re=d([]),Ce=d(!1),he=async()=>{Ce.value=!0;try{const o=await w("/Product/GetProducts");if(o&&o.data){const e=o.data.data||o.data||[];re.value=e.map(u=>({...u,name:u.name||u.productName||u.product&&u.product.name||u.title||u.id}))}else re.value=[]}catch{re.value=[]}finally{Ce.value=!1}},wl=async()=>{G.value={productId:"",quantity:1},await he(),ne.value=!0},xl=()=>{ne.value=!1},el=async()=>{var o,e;if(j.value){Be.value=!0;try{const u=await w("/FacilityDetail",{method:"POST",body:{buildingDetailId:j.value.id||j.value.Id,productId:G.value.productId,quantity:G.value.quantity}});if(u&&u.isSuccess===!1){let l=u.message||((e=(o=u.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء إضافة المادة";l=l.replace(/\n/g,""),R(l,"error");return}ne.value=!1,await xe(j.value),R("تمت إضافة المادة بنجاح","success")}catch{R("حدث خطأ أثناء إضافة المادة","error")}finally{Be.value=!1}}},se=d(!1),de=d(null),$e=d(!1),Cl=o=>{de.value=o,se.value=!0},ql=()=>{se.value=!1,de.value=null},kl=async()=>{if(de.value){$e.value=!0;try{await w(`/FacilityDetail/${de.value.id||de.value.Id}`,{method:"DELETE"}),se.value=!1,await xe(ie.value),R("تم حذف المادة بنجاح","success")}catch{R("حدث خطأ أثناء حذف المادة","error")}finally{$e.value=!1}}},me=d(!1),P=d({id:"",productId:"",quantity:1}),Te=d(!1),Il=async o=>{await he(),P.value={id:o.id||o.Id,productId:o.productId||o.ProductId,quantity:o.quantity||o.Quantity||1},me.value=!0},Sl=()=>{me.value=!1,P.value={id:"",productId:"",quantity:1}},ll=async()=>{var o,e;Te.value=!0;try{const u=await w(`/FacilityDetail/${P.value.id}`,{method:"PUT",body:{id:P.value.id,productId:P.value.productId,quantity:P.value.quantity}});if(u&&u.isSuccess===!1){let l=u.message||((e=(o=u.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء تعديل المادة";l=l.replace(/\n/g,""),console.log("رسالة الخطأ:",l),R(l,"error");return}me.value=!1,await xe(ie.value),R("تم تعديل المادة بنجاح","success")}catch{R("حدث خطأ أثناء تعديل المادة","error")}finally{Te.value=!1}},qe=d(""),Ul=Fl(()=>{if(!qe.value)return J.value;const o=qe.value.toLowerCase();return J.value.filter(e=>{var x;const u=((x=e.product)==null?void 0:x.name)||e.productName||"",l=String(e.id||e.Id||""),m=String(e.productId||e.ProductId||""),y=String(e.quantity??e.Quantity??"");return u.toLowerCase().includes(o)||l.includes(o)||m.includes(o)||y.includes(o)})});function R(o,e="success"){c.value=o,p.value=e,v.value=!0}return(o,e)=>{const u=Al("IconBtn");return L(),Ie("div",null,[a(Ue,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l),type:p.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[r(b(c.value),1)]),_:1},8,["modelValue","type"]),a(E,null,{default:t(()=>[a(A,{class:"d-flex justify-space-between align-center pa-6"},{default:t(()=>[e[79]||(e[79]=g("span",{class:"text-h5"},"إدارة المساجد",-1)),g("div",Bl,[Q.value.length>0?(L(),H(D,{key:0,color:"error",variant:"outlined",onClick:dl},{default:t(()=>[r(" حذف المحدد ("+b(Q.value.length)+") ",1)]),_:1})):Se("",!0),a(D,{color:"primary",onClick:cl},{default:t(()=>e[78]||(e[78]=[r(" إضافة مسجد ")])),_:1})])]),_:1}),a(El),a(I,null,{default:t(()=>[a(Z,null,{default:t(()=>[a(s,{cols:"12","offset-md":"8",md:"4"},{default:t(()=>[a(f,{modelValue:Ve.value,"onUpdate:modelValue":e[1]||(e[1]=l=>Ve.value=l),placeholder:"البحث في المساجد...","prepend-inner-icon":"mdi-magnify","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),a(Oe,{headers:nl,items:Me.value,loading:Ne.value,"items-per-page":k.value.itemsPerPage,page:k.value.page,options:k.value,class:"text-no-wrap","show-select":"",modelValue:Q.value,"onUpdate:modelValue":e[4]||(e[4]=l=>Q.value=l)},{"item.mosqueName":t(({item:l})=>[g("div",$l,[a(ol,{size:"32",color:"primary",variant:"tonal"},{default:t(()=>[r(b(l.mosqueName.charAt(0).toUpperCase()),1)]),_:2},1024),g("div",Tl,[g("span",zl,b(l.mosqueName),1),g("small",Ol,b(l.briefDescription||"لا يوجد وصف"),1)])])]),"item.fileNumber":t(({item:l})=>[l.fileNumber?(L(),H(_,{key:0,color:"secondary",variant:"tonal",size:"small"},{default:t(()=>[r(b(l.fileNumber),1)]),_:2},1024)):(L(),Ie("span",Rl," لا يوجد رقم ملف "))]),"item.region":t(({item:l})=>[l.region?(L(),H(_,{key:0,color:"info",variant:"tonal",size:"small"},{default:t(()=>[r(b(l.region),1)]),_:2},1024)):(L(),Ie("span",Wl," لا توجد منطقة "))]),"item.office":t(({item:l})=>[l.office?(L(),H(_,{key:0,color:"success",variant:"tonal",size:"small"},{default:t(()=>[r(b(l.office),1)]),_:2},1024)):(L(),Ie("span",jl," لا يوجد مكتب "))]),"item.actions":t(({item:l})=>[g("div",Ql,[a(u,{onClick:m=>ml(l)},{default:t(()=>[a(C,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(Y,{text:"إدارة تفاصيل المبنى (منزل الإمام، المصلى، دورة المياه...)",location:"top"},{activator:t(({props:m})=>[a(u,K({onClick:y=>vl(l),color:"info"},m),{default:t(()=>[a(C,{icon:"tabler-building"})]),_:2},1040,["onClick"])]),_:2},1024),a(u,{onClick:m=>fl(l)},{default:t(()=>[a(C,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),bottom:t(()=>[a(I,{class:"pt-2"},{default:t(()=>[g("div",Gl,[a(T,{modelValue:k.value.itemsPerPage,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value.itemsPerPage=l),items:[5,10,25,50,100],label:"عناصر في الصفحة:",variant:"underlined",style:{"max-inline-size":"8rem","min-inline-size":"5rem"}},null,8,["modelValue"]),a(Ll,{modelValue:k.value.page,"onUpdate:modelValue":e[3]||(e[3]=l=>k.value.page=l),"total-visible":o.$vuetify.display.smAndDown?3:5,length:Math.ceil(pe.value/k.value.itemsPerPage)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1},8,["items","loading","items-per-page","page","options","modelValue"])]),_:1})]),_:1}),a($,{modelValue:te.value,"onUpdate:modelValue":e[26]||(e[26]=l=>te.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[80]||(e[80]=[r("إضافة مسجد جديد")])),_:1}),a(I,null,{default:t(()=>[a(h,{onSubmit:X(Ze,["prevent"])},{default:t(()=>[a(Z,null,{default:t(()=>[a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.name,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.name=l),label:"اسم المسجد",variant:"outlined",required:"",rules:[l=>!!l||"اسم المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.fileNumber,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.fileNumber=l),label:"رقم الملف",variant:"outlined",required:"",rules:[l=>!!l||"رقم الملف مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(ee,{modelValue:n.value.regionId,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.regionId=l),label:"المنطقة",variant:"outlined",items:le.value,"item-title":"name","item-value":"id",loading:fe.value,clearable:"","no-data-text":"لا توجد مناطق متاحة",required:"",rules:[l=>!!l||"المنطقة مطلوبة"],"prepend-inner-icon":"mdi-map",placeholder:"اختر المنطقة...","hide-no-data":""},null,8,["modelValue","items","loading","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(ee,{modelValue:n.value.officeId,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.officeId=l),label:"المكتب",variant:"outlined",items:ae.value,"item-title":"name","item-value":"id",loading:ce.value,clearable:"","no-data-text":"لا توجد مكاتب متاحة",required:"",rules:[l=>!!l||"المكتب مطلوب"],"prepend-inner-icon":"mdi-office-building",placeholder:"اختر المكتب...","hide-no-data":""},null,8,["modelValue","items","loading","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.unit,"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.unit=l),label:"الوحدة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.nearestLandmark,"onUpdate:modelValue":e[10]||(e[10]=l=>n.value.nearestLandmark=l),label:"أقرب معلم",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.mapLocation,"onUpdate:modelValue":e[11]||(e[11]=l=>n.value.mapLocation=l),label:"موقع الخريطة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.electricityMeter,"onUpdate:modelValue":e[12]||(e[12]=l=>n.value.electricityMeter=l),label:"عداد الكهرباء",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.alternativeEnergySource,"onUpdate:modelValue":e[13]||(e[13]=l=>n.value.alternativeEnergySource=l),label:"مصدر الطاقة البديل",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.waterSource,"onUpdate:modelValue":e[14]||(e[14]=l=>n.value.waterSource=l),label:"مصدر المياه",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.sanitation,"onUpdate:modelValue":e[15]||(e[15]=l=>n.value.sanitation=l),label:"الصرف الصحي",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.totalLandArea,"onUpdate:modelValue":e[16]||(e[16]=l=>n.value.totalLandArea=l),label:"إجمالي مساحة الأرض",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.totalCoveredArea,"onUpdate:modelValue":e[17]||(e[17]=l=>n.value.totalCoveredArea=l),label:"إجمالي المساحة المغطاة",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.numberOfFloors,"onUpdate:modelValue":e[18]||(e[18]=l=>n.value.numberOfFloors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.openingDate,"onUpdate:modelValue":e[19]||(e[19]=l=>n.value.openingDate=l),label:"تاريخ الافتتاح",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ الافتتاح مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:n.value.constructionDate,"onUpdate:modelValue":e[20]||(e[20]=l=>n.value.constructionDate=l),label:"تاريخ البناء",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ البناء مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:n.value.mosqueDefinition,"onUpdate:modelValue":e[21]||(e[21]=l=>n.value.mosqueDefinition=l),label:"تعريف المسجد",variant:"outlined",items:Re,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تعريف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:n.value.mosqueClassification,"onUpdate:modelValue":e[22]||(e[22]=l=>n.value.mosqueClassification=l),label:"تصنيف المسجد",variant:"outlined",items:We,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تصنيف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:n.value.sourceFunds,"onUpdate:modelValue":e[23]||(e[23]=l=>n.value.sourceFunds=l),label:"مصدر التمويل",variant:"outlined",items:je,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"مصدر التمويل مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(ul,{modelValue:n.value.briefDescription,"onUpdate:modelValue":e[24]||(e[24]=l=>n.value.briefDescription=l),label:"وصف مختصر",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:e[25]||(e[25]=l=>te.value=!1)},{default:t(()=>e[81]||(e[81]=[r(" إلغاء ")])),_:1}),a(D,{color:"primary",variant:"flat",onClick:Ze},{default:t(()=>e[82]||(e[82]=[r(" حفظ ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:oe.value,"onUpdate:modelValue":e[48]||(e[48]=l=>oe.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[83]||(e[83]=[r("تعديل المسجد")])),_:1}),a(I,null,{default:t(()=>[a(h,{onSubmit:X(Je,["prevent"])},{default:t(()=>[a(Z,null,{default:t(()=>[a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.name,"onUpdate:modelValue":e[27]||(e[27]=l=>i.value.name=l),label:"اسم المسجد",variant:"outlined",required:"",rules:[l=>!!l||"اسم المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.fileNumber,"onUpdate:modelValue":e[28]||(e[28]=l=>i.value.fileNumber=l),label:"رقم الملف",variant:"outlined",required:"",rules:[l=>!!l||"رقم الملف مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(ee,{modelValue:i.value.regionId,"onUpdate:modelValue":e[29]||(e[29]=l=>i.value.regionId=l),label:"المنطقة",variant:"outlined",items:le.value,"item-title":"name","item-value":"id",loading:fe.value,clearable:"","no-data-text":"لا توجد مناطق متاحة",required:"",rules:[l=>!!l||"المنطقة مطلوبة"],"prepend-inner-icon":"mdi-map",placeholder:"اختر المنطقة...","hide-no-data":""},null,8,["modelValue","items","loading","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(ee,{modelValue:i.value.officeId,"onUpdate:modelValue":e[30]||(e[30]=l=>i.value.officeId=l),label:"المكتب",variant:"outlined",items:ae.value,"item-title":"name","item-value":"id",loading:ce.value,clearable:"","no-data-text":"لا توجد مكاتب متاحة",required:"",rules:[l=>!!l||"المكتب مطلوب"],"prepend-inner-icon":"mdi-office-building",placeholder:"اختر المكتب...","hide-no-data":""},null,8,["modelValue","items","loading","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.unit,"onUpdate:modelValue":e[31]||(e[31]=l=>i.value.unit=l),label:"الوحدة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.nearestLandmark,"onUpdate:modelValue":e[32]||(e[32]=l=>i.value.nearestLandmark=l),label:"أقرب معلم",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.mapLocation,"onUpdate:modelValue":e[33]||(e[33]=l=>i.value.mapLocation=l),label:"موقع الخريطة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.electricityMeter,"onUpdate:modelValue":e[34]||(e[34]=l=>i.value.electricityMeter=l),label:"عداد الكهرباء",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.alternativeEnergySource,"onUpdate:modelValue":e[35]||(e[35]=l=>i.value.alternativeEnergySource=l),label:"مصدر الطاقة البديل",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.waterSource,"onUpdate:modelValue":e[36]||(e[36]=l=>i.value.waterSource=l),label:"مصدر المياه",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.sanitation,"onUpdate:modelValue":e[37]||(e[37]=l=>i.value.sanitation=l),label:"الصرف الصحي",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.totalLandArea,"onUpdate:modelValue":e[38]||(e[38]=l=>i.value.totalLandArea=l),label:"إجمالي مساحة الأرض",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.totalCoveredArea,"onUpdate:modelValue":e[39]||(e[39]=l=>i.value.totalCoveredArea=l),label:"إجمالي المساحة المغطاة",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.numberOfFloors,"onUpdate:modelValue":e[40]||(e[40]=l=>i.value.numberOfFloors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.openingDate,"onUpdate:modelValue":e[41]||(e[41]=l=>i.value.openingDate=l),label:"تاريخ الافتتاح",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ الافتتاح مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:i.value.constructionDate,"onUpdate:modelValue":e[42]||(e[42]=l=>i.value.constructionDate=l),label:"تاريخ البناء",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ البناء مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:i.value.mosqueDefinition,"onUpdate:modelValue":e[43]||(e[43]=l=>i.value.mosqueDefinition=l),label:"تعريف المسجد",variant:"outlined",items:Re,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تعريف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:i.value.mosqueClassification,"onUpdate:modelValue":e[44]||(e[44]=l=>i.value.mosqueClassification=l),label:"تصنيف المسجد",variant:"outlined",items:We,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تصنيف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:i.value.sourceFunds,"onUpdate:modelValue":e[45]||(e[45]=l=>i.value.sourceFunds=l),label:"مصدر التمويل",variant:"outlined",items:je,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"مصدر التمويل مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(ul,{modelValue:i.value.briefDescription,"onUpdate:modelValue":e[46]||(e[46]=l=>i.value.briefDescription=l),label:"وصف مختصر",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:e[47]||(e[47]=l=>oe.value=!1)},{default:t(()=>e[84]||(e[84]=[r(" إلغاء ")])),_:1}),a(D,{color:"primary",variant:"flat",onClick:Je},{default:t(()=>e[85]||(e[85]=[r(" تحديث ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:W.value,"onUpdate:modelValue":e[50]||(e[50]=l=>W.value=l),"max-width":"400px"},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[86]||(e[86]=[r("تأكيد الحذف")])),_:1}),a(I,null,{default:t(()=>{var l;return[e[87]||(e[87]=r(' هل أنت متأكد من حذف المسجد "')),g("strong",null,b((l=V.value)==null?void 0:l.mosqueName),1),e[88]||(e[88]=r('"؟ ')),e[89]||(e[89]=g("br",null,null,-1)),e[90]||(e[90]=g("span",{class:"text-error"},"لا يمكن التراجع عن هذا الإجراء.",-1))]}),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:e[49]||(e[49]=l=>W.value=!1)},{default:t(()=>e[91]||(e[91]=[r(" إلغاء ")])),_:1}),a(D,{color:"error",variant:"flat",onClick:sl},{default:t(()=>e[92]||(e[92]=[r(" حذف ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:ge.value,"onUpdate:modelValue":e[53]||(e[53]=l=>ge.value=l),"max-width":"1000px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>{var l;return[r(" تفاصيل المبنى - "+b((l=V.value)==null?void 0:l.mosqueName),1)]}),_:1}),a(I,null,{default:t(()=>[a(E,{variant:"outlined"},{default:t(()=>[a(A,{class:"text-h6 d-flex justify-space-between align-center"},{default:t(()=>[e[94]||(e[94]=r(" تفاصيل المبنى الحالية ")),a(D,{color:"primary",variant:"flat",size:"small",onClick:Ye,"prepend-icon":"tabler-plus",disabled:z.value},{default:t(()=>e[93]||(e[93]=[r(" إضافة تفصيل جديد ")])),_:1},8,["disabled"])]),_:1}),a(I,null,{default:t(()=>[a(Z,{class:"mb-4"},{default:t(()=>[a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:De.value,"onUpdate:modelValue":[e[51]||(e[51]=l=>De.value=l),yl],label:"البحث في تفاصيل المبنى",variant:"outlined",density:"compact","prepend-inner-icon":"tabler-search",clearable:"","onClick:clear":bl,placeholder:"ابحث عن اسم المبنى..."},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6",class:"d-flex align-center"},{default:t(()=>[a(_,{color:"info",variant:"tonal",size:"small",class:"me-2"},{default:t(()=>[r(b(N.value.length)+" تفصيل ",1)]),_:1})]),_:1})]),_:1}),a(Oe,{headers:rl,items:N.value,loading:z.value,"items-per-page":10,class:"text-no-wrap","no-data-text":"لا توجد تفاصيل مبنى"},{"no-data":t(()=>[g("div",Hl,[a(C,{icon:"tabler-building-off",size:"48",color:"grey",class:"mb-4"}),e[96]||(e[96]=g("div",{class:"text-h6 text-medium-emphasis mb-2"},"لا توجد تفاصيل مبنى",-1)),e[97]||(e[97]=g("div",{class:"text-body-2 text-medium-emphasis mb-4"}," لم يتم إضافة أي تفاصيل مبنى لهذا المسجد بعد ",-1)),a(D,{color:"primary",variant:"outlined",size:"small",onClick:Ye,"prepend-icon":"tabler-plus"},{default:t(()=>e[95]||(e[95]=[r(" إضافة أول تفصيل ")])),_:1})])]),"item.name":t(({item:l})=>[g("div",Zl,[a(ol,{size:"32",color:"info",variant:"tonal"},{default:t(()=>[r(b(l.name.charAt(0).toUpperCase()),1)]),_:2},1024),g("div",Jl,[g("span",Kl,b(l.name),1),g("small",Xl,b(l.floors)+" طابق",1)])])]),"item.buildingCategory":t(({item:l})=>[a(_,{color:l.buildingCategory==="Facility"?"success":"warning",variant:"tonal",size:"small"},{default:t(()=>[r(b(l.buildingCategory==="Facility"?"منشأة":"وقف"),1)]),_:2},1032,["color"])]),"item.withinMosqueArea":t(({item:l})=>[a(_,{color:l.withinMosqueArea?"success":"error",variant:"tonal",size:"small"},{default:t(()=>[r(b(l.withinMosqueArea?"داخل المسجد":"خارج المسجد"),1)]),_:2},1032,["color"])]),"item.actions":t(({item:l})=>[g("div",Yl,[a(Y,{text:"تعديل تفصيل المبنى",location:"top"},{activator:t(({props:m})=>[a(u,K({onClick:y=>Vl(l),color:"info"},m),{default:t(()=>[a(C,{icon:"tabler-edit"})]),_:2},1040,["onClick"])]),_:2},1024),a(Y,{text:"حذف تفصيل المبنى",location:"top"},{activator:t(({props:m})=>[a(u,K({onClick:y=>gl(l.id),color:"error"},m),{default:t(()=>[a(C,{icon:"tabler-trash"})]),_:2},1040,["onClick"])]),_:2},1024),a(Y,{text:"إدارة المواد",location:"top"},{activator:t(({props:m})=>[a(u,K({onClick:y=>Dl(l),color:"primary"},m),{default:t(()=>[a(C,{icon:"tabler-package"})]),_:2},1040,["onClick"])]),_:2},1024)])]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:e[52]||(e[52]=l=>ge.value=!1)},{default:t(()=>e[98]||(e[98]=[r(" إغلاق ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:ye.value,"onUpdate:modelValue":e[58]||(e[58]=l=>ye.value=l),"max-width":"600px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(C,{icon:"tabler-building-plus",class:"me-2"}),e[99]||(e[99]=r(" إضافة تفصيل مبنى جديد ")),a(U),a(u,{onClick:Ee,size:"small"},{default:t(()=>[a(C,{icon:"tabler-x"})]),_:1})]),_:1}),V.value?(L(),H(ze,{key:0,class:"text-medium-emphasis"},{default:t(()=>[r(" للمسجد: "+b(V.value.mosqueName),1)]),_:1})):Se("",!0),a(I,null,{default:t(()=>[a(h,{onSubmit:X(Xe,["prevent"]),ref_key:"addBuildingDetailForm",ref:Fe},{default:t(()=>[a(Z,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(f,{modelValue:S.value.name,"onUpdate:modelValue":e[54]||(e[54]=l=>S.value.name=l),label:"اسم المبنى",variant:"outlined",required:"",rules:[l=>!!l||"اسم المبنى مطلوب"],placeholder:"مثال: منزل الإمام، المصلى، دورة المياه...","prepend-inner-icon":"tabler-building",clearable:""},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:S.value.floors,"onUpdate:modelValue":e[55]||(e[55]=l=>S.value.floors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1",max:"50",required:"",rules:[l=>!!l||"عدد الطوابق مطلوب",l=>l>0||"عدد الطوابق يجب أن يكون أكبر من صفر"],"prepend-inner-icon":"tabler-layers"},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:S.value.buildingCategory,"onUpdate:modelValue":e[56]||(e[56]=l=>S.value.buildingCategory=l),label:"نوع المبنى",variant:"outlined",items:Qe,"item-title":"label","item-value":"value",required:"",rules:[l=>!!l||"نوع المبنى مطلوب"],"prepend-inner-icon":"tabler-category"},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(il,{modelValue:S.value.withinMosqueArea,"onUpdate:modelValue":e[57]||(e[57]=l=>S.value.withinMosqueArea=l),label:"داخل مساحة المسجد","hide-details":"",color:"primary",class:"mt-2"},null,8,["modelValue"]),a(I,{class:"text-caption text-medium-emphasis pa-0 mt-1"},{default:t(()=>[a(C,{icon:"tabler-info-circle",size:"small",class:"me-1"}),e[100]||(e[100]=r(" إذا كان المبنى داخل حدود المسجد أم خارجه "))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:Ee},{default:t(()=>e[101]||(e[101]=[r(" إلغاء ")])),_:1}),a(D,{color:"primary",variant:"flat",onClick:Xe,loading:z.value,"prepend-icon":"tabler-plus"},{default:t(()=>e[102]||(e[102]=[r(" إضافة ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:be.value,"onUpdate:modelValue":e[63]||(e[63]=l=>be.value=l),"max-width":"600px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(C,{icon:"tabler-building-edit",class:"me-2"}),e[103]||(e[103]=r(" تعديل تفصيل المبنى ")),a(U),a(u,{onClick:Le,size:"small"},{default:t(()=>[a(C,{icon:"tabler-x"})]),_:1})]),_:1}),V.value?(L(),H(ze,{key:0,class:"text-medium-emphasis"},{default:t(()=>[r(" للمسجد: "+b(V.value.mosqueName),1)]),_:1})):Se("",!0),a(I,null,{default:t(()=>[a(h,{onSubmit:X(_e,["prevent"]),ref_key:"editBuildingDetailForm",ref:Ae},{default:t(()=>[a(Z,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(f,{modelValue:q.value.name,"onUpdate:modelValue":e[59]||(e[59]=l=>q.value.name=l),label:"اسم المبنى",variant:"outlined",required:"",rules:[l=>!!l||"اسم المبنى مطلوب"],placeholder:"مثال: منزل الإمام، المصلى، دورة المياه...","prepend-inner-icon":"tabler-building",clearable:""},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:q.value.floors,"onUpdate:modelValue":e[60]||(e[60]=l=>q.value.floors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1",max:"50",required:"",rules:[l=>!!l||"عدد الطوابق مطلوب",l=>l>0||"عدد الطوابق يجب أن يكون أكبر من صفر"],"prepend-inner-icon":"tabler-layers"},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:q.value.buildingCategory,"onUpdate:modelValue":e[61]||(e[61]=l=>q.value.buildingCategory=l),label:"نوع المبنى",variant:"outlined",items:Qe,"item-title":"label","item-value":"value",required:"",rules:[l=>!!l||"نوع المبنى مطلوب"],"prepend-inner-icon":"tabler-category"},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(il,{modelValue:q.value.withinMosqueArea,"onUpdate:modelValue":e[62]||(e[62]=l=>q.value.withinMosqueArea=l),label:"داخل مساحة المسجد","hide-details":"",color:"primary",class:"mt-2"},null,8,["modelValue"]),a(I,{class:"text-caption text-medium-emphasis pa-0 mt-1"},{default:t(()=>[a(C,{icon:"tabler-info-circle",size:"small",class:"me-1"}),e[104]||(e[104]=r(" إذا كان المبنى داخل حدود المسجد أم خارجه "))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:Le},{default:t(()=>e[105]||(e[105]=[r(" إلغاء ")])),_:1}),a(D,{color:"primary",variant:"flat",onClick:_e,loading:z.value,"prepend-icon":"tabler-check"},{default:t(()=>e[106]||(e[106]=[r(" تحديث ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:ue.value,"onUpdate:modelValue":e[68]||(e[68]=l=>ue.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(C,{icon:"tabler-package",class:"me-2"}),e[107]||(e[107]=r(" إدارة المواد المرتبطة بالمبنى ")),a(U),a(u,{onClick:e[64]||(e[64]=l=>ue.value=!1),size:"small"},{default:t(()=>[a(C,{icon:"tabler-x"})]),_:1})]),_:1}),ie.value?(L(),H(ze,{key:0,class:"text-medium-emphasis"},{default:t(()=>[r(" للمبنى: "+b(ie.value.name),1)]),_:1})):Se("",!0),a(I,null,{default:t(()=>[a(Ue,{modelValue:v.value,"onUpdate:modelValue":e[65]||(e[65]=l=>v.value=l),type:p.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[r(b(c.value),1)]),_:1},8,["modelValue","type"]),g("div",_l,[a(C,{icon:"tabler-package",size:"48",class:"mb-2"}),e[108]||(e[108]=g("div",null,"هنا سيتم عرض وإدارة المواد (Products) المرتبطة بهذا المبنى.",-1))]),g("div",hl,[a(D,{color:"primary",onClick:wl,"prepend-icon":"tabler-plus"},{default:t(()=>e[109]||(e[109]=[r("إضافة مادة جديدة")])),_:1})]),a(f,{modelValue:qe.value,"onUpdate:modelValue":e[66]||(e[66]=l=>qe.value=l),label:"بحث في المواد...","prepend-inner-icon":"tabler-search",clearable:"",class:"mb-2"},null,8,["modelValue"]),a(Oe,{headers:[{title:"اسم المادة",key:"productName",sortable:!0},{title:"الكمية",key:"quantity",sortable:!0},{title:"الإجراءات",key:"actions",sortable:!1,width:"80px"}],items:Ul.value,loading:Pe.value,"items-per-page":10,class:"text-no-wrap","no-data-text":"لا توجد مواد مرتبطة بهذا المبنى"},{"item.productName":t(({item:l})=>{var m;return[g("span",null,b(l.productName||((m=l.product)==null?void 0:m.name)||"---"),1)]}),"item.quantity":t(({item:l})=>[g("span",null,b(l.quantity??l.Quantity??0),1)]),"item.actions":t(({item:l})=>[g("div",ea,[a(Y,{text:"تعديل المادة",location:"top"},{activator:t(({props:m})=>[a(u,K({onClick:y=>Il(l),color:"info"},m),{default:t(()=>[a(C,{icon:"tabler-edit"})]),_:2},1040,["onClick"])]),_:2},1024),a(Y,{text:"حذف المادة",location:"top"},{activator:t(({props:m})=>[a(u,K({onClick:y=>Cl(l),color:"error"},m),{default:t(()=>[a(C,{icon:"tabler-trash"})]),_:2},1040,["onClick"])]),_:2},1024)])]),_:1},8,["items","loading"])]),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:e[67]||(e[67]=l=>ue.value=!1)},{default:t(()=>e[110]||(e[110]=[r(" إغلاق ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:ne.value,"onUpdate:modelValue":e[72]||(e[72]=l=>ne.value=l),"max-width":"500px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[111]||(e[111]=[r("إضافة مادة جديدة")])),_:1}),a(I,null,{default:t(()=>[a(Ue,{modelValue:v.value,"onUpdate:modelValue":e[69]||(e[69]=l=>v.value=l),type:p.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[r(b(c.value),1)]),_:1},8,["modelValue","type"]),a(h,{onSubmit:X(el,["prevent"])},{default:t(()=>[a(ee,{modelValue:G.value.productId,"onUpdate:modelValue":e[70]||(e[70]=l=>G.value.productId=l),items:re.value,"item-title":"value","item-value":"key",label:"اختر المادة",loading:Ce.value,required:"",clearable:"","no-data-text":"لا توجد مواد متاحة",placeholder:"اختر المادة..."},null,8,["modelValue","items","loading"]),a(f,{modelValue:G.value.quantity,"onUpdate:modelValue":e[71]||(e[71]=l=>G.value.quantity=l),label:"الكمية",type:"number",min:"1",required:""},null,8,["modelValue"])]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:xl},{default:t(()=>e[112]||(e[112]=[r("إلغاء")])),_:1}),a(D,{color:"primary",variant:"flat",onClick:el,loading:Be.value},{default:t(()=>e[113]||(e[113]=[r("حفظ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:se.value,"onUpdate:modelValue":e[73]||(e[73]=l=>se.value=l),"max-width":"400px"},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[114]||(e[114]=[r("تأكيد حذف المادة")])),_:1}),a(I,null,{default:t(()=>e[115]||(e[115]=[r(" هل أنت متأكد من حذف المادة؟ "),g("br",null,null,-1),g("span",{class:"text-error"},"لا يمكن التراجع عن هذا الإجراء.",-1)])),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:ql},{default:t(()=>e[116]||(e[116]=[r("إلغاء")])),_:1}),a(D,{color:"error",variant:"flat",onClick:kl,loading:$e.value},{default:t(()=>e[117]||(e[117]=[r("حذف")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:me.value,"onUpdate:modelValue":e[77]||(e[77]=l=>me.value=l),"max-width":"500px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[118]||(e[118]=[r("تعديل المادة")])),_:1}),a(I,null,{default:t(()=>[a(Ue,{modelValue:v.value,"onUpdate:modelValue":e[74]||(e[74]=l=>v.value=l),type:p.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[r(b(c.value),1)]),_:1},8,["modelValue","type"]),a(h,{onSubmit:X(ll,["prevent"])},{default:t(()=>[a(Z,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(ee,{modelValue:P.value.productId,"onUpdate:modelValue":e[75]||(e[75]=l=>P.value.productId=l),items:re.value,"item-title":"value","item-value":"key",label:"المادة",loading:Ce.value,rules:[l=>!!l||"المادة مطلوبة"],required:"",clearable:"","no-data-text":"لا توجد مواد متاحة",placeholder:"اختر المادة..."},null,8,["modelValue","items","loading","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(f,{modelValue:P.value.quantity,"onUpdate:modelValue":e[76]||(e[76]=l=>P.value.quantity=l),label:"الكمية",type:"number",min:"1",rules:[l=>!!l||"الكمية مطلوبة",l=>l>0||"الكمية يجب أن تكون أكبر من صفر"],required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(D,{color:"grey-darken-1",variant:"text",onClick:Sl},{default:t(()=>e[119]||(e[119]=[r("إلغاء")])),_:1}),a(D,{color:"primary",loading:Te.value,onClick:ll},{default:t(()=>e[120]||(e[120]=[r("حفظ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Za=Pl(la,[["__scopeId","data-v-2a030941"]]);export{Za as default};
