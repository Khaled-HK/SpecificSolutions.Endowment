import{f as Me}from"./formatters-Dx_aSyzi.js";import{r as k,a as ie,f as D,o as v,e as t,b as e,d as s,aR as O,m as l,b8 as ce,c as E,l as X,ac as Q,t as y,V as u,w as xe,R as q,F as T,h as N,q as fe,v as $,i as ge,J,K,aX as H,x as ee,b9 as Le,I as Te}from"./index-cIqzrMkS.js";import{C as me}from"./vue3-perfect-scrollbar-WkZsiQ7b.js";import{_ as ye}from"./TiptapEditor-DR_slnHF.js";import{a as De,V as Y}from"./VCard-mXNxFMdI.js";import{V as W}from"./VSpacer-PqnIGwGI.js";import{V as G}from"./VTextField-DlTzurGK.js";import{V as F}from"./VDivider-1gw0wcTo.js";import{V as he}from"./VChip-BE4ru2Ew.js";import{$ as ve}from"./api-D-c53Tc_.js";import{V as U}from"./VTooltip-9uyvWx8H.js";import{V as te}from"./VMenu-BMQBYVdh.js";import{V as ae,a as le,b as se}from"./VList-BOdGZVWU.js";import{V as _e}from"./VBadge-B5LuqNPe.js";import{V as $e}from"./VAvatar-Bp3FLP75.js";import{V as re}from"./VImg-DkpkogCP.js";import{V as Z}from"./VCardText-BUPbPQ1f.js";import{V as ke}from"./VNavigationDrawer-CMEWhdL5.js";import{u as Re,V as Ae,a as Ie}from"./VMain-NV_XBQSX.js";import{u as Ue}from"./useApi-3B80Mvsy.js";import{c as Be}from"./createUrl-C6P1bEPM.js";import{V as be}from"./VCheckbox-CLfaaJQc.js";import"./helpers-DK5QwNv0.js";import"./index-CUnPjerW.js";import"./index-B_y52XJR.js";/* empty css              *//* empty css                   */import"./VCounter-DpNzWq_6.js";import"./VField-CHfMs9VT.js";import"./form-Zh_ocXvY.js";import"./easing-CjukEv2V.js";import"./VInput-1wUPUQMA.js";import"./forwardRefs-C-GTDzx5.js";import"./VSlideGroup-DKm1jYl3.js";import"./index-9rIf2CJL.js";import"./VOverlay-DA3XLI8v.js";import"./delay-HHfTomaj.js";import"./lazy-C8VjpmmW.js";import"./scopeId-DPq-moi5.js";import"./dialog-transition-Ds0gceS5.js";import"./ssrBoot-Bz6XOQBK.js";import"./VCheckboxBtn-BHdZCGD5.js";import"./VSelectionControl-Bd6infwv.js";const Ne={class:"d-flex align-center"},Fe={class:"d-flex align-center gap-x-2"},Pe={class:"px-1 pe-6 py-1"},Oe={class:"cursor-pointer"},je={key:0},qe={class:"px-1 pe-6 py-1"},He={key:0},Je={class:"px-1 pe-6 py-1"},Ke={class:"px-1 pe-6 py-1"},We={class:"d-flex align-center px-6 py-4"},Xe={__name:"ComposeDialog",emits:["close"],setup(z,{emit:R}){const d=k(""),C=k(""),h=k(""),M=k(""),V=k(""),B=k(""),c=k(!1),b=k(!1),x=()=>{C.value=h.value=M.value=""};return(A,i)=>{const S=ie("IconBtn"),g=ye;return v(),D(Y,{class:"email-compose-dialog",elevation:"10","max-width":"30vw"},{default:t(()=>[e(De,{class:"py-3 px-6"},{default:t(()=>[s("div",Ne,[i[11]||(i[11]=s("h5",{class:"text-h5"}," Compose Mail ",-1)),e(W),s("div",Fe,[e(S,{size:"small",icon:"tabler-minus",onClick:i[0]||(i[0]=r=>A.$emit("close"))}),e(S,{size:"small",icon:"tabler-x",onClick:i[1]||(i[1]=r=>{A.$emit("close"),x(),c.value=!1,b.value=!1})})])])]),_:1}),s("div",Pe,[e(G,{modelValue:l(C),"onUpdate:modelValue":i[4]||(i[4]=r=>O(C)?C.value=r:null),density:"compact"},{"prepend-inner":t(()=>i[12]||(i[12]=[s("div",{class:"text-base font-weight-medium text-disabled"}," To: ",-1)])),append:t(()=>[s("span",Oe,[s("span",{onClick:i[2]||(i[2]=r=>c.value=!l(c))},"Cc"),i[13]||(i[13]=s("span",null," | ",-1)),s("span",{onClick:i[3]||(i[3]=r=>b.value=!l(b))},"Bcc")])]),_:1},8,["modelValue"])]),e(ce,null,{default:t(()=>[l(c)?(v(),E("div",je,[e(F),s("div",qe,[e(G,{modelValue:l(V),"onUpdate:modelValue":i[5]||(i[5]=r=>O(V)?V.value=r:null),density:"compact"},{"prepend-inner":t(()=>i[14]||(i[14]=[s("div",{class:"text-disabled font-weight-medium"}," Cc: ",-1)])),_:1},8,["modelValue"])])])):X("",!0)]),_:1}),e(ce,null,{default:t(()=>[l(b)?(v(),E("div",He,[e(F),s("div",Je,[e(G,{modelValue:l(B),"onUpdate:modelValue":i[6]||(i[6]=r=>O(B)?B.value=r:null),density:"compact"},{"prepend-inner":t(()=>i[15]||(i[15]=[s("div",{class:"text-disabled font-weight-medium"}," Bcc: ",-1)])),_:1},8,["modelValue"])])])):X("",!0)]),_:1}),e(F),s("div",Ke,[e(G,{modelValue:l(h),"onUpdate:modelValue":i[7]||(i[7]=r=>O(h)?h.value=r:null),density:"compact"},{"prepend-inner":t(()=>i[16]||(i[16]=[s("div",{class:"text-base font-weight-medium text-disabled"}," Subject: ",-1)])),_:1},8,["modelValue"])]),e(F),e(g,{modelValue:l(d),"onUpdate:modelValue":i[8]||(i[8]=r=>O(d)?d.value=r:null),placeholder:"Message"},null,8,["modelValue"]),s("div",We,[e(Q,{color:"primary",class:"me-4","append-icon":"tabler-send",disabled:l(C)==="",onClick:i[9]||(i[9]=r=>{A.$emit("close"),d.value="",x(),c.value=!1,b.value=!1})},{default:t(()=>i[17]||(i[17]=[y(" send ")])),_:1},8,["disabled"]),e(S,{size:"small"},{default:t(()=>[e(u,{icon:"tabler-paperclip"})]),_:1}),e(W),e(S,{size:"small",class:"me-2"},{default:t(()=>[e(u,{icon:"tabler-dots-vertical"})]),_:1}),e(S,{size:"small",onClick:i[10]||(i[10]=r=>{A.$emit("close"),x(),d.value="",c.value=!1,b.value=!1})},{default:t(()=>[e(u,{icon:"tabler-trash"})]),_:1})])]),_:1})}}},Ge={class:"d-flex flex-column h-100"},Qe={class:"px-6 pb-5 pt-6"},Ye={class:"email-filters py-4"},Ze=["href","onClick"],et={class:"text-base"},tt={class:"email-labels py-4"},at=["href","onClick"],lt={class:"text-body-1 text-high-emphasis"},st=Object.assign({inheritAttrs:!1},{__name:"EmailLeftSidebarContent",props:{emailsMeta:{type:Object,required:!0}},emits:["toggleComposeDialogVisibility"],setup(z,{emit:R}){const d=z,C=k(0),h=k(0),M=k(0),V=k(0);xe(()=>d.emailsMeta,b=>{b&&(C.value=b.inbox,h.value=b.draft,M.value=b.spam,V.value=b.star)},{immediate:!0,deep:!0});const B=q(()=>[{title:"Inbox",prependIcon:"tabler-mail",to:{name:"apps-email"},badge:{content:C.value,color:"primary"}},{title:"Sent",prependIcon:"tabler-send",to:{name:"apps-email-filter",params:{filter:"sent"}}},{title:"Draft",prependIcon:"tabler-edit",to:{name:"apps-email-filter",params:{filter:"draft"}},badge:{content:h.value,color:"warning"}},{title:"Starred",prependIcon:"tabler-star",to:{name:"apps-email-filter",params:{filter:"starred"}},badge:{content:V.value,color:"success"}},{title:"Spam",prependIcon:"tabler-alert-circle",to:{name:"apps-email-filter",params:{filter:"spam"}},badge:{content:M.value,color:"error"}},{title:"Trash",prependIcon:"tabler-trash",to:{name:"apps-email-filter",params:{filter:"trashed"}}}]),c=[{title:"Personal",color:"success",to:{name:"apps-email-label",params:{label:"personal"}}},{title:"Company",color:"primary",to:{name:"apps-email-label",params:{label:"company"}}},{title:"Important",color:"warning",to:{name:"apps-email-label",params:{label:"important"}}},{title:"Private",color:"error",to:{name:"apps-email-label",params:{label:"private"}}}];return(b,x)=>{const A=ie("RouterLink");return v(),E("div",Ge,[s("div",Qe,[e(Q,{block:"",onClick:x[0]||(x[0]=i=>b.$emit("toggleComposeDialogVisibility"))},{default:t(()=>x[1]||(x[1]=[y(" Compose ")])),_:1})]),e(l(me),{options:{wheelPropagation:!1},class:"h-100"},{default:t(()=>[s("ul",Ye,[(v(!0),E(T,null,N(l(B),i=>(v(),D(A,{key:i.title,class:"d-flex align-center cursor-pointer align-center",to:i.to,custom:""},{default:t(({isActive:S,href:g,navigate:r})=>{var n;return[s("li",fe({ref_for:!0},b.$attrs,{href:g,class:[S&&"email-filter-active text-primary","d-flex align-center cursor-pointer"],onClick:r}),[e(u,{icon:i.prependIcon,class:"me-2",size:"20"},null,8,["icon"]),s("div",et,$(i.title),1),e(W),(n=i.badge)!=null&&n.content?(v(),D(he,{key:0,color:i.badge.color,label:"",size:"small",class:"rounded-xl px-3"},{default:t(()=>{var f;return[y($((f=i.badge)==null?void 0:f.content),1)]}),_:2},1032,["color"])):X("",!0)],16,Ze)]}),_:2},1032,["to"]))),128))]),s("ul",tt,[x[2]||(x[2]=s("div",{class:"text-caption text-disabled mb-4 px-6"}," LABELS ",-1)),(v(),E(T,null,N(c,i=>e(A,{key:i.title,class:"d-flex align-center",to:i.to,custom:""},{default:t(({isActive:S,href:g,navigate:r})=>[s("li",fe({ref_for:!0},b.$attrs,{href:g,class:[S&&"email-label-active text-primary","cursor-pointer d-flex align-center"],onClick:r}),[e(u,{icon:"tabler-circle-filled",color:i.color,class:"me-2",size:"12"},null,8,["color"]),s("div",lt,$(i.title),1)],16,at)]),_:2},1032,["to"])),64))])]),_:1})])}}}),de=()=>{const z=ge(),R=async(c,b)=>{await ve("apps/email",{method:"POST",body:JSON.stringify({ids:c,data:b})})};return{labels:[{title:"personal",color:"success"},{title:"company",color:"primary"},{title:"important",color:"warning"},{title:"private",color:"error"}],resolveLabelColor:c=>c==="personal"?"success":c==="company"?"primary":c==="important"?"warning":c==="private"?"error":"secondary",shallShowMoveToActionFor:c=>c==="trash"?z.params.filter!=="trashed":c==="inbox"?!(z.params.filter===void 0||z.params.filter==="sent"||z.params.filter==="draft"):c==="spam"?!(z.params.filter==="spam"||z.params.filter==="sent"||z.params.filter==="draft"):!1,emailMoveToFolderActions:[{action:"inbox",icon:"tabler-mail"},{action:"spam",icon:"tabler-alert-octagon"},{action:"trash",icon:"tabler-trash"}],moveSelectedEmailTo:async(c,b)=>{const x={};c==="inbox"?(z.params.filter==="trashed"&&(x.isDeleted=!1),x.folder="inbox"):c==="spam"?(z.params.filter==="trashed"&&(x.isDeleted=!1),x.folder="spam"):c==="trash"&&(x.isDeleted=!0),await R(b,x)},updateEmails:R,updateEmailLabels:async(c,b)=>{await ve("/apps/email",{method:"POST",body:{ids:c,label:b}})}}},it={class:"email-view-header d-flex align-center px-5 py-3"},ot={class:"d-flex align-center flex-wrap flex-grow-1 overflow-hidden gap-2"},nt={class:"text-body-1 text-high-emphasis text-truncate"},rt={class:"d-flex flex-wrap gap-2"},dt={class:"d-flex align-center"},mt={class:"email-view-action-bar d-flex align-center text-medium-emphasis px-6 gap-x-1"},ut={class:"d-flex align-center gap-x-1"},pt={class:"d-flex align-start align-sm-center pa-6 gap-x-4"},ct={class:"d-flex flex-wrap flex-grow-1 overflow-hidden"},ft={class:"text-truncate"},vt={class:"text-body-1 text-high-emphasis text-truncate"},bt={class:"text-sm"},xt={class:"d-flex align-center gap-x-4"},gt={class:"text-disabled text-base"},yt={class:"text-body-1 font-weight-medium text-truncate mb-4"},ht=["innerHTML"],_t={class:"text-base"},$t={class:"text-h6 mb-6"},kt={class:"d-flex justify-end gap-4 pt-2 flex-wrap"},Ct={__name:"EmailView",props:{email:{type:null,required:!0},emailMeta:{type:Object,required:!0}},emits:["refresh","navigated","close","trash","unread","read","star","unstar"],setup(z,{emit:R}){const d=z,C=R,h=k(""),M=k(!1),V=k(!0),{updateEmailLabels:B}=de(),{labels:c,resolveLabelColor:b,emailMoveToFolderActions:x,shallShowMoveToActionFor:A,moveSelectedEmailTo:i}=de(),S=async r=>{await i(r,[d.email.id]),C("refresh"),C("close")},g=async r=>{await B([d.email.id],r),C("refresh")};return(r,n)=>{const f=ie("IconBtn"),oe=ye;return v(),D(ke,{"data-allow-mismatch":"",temporary:"","model-value":!!d.email,location:"right",scrim:!1,floating:"",class:"email-view"},{default:t(()=>[d.email?(v(),E(T,{key:0},[s("div",it,[e(f,{class:"me-2",onClick:n[0]||(n[0]=p=>{r.$emit("close"),M.value=!1,V.value=!0,h.value=""})},{default:t(()=>[e(u,{size:"22",icon:"tabler-chevron-left",class:"flip-in-rtl"})]),_:1}),s("div",ot,[s("div",nt,$(d.email.subject),1),s("div",rt,[(v(!0),E(T,null,N(d.email.labels,p=>(v(),D(he,{key:p,color:l(b)(p),class:"text-capitalize flex-shrink-0",size:"small",label:!1},{default:t(()=>[y($(p),1)]),_:2},1032,["color"]))),128))])]),s("div",null,[s("div",dt,[e(f,{disabled:!d.emailMeta.hasPreviousEmail,onClick:n[1]||(n[1]=p=>r.$emit("navigated","previous"))},{default:t(()=>[e(u,{icon:"tabler-chevron-left",class:"flip-in-rtl"})]),_:1},8,["disabled"]),e(f,{disabled:!d.emailMeta.hasNextEmail,onClick:n[2]||(n[2]=p=>r.$emit("navigated","next"))},{default:t(()=>[e(u,{icon:"tabler-chevron-right",class:"flip-in-rtl"})]),_:1},8,["disabled"])])])]),e(F),s("div",mt,[J(e(f,{onClick:n[3]||(n[3]=p=>{r.$emit("trash"),r.$emit("close")})},{default:t(()=>[e(u,{icon:"tabler-trash",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>n[9]||(n[9]=[y(" Delete Mail ")])),_:1})]),_:1},512),[[K,!d.email.isDeleted]]),e(f,{onClick:n[4]||(n[4]=H(p=>{r.$emit("unread"),r.$emit("close")},["stop"]))},{default:t(()=>[e(u,{icon:"tabler-mail",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>n[10]||(n[10]=[y(" Mark as Unread ")])),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,{icon:"tabler-folder",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>n[11]||(n[11]=[y(" Move to ")])),_:1}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(v(!0),E(T,null,N(l(x),p=>(v(),D(le,{key:p.title,class:ee([l(A)(p.action)?"d-flex":"d-none","align-center"]),href:"#",onClick:I=>S(p.action)},{prepend:t(()=>[e(u,{icon:p.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(se,{class:"text-capitalize"},{default:t(()=>[y($(p.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,{icon:"tabler-tag",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>n[12]||(n[12]=[y(" Label ")])),_:1}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(v(!0),E(T,null,N(l(c),p=>(v(),D(le,{key:p.title,href:"#",onClick:H(I=>g(p.title),["stop"])},{prepend:t(()=>[e(_e,{inline:"",color:l(b)(p.title),dot:""},null,8,["color"])]),default:t(()=>[e(se,{class:"ms-2 text-capitalize"},{default:t(()=>[y($(p.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(W),s("div",ut,[e(f,{color:d.email.isStarred?"warning":"default",onClick:n[5]||(n[5]=p=>{var I;(I=d.email)!=null&&I.isStarred?r.$emit("unstar"):r.$emit("star"),r.$emit("refresh")})},{default:t(()=>[e(u,{icon:"tabler-star"})]),_:1},8,["color"]),e(f,null,{default:t(()=>[e(u,{icon:"tabler-dots-vertical"})]),_:1})])]),e(F),e(l(me),{tag:"div",class:"mail-content-container flex-grow-1 pa-sm-12 pa-6",options:{wheelPropagation:!1}},{default:t(()=>[e(Y,{class:"mb-4"},{default:t(()=>[s("div",pt,[e($e,{size:"38"},{default:t(()=>[e(re,{src:d.email.from.avatar,alt:d.email.from.name},null,8,["src","alt"])]),_:1}),s("div",ct,[s("div",ft,[s("div",vt,$(d.email.from.name),1),s("div",bt,$(d.email.from.email),1)]),e(W),s("div",xt,[s("div",gt,$(new Date(d.email.time).toDateString()),1),s("div",null,[J(e(f,null,{default:t(()=>[e(u,{icon:"tabler-paperclip",size:"22"})]),_:1},512),[[K,d.email.attachments.length]]),e(f,null,{default:t(()=>[e(u,{icon:"tabler-dots-vertical",size:"22"})]),_:1})])])])]),e(F),e(Z,null,{default:t(()=>[s("div",yt,$(d.email.from.name)+", ",1),s("div",{class:"text-base",innerHTML:d.email.message},null,8,ht)]),_:1}),d.email.attachments.length?(v(),E(T,{key:0},[e(F),e(Z,{class:"d-flex flex-column gap-y-4 pt-4"},{default:t(()=>[n[13]||(n[13]=s("span",null,"2 Attachments",-1)),(v(!0),E(T,null,N(d.email.attachments,p=>(v(),E("div",{key:p.fileName,class:"d-flex align-center"},[e(re,{src:p.thumbnail,alt:p.fileName,"aspect-ratio":"1","max-height":"24","max-width":"24",class:"me-2"},null,8,["src","alt"]),s("span",null,$(p.fileName),1)]))),128))]),_:1})],64)):X("",!0)]),_:1}),J(e(Y,null,{default:t(()=>[e(Z,{class:"font-weight-medium text-high-emphasis"},{default:t(()=>[s("div",_t,[n[14]||(n[14]=y(" Click here to ")),s("span",{class:"text-primary cursor-pointer",onClick:n[6]||(n[6]=p=>{M.value=!l(M),V.value=!l(V)})}," Reply "),n[15]||(n[15]=y(" or ")),n[16]||(n[16]=s("span",{class:"text-primary cursor-pointer"}," Forward ",-1))])]),_:1})]),_:1},512),[[K,l(V)]]),l(M)?(v(),D(Y,{key:0},{default:t(()=>[e(Z,null,{default:t(()=>{var p;return[s("h6",$t," Reply to "+$((p=z.email)==null?void 0:p.from.name),1),e(oe,{modelValue:l(h),"onUpdate:modelValue":n[7]||(n[7]=I=>O(h)?h.value=I:null),placeholder:"Write your message..."},null,8,["modelValue"]),s("div",kt,[e(Q,{icon:"",variant:"text",color:"secondary",onClick:n[8]||(n[8]=I=>{M.value=!l(M),V.value=!l(V),h.value=""})},{default:t(()=>[e(u,{icon:"tabler-trash"})]),_:1}),e(Q,{variant:"text",color:"secondary"},{prepend:t(()=>[e(u,{icon:"tabler-paperclip",class:"text-high-emphasis",size:"16"})]),default:t(()=>[n[17]||(n[17]=y(" Attachments "))]),_:1}),e(Q,{"append-icon":"tabler-send"},{default:t(()=>n[18]||(n[18]=[y(" Send ")])),_:1})])]}),_:1})]),_:1})):X("",!0)]),_:1})],64)):X("",!0)]),_:1},8,["model-value"])}}},Vt={class:"d-flex align-center"},wt={class:"py-2 px-4 d-flex align-center d-flex gap-x-1"},Et=["onClick"],zt={class:"text-h6"},St={class:"text-body-2 truncate"},Mt={class:"text-sm text-disabled"},Lt={class:"email-actions d-none"},Tt={class:"py-4 px-5 text-center"},$a={__name:"index",async setup(z){let R,d;const{isLeftSidebarOpen:C}=Re(),h=ge(),{labels:M,resolveLabelColor:V,emailMoveToFolderActions:B,shallShowMoveToActionFor:c,moveSelectedEmailTo:b,updateEmails:x,updateEmailLabels:A}=de(),i=k(!1),S=k(""),g=k([]),{data:r,execute:n}=([R,d]=Le(()=>Ue(Be("/apps/email",{query:{q:S,filter:()=>"filter"in h.params?h.params.filter:void 0,label:()=>"label"in h.params?h.params.label:void 0}}))),R=await R,d(),R),f=q(()=>r.value.emails),oe=q(()=>r.value.emailsMeta),p=m=>{const a=g.value.indexOf(m);a===-1?g.value.push(m):g.value.splice(a,1)},I=q(()=>f.value.length&&f.value.length===g.value.length),ue=q(()=>!!g.value.length&&f.value.length!==g.value.length),ne=q(()=>g.value.every(m=>{var a;return(a=f.value.find(w=>w.id===m))==null?void 0:a.isRead})),Ce=()=>{g.value=I.value?[]:f.value.map(m=>m.id)},_=k(null),Ve=q(()=>{const m={hasNextEmail:!1,hasPreviousEmail:!1};if(_.value){const a=f.value.findIndex(w=>{var o;return w.id===((o=_.value)==null?void 0:o.id)});m.hasNextEmail=!!f.value[a+1],m.hasPreviousEmail=!!f.value[a-1]}return m}),pe=async()=>{await n(),_.value&&(_.value=f.value.find(m=>{var a;return m.id===((a=_.value)==null?void 0:a.id)}))},L=async(m,a=g.value)=>{g.value=[],g.value=[],a.length&&(m==="trash"?await x(a,{isDeleted:!0}):m==="spam"?await x(a,{folder:"spam"}):m==="unread"?await x(a,{isRead:!1}):m==="read"?await x(a,{isRead:!0}):m==="star"?await x(a,{isStarred:!0}):m==="unstar"&&await x(a,{isStarred:!1}),_.value?pe():await n())},we=async m=>{await b(m,g.value),await n()},Ee=async m=>{await A(g.value,m),await n()},ze=m=>{if(!_.value)return;const a=f.value.findIndex(o=>{var j;return o.id===((j=_.value)==null?void 0:j.id)}),w=m==="previous"?a-1:a+1;_.value=f.value[w]},Se=async m=>{_.value=m,await L("read",[m.id])};return xe(()=>h.params,()=>{g.value=[]},{deep:!0}),(m,a)=>{const w=ie("IconBtn");return v(),D(Ae,{style:{"z-index":"0","min-block-size":"100%"},class:"email-app-layout"},{default:t(()=>[e(ke,{modelValue:l(C),"onUpdate:modelValue":a[1]||(a[1]=o=>O(C)?C.value=o:null),"data-allow-mismatch":"",absolute:"",touchless:"",location:"start",temporary:m.$vuetify.display.mdAndDown},{default:t(()=>[e(st,{"emails-meta":l(oe),onToggleComposeDialogVisibility:a[0]||(a[0]=o=>i.value=!l(i))},null,8,["emails-meta"])]),_:1},8,["modelValue","temporary"]),e(Ct,{email:l(_),"email-meta":l(Ve),onRefresh:pe,onNavigated:ze,onClose:a[2]||(a[2]=o=>_.value=null),onTrash:a[3]||(a[3]=o=>L("trash",l(_)?[l(_).id]:[])),onUnread:a[4]||(a[4]=o=>L("unread",l(_)?[l(_).id]:[])),onStar:a[5]||(a[5]=o=>L("star",l(_)?[l(_).id]:[])),onUnstar:a[6]||(a[6]=o=>L("unstar",l(_)?[l(_).id]:[]))},null,8,["email","email-meta"]),e(Ie,null,{default:t(()=>[e(Y,{flat:"",class:"email-content-list h-100 d-flex flex-column"},{default:t(()=>[s("div",Vt,[e(w,{class:"d-lg-none ms-3",onClick:a[7]||(a[7]=o=>C.value=!0)},{default:t(()=>[e(u,{icon:"tabler-menu-2"})]),_:1}),e(G,{modelValue:l(S),"onUpdate:modelValue":a[8]||(a[8]=o=>O(S)?S.value=o:null),density:"default",class:"email-search px-sm-2 flex-grow-1 py-1",placeholder:"Search mail"},{"prepend-inner":t(()=>[e(u,{icon:"tabler-search",size:"24",class:"me-1 text-medium-emphasis"})]),_:1},8,["modelValue"])]),e(F),s("div",wt,[e(be,{"model-value":l(I),indeterminate:l(ue),class:"d-flex","onUpdate:modelValue":Ce},null,8,["model-value","indeterminate"]),s("div",{class:"w-100 d-flex align-center action-bar-actions gap-x-1",style:Te({visibility:l(ue)||l(I)?void 0:"hidden"})},[J(e(w,{onClick:a[9]||(a[9]=o=>L("trash"))},{default:t(()=>[e(u,{icon:"tabler-trash",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[13]||(a[13]=[y(" Delete Mail ")])),_:1})]),_:1},512),[[K,"filter"in l(h).params?l(h).params.filter!=="trashed":!0]]),e(w,{onClick:a[10]||(a[10]=o=>l(ne)?L("unread"):L("read"))},{default:t(()=>[e(u,{icon:l(ne)?"tabler-mail":"tabler-mail-opened",size:"22"},null,8,["icon"]),e(U,{activator:"parent",location:"top"},{default:t(()=>[y($(l(ne)?"Mark as Unread":"Mark as Read"),1)]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(u,{icon:"tabler-folder",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[14]||(a[14]=[y(" Folder ")])),_:1}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(v(!0),E(T,null,N(l(B),o=>(v(),D(le,{key:o.title,class:ee([l(c)(o.action)?"d-flex":"d-none","items-center"]),href:"#",onClick:j=>we(o.action)},{prepend:t(()=>[e(u,{icon:o.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(se,{class:"text-capitalize"},{default:t(()=>[y($(o.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(u,{icon:"tabler-tag",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[15]||(a[15]=[y(" Label ")])),_:1}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(v(!0),E(T,null,N(l(M),o=>(v(),D(le,{key:o.title,href:"#",onClick:j=>Ee(o.title)},{prepend:t(()=>[e(_e,{inline:"",color:l(V)(o.title),dot:""},null,8,["color"])]),default:t(()=>[e(se,{class:"ms-2 text-capitalize"},{default:t(()=>[y($(o.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})],4),e(W),e(w,{onClick:l(n)},{default:t(()=>[e(u,{icon:"tabler-refresh",size:"22"})]),_:1},8,["onClick"]),e(w,null,{default:t(()=>[e(u,{icon:"tabler-dots-vertical",size:"22"})]),_:1})]),e(F),e(l(me),{tag:"ul",options:{wheelPropagation:!1},class:"email-list"},{default:t(()=>[(v(!0),E(T,null,N(l(f),o=>{var j;return J((v(),E("li",{key:o.id,class:ee(["email-item d-flex align-center pa-4 gap-2 cursor-pointer",[{"email-read":o.isRead}]]),onClick:P=>Se(o)},[e(be,{"model-value":l(g).includes(o.id),class:"flex-shrink-0","onUpdate:modelValue":P=>p(o.id),onClick:a[11]||(a[11]=H(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),e(w,{color:o.isStarred?"warning":"default",onClick:H(P=>L(o.isStarred?"unstar":"star",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"tabler-star",size:"22"})]),_:2},1032,["color","onClick"]),e($e,{size:"32"},{default:t(()=>[e(re,{src:o.from.avatar,alt:o.from.name},null,8,["src","alt"])]),_:2},1024),s("h6",zt,$(o.from.name),1),s("span",St,$(o.subject),1),e(W),s("div",{class:ee(["email-meta align-center gap-2",m.$vuetify.display.xs?"d-none":""])},[(v(!0),E(T,null,N(o.labels,P=>(v(),D(u,{key:P,icon:"tabler-circle-filled",size:"10",color:l(V)(P)},null,8,["color"]))),128)),s("span",Mt,$(("formatDateToMonthShort"in m?m.formatDateToMonthShort:l(Me))(o.time)),1)],2),s("div",Lt,[e(w,{onClick:H(P=>L("trash",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"tabler-trash",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[16]||(a[16]=[y(" Delete Mail ")])),_:1})]),_:2},1032,["onClick"]),e(w,{class:"mx-2",onClick:H(P=>L(o.isRead?"unread":"read",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:o.isRead?"tabler-mail":"tabler-mail-opened",size:"22"},null,8,["icon"]),e(U,{activator:"parent",location:"top"},{default:t(()=>[y($(o.isRead?"Mark as Unread":"Mark as Read"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(w,{onClick:H(P=>L("spam",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"tabler-info-circle",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[17]||(a[17]=[y(" Move to Spam ")])),_:1})]),_:2},1032,["onClick"])])],10,Et)),[[K,(j=l(f))==null?void 0:j.length]])}),128)),J(s("li",Tt,a[18]||(a[18]=[s("span",{class:"text-high-emphasis"},"No items found.",-1)]),512),[[K,!l(f).length]])]),_:1})]),_:1}),J(e(Xe,{onClose:a[12]||(a[12]=o=>i.value=!1)},null,512),[[K,l(i)]])]),_:1})]),_:1})}}};export{$a as default};
