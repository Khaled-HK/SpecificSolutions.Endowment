import{aZ as zl,aL as Rl,r as d,P as Qe,w as pl,D as Hl,a as Wl,c as Ae,o as P,b as a,e as t,s as n,t as V,d as g,f as _,l as Ee,aa as C,V as q,p as ae,aV as te,m as b}from"./index-B8v18vV9.js";import{u as jl}from"./useFormValidation-CMFmdvK5.js";import{$ as x}from"./api-BsM9rBDA.js";import{V as Le}from"./VAlert-CITJvaM4.js";import{b as E,V as L,d as O,c as Ge}from"./VCard-CNRE25e-.js";import{V as Ql}from"./VDivider-DSPKupgM.js";import{V as N}from"./VCardText-DEmSXyVG.js";import{V as h,a as s}from"./VRow-_IA5gP-y.js";import{V as f}from"./VTextField-CECq9VRT.js";import{V as Ze}from"./VDataTable-3XgUkqKQ.js";import{V as z}from"./VSelect-DPHqViyI.js";import{V as Gl}from"./VPagination-CXzoGOqg.js";import{V as oe}from"./VTooltip-Dz_fmf42.js";import{V as ie}from"./VChip-O2d2z9kF.js";import{V as cl}from"./VAvatar-ChAAZBis.js";import{V as ue}from"./VForm-iJwaMksk.js";import{V as re}from"./VAutocomplete-D0ILY2x_.js";import{V as gl}from"./VTextarea-BFElYhdq.js";import{V as U}from"./VSpacer-q8Ilz_v3.js";import{V as T}from"./VDialog-CeKWQW-R.js";import{V as bl}from"./VCheckbox-nuO61BI8.js";import{_ as Zl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-9rIf2CJL.js";import"./VImg-CC9idbFW.js";/* empty css              *//* empty css                   */import"./VCounter-CIuax7qs.js";import"./VField-B3HFW9Jo.js";import"./form-CA0oDzwd.js";import"./easing-CjukEv2V.js";import"./VInput-C4rp4ag1.js";import"./forwardRefs-C-GTDzx5.js";import"./VCheckboxBtn-CbUz6YjU.js";import"./VSelectionControl-DskdDz5w.js";import"./VTable-DlYdeBcP.js";import"./filter-UjvCdIvO.js";import"./VList-DHTDlf99.js";import"./ssrBoot-DdFyWfM4.js";import"./dialog-transition-DYwFRJuV.js";import"./VMenu-yVuXb3wj.js";import"./VOverlay-XziznS_F.js";import"./delay-Gut2ep7o.js";import"./lazy-C7uzezzp.js";import"./scopeId-HP_yl1Lf.js";import"./VSlideGroup-B_7Hc5j3.js";const Jl={class:"d-flex gap-2"},Kl={class:"d-flex align-center"},Xl={class:"d-flex flex-column ms-3"},Yl={class:"d-block font-weight-medium text-truncate text-high-emphasis"},_l={class:"text-medium-emphasis"},hl={key:1,class:"text-medium-emphasis"},ea={key:1,class:"text-medium-emphasis"},la={key:1,class:"text-medium-emphasis"},aa={class:"d-flex gap-1"},ta={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},oa={class:"text-center py-8"},ia={class:"d-flex align-center"},ua={class:"d-flex flex-column ms-3"},ra={class:"d-block font-weight-medium text-truncate text-high-emphasis"},na={class:"text-medium-emphasis"},sa={class:"d-flex gap-1"},da={class:"text-center text-medium-emphasis py-8"},ma={class:"d-flex justify-end mb-2"},va={class:"d-flex gap-1"},fa=zl({__name:"mosques",setup(pa){const{t:B}=Rl(),{addError:ee,setErrorsFromResponse:Je,clearErrors:Ke,hasErrors:Xe,getFieldErrors:R,setFieldTouched:H,shouldShowFieldError:W,validateRequired:j,validateLength:Ye}=jl(),Pe=d([]),ne=d([]),se=d([]),Be=d(!1),De=d(!1),we=d(!1),Ce=d(0),_e=[{value:0,label:"لا شيء"},{value:1,label:"جمعة"},{value:2,label:"أوقات"},{value:3,label:"مسجد مركزي"},{value:4,label:"قاعة صلاة عامة"}],he=[{value:0,label:"لا شيء"},{value:1,label:"عام"},{value:2,label:"وطني"}],el=[{value:0,label:"منظمة"},{value:1,label:"محسنين"}],F=()=>new Date().toISOString().split("T")[0],m=d(!1),p=d(""),c=d("success"),de=d(!1),me=d(!1),J=d(!1),xe=d(!1),qe=d(!1),Ie=d(!1),D=d(null),K=d(null),X=d([]),ke=d(""),M=d([]),Q=d(!1),Ne=d(""),$e=d(),Oe=d(),S=d({name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}),I=d({id:"",name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}),ll=[{value:"Facility",label:"منشأة"},{value:"Endowment",label:"وقف"}],r=d({name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:F(),constructionDate:F(),mosqueDefinition:0,mosqueClassification:0,landDonorName:"",prayerCapacity:"",sourceFunds:0,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}),u=d({name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:"",constructionDate:"",mosqueDefinition:1,mosqueClassification:1,landDonorName:"",prayerCapacity:"",sourceFunds:1,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}),k=d({page:1,itemsPerPage:10,sortBy:[""],sortDesc:[!1]}),yl=Qe(()=>[{title:B("tableHeaders.mosques.name"),key:"mosqueName",sortable:!0},{title:B("tableHeaders.mosques.fileNumber"),key:"fileNumber",sortable:!0},{title:B("tableHeaders.mosques.region"),key:"region",sortable:!0},{title:B("tableHeaders.mosques.office"),key:"office",sortable:!0},{title:B("tableHeaders.mosques.actions"),key:"actions",sortable:!1,width:"120px"}]),Vl=Qe(()=>[{title:B("tableHeaders.buildingDetails.name"),key:"name",sortable:!0},{title:B("tableHeaders.buildingDetails.floors"),key:"floors",sortable:!0},{title:B("tableHeaders.buildingDetails.buildingCategory"),key:"buildingCategory",sortable:!0},{title:B("tableHeaders.buildingDetails.withinMosqueArea"),key:"withinMosqueArea",sortable:!0},{title:B("tableHeaders.buildingDetails.actions"),key:"actions",sortable:!1,width:"80px"}]),G=async()=>{Be.value=!0;try{const o=new URLSearchParams({PageNumber:k.value.page.toString(),PageSize:k.value.itemsPerPage.toString(),SearchTerm:ke.value||""}),e=await x(`/Mosque/filter?${o}`);if(Pe.value=e.data.items||[],e.data){Ce.value=e.data.totalCount||0;const i=Math.ceil(Ce.value/k.value.itemsPerPage);k.value.page>i&&i>0&&(k.value.page=i,await G())}}catch(o){console.error("Error loading mosques:",o),p.value="حدث خطأ أثناء تحميل المساجد",c.value="error",m.value=!0,Pe.value=[],Ce.value=0}finally{Be.value=!1}},al=async()=>{De.value=!0;try{const e=(await x("/Region/filter?PageSize=100")).data.items||[];ne.value=e.map(i=>({...i,name:i.name||i.regionName||i.title||i.id}))}catch(o){console.error("Error loading regions:",o),p.value="حدث خطأ أثناء تحميل المناطق",c.value="error",m.value=!0}finally{De.value=!1}},tl=async()=>{we.value=!0;try{const e=(await x("/Office/filter?PageSize=100")).data.items||[];se.value=e.map(i=>({...i,name:i.name||i.officeName||i.title||i.id}))}catch(o){console.error("Error loading offices:",o),p.value="حدث خطأ أثناء تحميل المكاتب",c.value="error",m.value=!0}finally{we.value=!1}},ol=async()=>{Ke();let o=!0;if(j(r.value.name,"name","اسم المسجد مطلوب")&&Ye(r.value.name,"name",2,100,"اسم المسجد يجب أن يكون بين 2 و 100 حرف")||(o=!1),j(r.value.fileNumber,"fileNumber","رقم الملف مطلوب")||(o=!1),j(r.value.regionId,"regionId","المنطقة مطلوبة")||(o=!1),j(r.value.officeId,"officeId","المكتب مطلوب")||(o=!1),r.value.totalCoveredArea<0&&(ee("totalCoveredArea","المساحة المغطاة لا يمكن أن تكون سالبة"),o=!1),r.value.totalLandArea<0&&(ee("totalLandArea","المساحة الكلية لا يمكن أن تكون سالبة"),o=!1),r.value.numberOfFloors<1&&(ee("numberOfFloors","عدد الطوابق يجب أن يكون 1 على الأقل"),o=!1),!!o)try{const e=l=>{if(!l||l.trim()==="")return F();try{const v=new Date(l);return isNaN(v.getTime())?F():v.toISOString().split("T")[0]}catch{return F()}},i=await x("/Mosque",{method:"POST",body:{name:r.value.name,regionId:r.value.regionId,officeId:r.value.officeId,fileNumber:r.value.fileNumber,definition:r.value.definition,classification:r.value.classification,unit:r.value.unit,nearestLandmark:r.value.nearestLandmark,mapLocation:r.value.mapLocation,sanitation:r.value.sanitation,electricityMeter:r.value.electricityMeter,alternativeEnergySource:r.value.alternativeEnergySource,waterSource:r.value.waterSource,briefDescription:r.value.briefDescription,totalCoveredArea:r.value.totalCoveredArea,totalLandArea:r.value.totalLandArea,numberOfFloors:r.value.numberOfFloors,openingDate:e(r.value.openingDate),constructionDate:e(r.value.constructionDate),mosqueDefinition:r.value.mosqueDefinition,mosqueClassification:r.value.mosqueClassification,landDonorName:r.value.landDonorName,prayerCapacity:r.value.prayerCapacity,sourceFunds:r.value.sourceFunds,servicesSpecialNeeds:r.value.servicesSpecialNeeds,specialEntranceWomen:r.value.specialEntranceWomen,picturePath:r.value.picturePath}});if(i&&i.isSuccess===!1){if(i.errors&&Array.isArray(i.errors))Je(i);else{const l=i.message||"حدث خطأ أثناء إضافة المسجد";p.value=l,c.value="error",m.value=!0}return}de.value=!1,kl(),G(),p.value="تم إضافة المسجد بنجاح",c.value="success",m.value=!0}catch(e){console.error("Error adding mosque:",e),p.value="حدث خطأ أثناء إضافة المسجد",c.value="error",m.value=!0}},il=async()=>{var e,i,l,v,w;Ke();let o=!0;if(j(u.value.name,"editName","اسم المسجد مطلوب")&&Ye(u.value.name,"editName",2,100,"اسم المسجد يجب أن يكون بين 2 و 100 حرف")||(o=!1),j(u.value.fileNumber,"editFileNumber","رقم الملف مطلوب")||(o=!1),j(u.value.regionId,"editRegionId","المنطقة مطلوبة")||(o=!1),j(u.value.officeId,"editOfficeId","المكتب مطلوب")||(o=!1),u.value.totalCoveredArea<0&&(ee("editTotalCoveredArea","المساحة المغطاة لا يمكن أن تكون سالبة"),o=!1),u.value.totalLandArea<0&&(ee("editTotalLandArea","المساحة الكلية لا يمكن أن تكون سالبة"),o=!1),u.value.numberOfFloors<1&&(ee("editNumberOfFloors","عدد الطوابق يجب أن يكون 1 على الأقل"),o=!1),!!o)try{const y=Ve=>{if(!Ve||Ve.trim()==="")return F();try{const fl=new Date(Ve);return isNaN(fl.getTime())?F():fl.toISOString().split("T")[0]}catch{return F()}};console.log("البيانات المرسلة للتحديث:",{id:(e=D.value)==null?void 0:e.mosqueID,name:u.value.name,regionId:u.value.regionId,officeId:u.value.officeId,openingDate:y(u.value.openingDate),constructionDate:y(u.value.constructionDate)}),console.log("ID المرسل:",(i=D.value)==null?void 0:i.mosqueID),console.log("نوع الـ ID:",typeof((l=D.value)==null?void 0:l.mosqueID));const A=await x(`/Mosque/${(v=D.value)==null?void 0:v.mosqueID}`,{method:"PUT",body:{id:(w=D.value)==null?void 0:w.mosqueID,name:u.value.name,regionId:u.value.regionId,officeId:u.value.officeId,fileNumber:u.value.fileNumber,definition:u.value.definition,classification:u.value.classification,unit:u.value.unit,nearestLandmark:u.value.nearestLandmark,mapLocation:u.value.mapLocation,sanitation:u.value.sanitation,electricityMeter:u.value.electricityMeter,alternativeEnergySource:u.value.alternativeEnergySource,waterSource:u.value.waterSource,briefDescription:u.value.briefDescription,totalCoveredArea:u.value.totalCoveredArea,totalLandArea:u.value.totalLandArea,numberOfFloors:u.value.numberOfFloors,openingDate:y(u.value.openingDate),constructionDate:y(u.value.constructionDate),mosqueDefinition:u.value.mosqueDefinition,mosqueClassification:u.value.mosqueClassification,landDonorName:u.value.landDonorName,prayerCapacity:u.value.prayerCapacity,sourceFunds:u.value.sourceFunds,servicesSpecialNeeds:u.value.servicesSpecialNeeds,specialEntranceWomen:u.value.specialEntranceWomen,picturePath:u.value.picturePath}});if(A&&A.isSuccess===!1){if(A.errors&&Array.isArray(A.errors))Je(A);else{const Ve=A.message||"حدث خطأ أثناء تحديث المسجد";p.value=Ve,c.value="error",m.value=!0}return}me.value=!1,G(),p.value="تم تحديث المسجد بنجاح",c.value="success",m.value=!0}catch(y){console.error("Error updating mosque:",y),p.value="حدث خطأ أثناء تحديث المسجد",c.value="error",m.value=!0}},Dl=async()=>{var o,e;if(D.value)try{console.log("Attempting to delete mosque:",D.value.mosqueID);const i=await x(`/Mosque/${D.value.mosqueID}`,{method:"DELETE"});if(console.log("Delete response:",i),console.log("Response data:",i.data),i&&i.isSuccess===!1){const l=i.message||((e=(o=i.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء حذف المسجد";console.log("API returned error:",l),p.value=l,c.value="error",m.value=!0,J.value=!1;return}console.log("Mosque deleted successfully"),J.value=!1,G(),p.value="تم حذف المسجد بنجاح",c.value="success",m.value=!0}catch(i){console.error("Error deleting mosque:",i),p.value="حدث خطأ في الاتصال بالخادم",c.value="error",m.value=!0,J.value=!1}},wl=async()=>{if(X.value.length!==0)try{const o=X.value.map(l=>x(`/Mosque/${l.mosqueID}`,{method:"DELETE"})),i=(await Promise.all(o)).filter(l=>l&&l.isSuccess===!1);if(i.length>0){const l=i.map(w=>{var y,A;return(w==null?void 0:w.message)||((A=(y=w==null?void 0:w.errors)==null?void 0:y[0])==null?void 0:A.errorMessage)||"حدث خطأ أثناء العملية"}),v=`فشل في حذف ${i.length} عنصر: ${l.join(", ")}`;p.value=v,c.value="error",m.value=!0;return}X.value=[],G(),p.value="تم حذف المساجد المحددة بنجاح",c.value="success",m.value=!0}catch(o){console.error("Error deleting selected mosques:",o),p.value="حدث خطأ في الاتصال بالخادم",c.value="error",m.value=!0}},Cl=async o=>{var v,w;console.log("بيانات المسجد من API:",o),ne.value.length===0&&await al(),se.value.length===0&&await tl();const e=((v=ne.value.find(y=>y.name===o.region))==null?void 0:v.id)||"",i=((w=se.value.find(y=>y.name===o.office))==null?void 0:w.id)||"";console.log("تم العثور على:",{regionId:e,officeId:i,regionName:o.region,officeName:o.office});const l=y=>{if(!y)return"";try{return new Date(y).toISOString().split("T")[0]}catch{return""}};u.value={name:o.mosqueName,regionId:e,officeId:i,fileNumber:o.fileNumber,definition:o.definition||"",classification:o.classification||"",unit:o.unit,nearestLandmark:o.nearestLandmark,mapLocation:o.mapLocation,sanitation:o.sanitation,electricityMeter:o.electricityMeter,alternativeEnergySource:o.alternativeEnergySource,waterSource:o.waterSource,briefDescription:o.briefDescription,totalCoveredArea:o.totalCoveredArea,totalLandArea:o.totalLandArea,numberOfFloors:o.numberOfFloors,openingDate:l(o.openingDate),constructionDate:l(o.constructionDate),mosqueDefinition:o.mosqueDefinition||0,mosqueClassification:o.mosqueClassification||0,landDonorName:o.landDonorName||"",prayerCapacity:o.prayerCapacity||"",sourceFunds:o.sourceFunds||0,servicesSpecialNeeds:o.servicesSpecialNeeds||!1,specialEntranceWomen:o.specialEntranceWomen||!1,picturePath:o.picturePath||""},D.value=o,me.value=!0,console.log("editMosque.value عند التعديل:",u.value)},xl=async o=>{D.value=o,xe.value=!0,await ul(o.mosqueID)},Se=async()=>{D.value&&await ul(D.value.mosqueID)},ul=async o=>{Q.value=!0;try{const e=await x(`/Mosque/${o}`);if(e&&e.data){const i=e.data.buildingId;if(i){const l=await x(`/BuildingDetail/filter?BuildingId=${i}&PageSize=100&PageNumber=1`);l&&l.data?M.value=l.data.items||[]:M.value=[]}else M.value=[]}else M.value=[]}catch(e){console.error("Error loading building details:",e),p.value="حدث خطأ أثناء تحميل تفاصيل المبنى",c.value="error",m.value=!0,M.value=[]}finally{Q.value=!1}},ql=o=>{D.value=o,J.value=!0},Il=()=>{r.value.openingDate=F(),r.value.constructionDate=F(),de.value=!0},kl=()=>{r.value={name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:F(),constructionDate:F(),mosqueDefinition:0,mosqueClassification:0,landDonorName:"",prayerCapacity:"",sourceFunds:0,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}},rl=async()=>{var e,i,l;if(!$e.value)return;if(!await $e.value.validate()){p.value="يرجى ملء جميع الحقول المطلوبة",c.value="warning",m.value=!0;return}try{const v=await x(`/Mosque/${(e=D.value)==null?void 0:e.mosqueID}`);if(!v||!v.data){p.value="لم يتم العثور على المسجد",c.value="error",m.value=!0;return}const w=v.data.buildingId;if(!w){p.value="لم يتم العثور على المبنى المرتبط بالمسجد",c.value="error",m.value=!0;return}const y=await x("/BuildingDetail",{method:"POST",body:{name:S.value.name,buildingId:w,floors:S.value.floors,withinMosqueArea:S.value.withinMosqueArea,buildingCategory:S.value.buildingCategory}});if(y&&y.isSuccess===!1){const A=y.message||((l=(i=y.errors)==null?void 0:i[0])==null?void 0:l.errorMessage)||"حدث خطأ أثناء إضافة تفصيل المبنى";p.value=A,c.value="error",m.value=!0;return}Te(),await Se(),p.value="تم إضافة تفصيل المبنى بنجاح",c.value="success",m.value=!0}catch(v){console.error("Error adding building detail:",v),p.value="حدث خطأ أثناء إضافة تفصيل المبنى",c.value="error",m.value=!0}},Nl=async o=>{var e,i;try{const l=await x(`/BuildingDetail/${o}`,{method:"DELETE"});if(l&&l.isSuccess===!1){const v=l.message||((i=(e=l.errors)==null?void 0:e[0])==null?void 0:i.errorMessage)||"حدث خطأ أثناء حذف تفصيل المبنى";p.value=v,c.value="error",m.value=!0;return}D.value&&await Se(),p.value="تم حذف تفصيل المبنى بنجاح",c.value="success",m.value=!0}catch(l){console.error("Error deleting building detail:",l),p.value="حدث خطأ أثناء حذف تفصيل المبنى",c.value="error",m.value=!0}},nl=()=>{qe.value=!0},Te=()=>{qe.value=!1,S.value={name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}},Sl=async()=>{if(D.value){Q.value=!0;try{const o=await x(`/Mosque/${D.value.mosqueID}`);if(o&&o.data){const e=o.data.buildingId;if(e){const i=await x(`/BuildingDetail/filter?BuildingId=${e}&SearchTerm=${Ne.value}&PageSize=100&PageNumber=1`);i&&i.data?M.value=i.data.items||[]:M.value=[]}else M.value=[]}else M.value=[]}catch(o){console.error("Error searching building details:",o),p.value="حدث خطأ أثناء البحث في تفاصيل المبنى",c.value="error",m.value=!0,M.value=[]}finally{Q.value=!1}}},Ul=async()=>{Ne.value="",await Se()},Fl=async o=>{let e="";o.buildingCategory===0||o.buildingCategory==="Facility"?e="Facility":(o.buildingCategory===1||o.buildingCategory,e="Endowment"),I.value={id:o.id,name:o.name,floors:o.floors,withinMosqueArea:o.withinMosqueArea,buildingCategory:e},K.value=o,Ie.value=!0},ze=()=>{Ie.value=!1,K.value=null,I.value={id:"",name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}},sl=async()=>{var e,i;if(!Oe.value)return;if(!await Oe.value.validate()){p.value="يرجى ملء جميع الحقول المطلوبة",c.value="warning",m.value=!0;return}try{const l=await x(`/BuildingDetail/${I.value.id}`,{method:"PUT",body:{id:I.value.id,name:I.value.name,floors:I.value.floors,withinMosqueArea:I.value.withinMosqueArea,buildingCategory:I.value.buildingCategory}});if(l&&l.isSuccess===!1){const v=l.message||((i=(e=l.errors)==null?void 0:e[0])==null?void 0:i.errorMessage)||"حدث خطأ أثناء تحديث تفصيل المبنى";p.value=v,c.value="error",m.value=!0;return}ze(),await Se(),p.value="تم تحديث تفصيل المبنى بنجاح",c.value="success",m.value=!0}catch(l){console.error("Error updating building detail:",l),p.value="حدث خطأ أثناء تحديث تفصيل المبنى",c.value="error",m.value=!0}},ve=d(!1),fe=d(null),le=d([]),Re=d(!1),Ue=async o=>{Re.value=!0;try{const e=await x(`/BuildingDetail/${o.id}`);if(!e||!e.data){le.value=[];return}const i=await x(`/FacilityDetail/filter?BuildingDetailId=${o.id}&PageSize=100&searchTerm=`);i&&i.data&&i.data.items?le.value=i.data.items:le.value=[]}catch{le.value=[]}finally{Re.value=!1}},Ml=async o=>{K.value=o,fe.value=o,ve.value=!0,await Ue(o)};pl(ke,()=>{k.value.page=1,G()},{immediate:!1}),pl([()=>k.value.page,()=>k.value.itemsPerPage],()=>{G()},{immediate:!1}),Hl(()=>{G(),al(),tl()});const pe=d(!1),Y=d({productId:"",quantity:1}),He=d(!1),ce=d([]),Fe=d(!1),dl=async()=>{Fe.value=!0;try{const o=await x("/Product/GetProducts");if(o&&o.data){const e=o.data.data||o.data||[];ce.value=e.map(i=>({...i,name:i.name||i.productName||i.product&&i.product.name||i.title||i.id}))}else ce.value=[]}catch{ce.value=[]}finally{Fe.value=!1}},Al=async()=>{Y.value={productId:"",quantity:1},await dl(),pe.value=!0},El=()=>{pe.value=!1},ml=async()=>{var o,e;if(K.value){He.value=!0;try{const i=await x("/FacilityDetail",{method:"POST",body:{buildingDetailId:K.value.id||K.value.Id,productId:Y.value.productId,quantity:Y.value.quantity}});if(i&&i.isSuccess===!1){let l=i.message||((e=(o=i.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء إضافة المادة";l=l.replace(/\n/g,""),Z(l,"error");return}pe.value=!1,await Ue(K.value),Z("تمت إضافة المادة بنجاح","success")}catch{Z("حدث خطأ أثناء إضافة المادة","error")}finally{He.value=!1}}},ge=d(!1),be=d(null),We=d(!1),Ll=o=>{be.value=o,ge.value=!0},Pl=()=>{ge.value=!1,be.value=null},Bl=async()=>{if(be.value){We.value=!0;try{await x(`/FacilityDetail/${be.value.id||be.value.Id}`,{method:"DELETE"}),ge.value=!1,await Ue(fe.value),Z("تم حذف المادة بنجاح","success")}catch{Z("حدث خطأ أثناء حذف المادة","error")}finally{We.value=!1}}},ye=d(!1),$=d({id:"",productId:"",quantity:1}),je=d(!1),$l=async o=>{await dl(),$.value={id:o.id||o.Id,productId:o.productId||o.ProductId,quantity:o.quantity||o.Quantity||1},ye.value=!0},Ol=()=>{ye.value=!1,$.value={id:"",productId:"",quantity:1}},vl=async()=>{var o,e;je.value=!0;try{const i=await x(`/FacilityDetail/${$.value.id}`,{method:"PUT",body:{id:$.value.id,productId:$.value.productId,quantity:$.value.quantity}});if(i&&i.isSuccess===!1){let l=i.message||((e=(o=i.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء تعديل المادة";l=l.replace(/\n/g,""),console.log("رسالة الخطأ:",l),Z(l,"error");return}ye.value=!1,await Ue(fe.value),Z("تم تعديل المادة بنجاح","success")}catch{Z("حدث خطأ أثناء تعديل المادة","error")}finally{je.value=!1}},Me=d(""),Tl=Qe(()=>{if(!Me.value)return le.value;const o=Me.value.toLowerCase();return le.value.filter(e=>{var y;const i=((y=e.product)==null?void 0:y.name)||e.productName||"",l=String(e.id||e.Id||""),v=String(e.productId||e.ProductId||""),w=String(e.quantity??e.Quantity??"");return i.toLowerCase().includes(o)||l.includes(o)||v.includes(o)||w.includes(o)})});function Z(o,e="success"){p.value=o,c.value=e,m.value=!0}return(o,e)=>{const i=Wl("IconBtn");return P(),Ae("div",null,[a(Le,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),type:c.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[n(V(p.value),1)]),_:1},8,["modelValue","type"]),a(L,null,{default:t(()=>[a(E,{class:"d-flex justify-space-between align-center pa-6"},{default:t(()=>[e[87]||(e[87]=g("span",{class:"text-h5"},"إدارة المساجد",-1)),g("div",Jl,[X.value.length>0?(P(),_(C,{key:0,color:"error",variant:"outlined",onClick:wl},{default:t(()=>[n(" حذف المحدد ("+V(X.value.length)+") ",1)]),_:1})):Ee("",!0),a(C,{color:"primary",onClick:Il},{default:t(()=>e[86]||(e[86]=[n(" إضافة مسجد ")])),_:1})])]),_:1}),a(Ql),a(N,null,{default:t(()=>[a(h,null,{default:t(()=>[a(s,{cols:"12","offset-md":"8",md:"4"},{default:t(()=>[a(f,{modelValue:ke.value,"onUpdate:modelValue":e[1]||(e[1]=l=>ke.value=l),placeholder:"البحث في المساجد...","prepend-inner-icon":"mdi-magnify","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),a(Ze,{headers:yl.value,items:Pe.value,loading:Be.value,"items-per-page":k.value.itemsPerPage,page:k.value.page,options:k.value,class:"text-no-wrap","show-select":"",modelValue:X.value,"onUpdate:modelValue":e[4]||(e[4]=l=>X.value=l)},{"item.mosqueName":t(({item:l})=>[g("div",Kl,[a(cl,{size:"32",color:"primary",variant:"tonal"},{default:t(()=>[n(V(l.mosqueName.charAt(0).toUpperCase()),1)]),_:2},1024),g("div",Xl,[g("span",Yl,V(l.mosqueName),1),g("small",_l,V(l.briefDescription||"لا يوجد وصف"),1)])])]),"item.fileNumber":t(({item:l})=>[l.fileNumber?(P(),_(ie,{key:0,color:"secondary",variant:"tonal",size:"small"},{default:t(()=>[n(V(l.fileNumber),1)]),_:2},1024)):(P(),Ae("span",hl," لا يوجد رقم ملف "))]),"item.region":t(({item:l})=>[l.region?(P(),_(ie,{key:0,color:"info",variant:"tonal",size:"small"},{default:t(()=>[n(V(l.region),1)]),_:2},1024)):(P(),Ae("span",ea," لا توجد منطقة "))]),"item.office":t(({item:l})=>[l.office?(P(),_(ie,{key:0,color:"success",variant:"tonal",size:"small"},{default:t(()=>[n(V(l.office),1)]),_:2},1024)):(P(),Ae("span",la," لا يوجد مكتب "))]),"item.actions":t(({item:l})=>[g("div",aa,[a(i,{onClick:v=>Cl(l)},{default:t(()=>[a(q,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(oe,{text:"إدارة تفاصيل المبنى (منزل الإمام، المصلى، دورة المياه...)",location:"top"},{activator:t(({props:v})=>[a(i,ae({onClick:w=>xl(l),color:"info"},v),{default:t(()=>[a(q,{icon:"tabler-building"})]),_:2},1040,["onClick"])]),_:2},1024),a(i,{onClick:v=>ql(l)},{default:t(()=>[a(q,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),bottom:t(()=>[a(N,{class:"pt-2"},{default:t(()=>[g("div",ta,[a(z,{modelValue:k.value.itemsPerPage,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value.itemsPerPage=l),items:[5,10,25,50,100],label:"عناصر في الصفحة:",variant:"underlined",style:{"max-inline-size":"8rem","min-inline-size":"5rem"}},null,8,["modelValue"]),a(Gl,{modelValue:k.value.page,"onUpdate:modelValue":e[3]||(e[3]=l=>k.value.page=l),"total-visible":o.$vuetify.display.smAndDown?3:5,length:Math.ceil(Ce.value/k.value.itemsPerPage)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1},8,["headers","items","loading","items-per-page","page","options","modelValue"])]),_:1})]),_:1}),a(T,{modelValue:de.value,"onUpdate:modelValue":e[30]||(e[30]=l=>de.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6"},{default:t(()=>e[88]||(e[88]=[n("إضافة مسجد جديد")])),_:1}),a(N,null,{default:t(()=>[a(ue,{onSubmit:te(ol,["prevent"])},{default:t(()=>[a(h,null,{default:t(()=>[a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.name,"onUpdate:modelValue":e[5]||(e[5]=l=>r.value.name=l),label:"اسم المسجد",variant:"outlined",required:"",error:b(W)("name"),"error-messages":b(R)("name"),onBlur:e[6]||(e[6]=l=>b(H)("name"))},null,8,["modelValue","error","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.fileNumber,"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.fileNumber=l),label:"رقم الملف",variant:"outlined",required:"",error:b(W)("fileNumber"),"error-messages":b(R)("fileNumber"),onBlur:e[8]||(e[8]=l=>b(H)("fileNumber"))},null,8,["modelValue","error","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(re,{modelValue:r.value.regionId,"onUpdate:modelValue":e[9]||(e[9]=l=>r.value.regionId=l),label:"المنطقة",variant:"outlined",items:ne.value,"item-title":"name","item-value":"id",loading:De.value,clearable:"","no-data-text":"لا توجد مناطق متاحة",required:"",error:b(W)("regionId"),"error-messages":b(R)("regionId"),onBlur:e[10]||(e[10]=l=>b(H)("regionId")),"prepend-inner-icon":"mdi-map",placeholder:"اختر المنطقة...","hide-no-data":""},null,8,["modelValue","items","loading","error","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(re,{modelValue:r.value.officeId,"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.officeId=l),label:"المكتب",variant:"outlined",items:se.value,"item-title":"name","item-value":"id",loading:we.value,clearable:"","no-data-text":"لا توجد مكاتب متاحة",required:"",error:b(W)("officeId"),"error-messages":b(R)("officeId"),onBlur:e[12]||(e[12]=l=>b(H)("officeId")),"prepend-inner-icon":"mdi-office-building",placeholder:"اختر المكتب...","hide-no-data":""},null,8,["modelValue","items","loading","error","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.unit,"onUpdate:modelValue":e[13]||(e[13]=l=>r.value.unit=l),label:"الوحدة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.nearestLandmark,"onUpdate:modelValue":e[14]||(e[14]=l=>r.value.nearestLandmark=l),label:"أقرب معلم",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.mapLocation,"onUpdate:modelValue":e[15]||(e[15]=l=>r.value.mapLocation=l),label:"موقع الخريطة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.electricityMeter,"onUpdate:modelValue":e[16]||(e[16]=l=>r.value.electricityMeter=l),label:"عداد الكهرباء",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.alternativeEnergySource,"onUpdate:modelValue":e[17]||(e[17]=l=>r.value.alternativeEnergySource=l),label:"مصدر الطاقة البديل",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.waterSource,"onUpdate:modelValue":e[18]||(e[18]=l=>r.value.waterSource=l),label:"مصدر المياه",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.sanitation,"onUpdate:modelValue":e[19]||(e[19]=l=>r.value.sanitation=l),label:"الصرف الصحي",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.totalLandArea,"onUpdate:modelValue":e[20]||(e[20]=l=>r.value.totalLandArea=l),label:"إجمالي مساحة الأرض",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.totalCoveredArea,"onUpdate:modelValue":e[21]||(e[21]=l=>r.value.totalCoveredArea=l),label:"إجمالي المساحة المغطاة",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.numberOfFloors,"onUpdate:modelValue":e[22]||(e[22]=l=>r.value.numberOfFloors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.openingDate,"onUpdate:modelValue":e[23]||(e[23]=l=>r.value.openingDate=l),label:"تاريخ الافتتاح",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ الافتتاح مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:r.value.constructionDate,"onUpdate:modelValue":e[24]||(e[24]=l=>r.value.constructionDate=l),label:"تاريخ البناء",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ البناء مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(z,{modelValue:r.value.mosqueDefinition,"onUpdate:modelValue":e[25]||(e[25]=l=>r.value.mosqueDefinition=l),label:"تعريف المسجد",variant:"outlined",items:_e,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تعريف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(z,{modelValue:r.value.mosqueClassification,"onUpdate:modelValue":e[26]||(e[26]=l=>r.value.mosqueClassification=l),label:"تصنيف المسجد",variant:"outlined",items:he,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تصنيف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(z,{modelValue:r.value.sourceFunds,"onUpdate:modelValue":e[27]||(e[27]=l=>r.value.sourceFunds=l),label:"مصدر التمويل",variant:"outlined",items:el,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"مصدر التمويل مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(gl,{modelValue:r.value.briefDescription,"onUpdate:modelValue":e[28]||(e[28]=l=>r.value.briefDescription=l),label:"وصف مختصر",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:e[29]||(e[29]=l=>de.value=!1)},{default:t(()=>e[89]||(e[89]=[n(" إلغاء ")])),_:1}),a(C,{color:"primary",variant:"flat",onClick:ol,disabled:b(Xe)},{default:t(()=>e[90]||(e[90]=[n(" حفظ ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:me.value,"onUpdate:modelValue":e[56]||(e[56]=l=>me.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6"},{default:t(()=>e[91]||(e[91]=[n("تعديل المسجد")])),_:1}),a(N,null,{default:t(()=>[a(ue,{onSubmit:te(il,["prevent"])},{default:t(()=>[a(h,null,{default:t(()=>[a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.name,"onUpdate:modelValue":e[31]||(e[31]=l=>u.value.name=l),label:"اسم المسجد",variant:"outlined",required:"",error:b(W)("editName"),"error-messages":b(R)("editName"),onBlur:e[32]||(e[32]=l=>b(H)("editName"))},null,8,["modelValue","error","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.fileNumber,"onUpdate:modelValue":e[33]||(e[33]=l=>u.value.fileNumber=l),label:"رقم الملف",variant:"outlined",required:"",error:b(W)("editFileNumber"),"error-messages":b(R)("editFileNumber"),onBlur:e[34]||(e[34]=l=>b(H)("editFileNumber"))},null,8,["modelValue","error","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(re,{modelValue:u.value.regionId,"onUpdate:modelValue":e[35]||(e[35]=l=>u.value.regionId=l),label:"المنطقة",variant:"outlined",items:ne.value,"item-title":"name","item-value":"id",loading:De.value,clearable:"","no-data-text":"لا توجد مناطق متاحة",required:"",error:b(W)("editRegionId"),"error-messages":b(R)("editRegionId"),onBlur:e[36]||(e[36]=l=>b(H)("editRegionId")),"prepend-inner-icon":"mdi-map",placeholder:"اختر المنطقة...","hide-no-data":""},null,8,["modelValue","items","loading","error","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(re,{modelValue:u.value.officeId,"onUpdate:modelValue":e[37]||(e[37]=l=>u.value.officeId=l),label:"المكتب",variant:"outlined",items:se.value,"item-title":"name","item-value":"id",loading:we.value,clearable:"","no-data-text":"لا توجد مكاتب متاحة",required:"",error:b(W)("editOfficeId"),"error-messages":b(R)("editOfficeId"),onBlur:e[38]||(e[38]=l=>b(H)("editOfficeId")),"prepend-inner-icon":"mdi-office-building",placeholder:"اختر المكتب...","hide-no-data":""},null,8,["modelValue","items","loading","error","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.unit,"onUpdate:modelValue":e[39]||(e[39]=l=>u.value.unit=l),label:"الوحدة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.nearestLandmark,"onUpdate:modelValue":e[40]||(e[40]=l=>u.value.nearestLandmark=l),label:"أقرب معلم",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.mapLocation,"onUpdate:modelValue":e[41]||(e[41]=l=>u.value.mapLocation=l),label:"موقع الخريطة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.electricityMeter,"onUpdate:modelValue":e[42]||(e[42]=l=>u.value.electricityMeter=l),label:"عداد الكهرباء",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.alternativeEnergySource,"onUpdate:modelValue":e[43]||(e[43]=l=>u.value.alternativeEnergySource=l),label:"مصدر الطاقة البديل",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.waterSource,"onUpdate:modelValue":e[44]||(e[44]=l=>u.value.waterSource=l),label:"مصدر المياه",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.sanitation,"onUpdate:modelValue":e[45]||(e[45]=l=>u.value.sanitation=l),label:"الصرف الصحي",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.totalLandArea,"onUpdate:modelValue":e[46]||(e[46]=l=>u.value.totalLandArea=l),label:"إجمالي مساحة الأرض",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.totalCoveredArea,"onUpdate:modelValue":e[47]||(e[47]=l=>u.value.totalCoveredArea=l),label:"إجمالي المساحة المغطاة",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.numberOfFloors,"onUpdate:modelValue":e[48]||(e[48]=l=>u.value.numberOfFloors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.openingDate,"onUpdate:modelValue":e[49]||(e[49]=l=>u.value.openingDate=l),label:"تاريخ الافتتاح",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ الافتتاح مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:u.value.constructionDate,"onUpdate:modelValue":e[50]||(e[50]=l=>u.value.constructionDate=l),label:"تاريخ البناء",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ البناء مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(z,{modelValue:u.value.mosqueDefinition,"onUpdate:modelValue":e[51]||(e[51]=l=>u.value.mosqueDefinition=l),label:"تعريف المسجد",variant:"outlined",items:_e,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تعريف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(z,{modelValue:u.value.mosqueClassification,"onUpdate:modelValue":e[52]||(e[52]=l=>u.value.mosqueClassification=l),label:"تصنيف المسجد",variant:"outlined",items:he,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تصنيف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(z,{modelValue:u.value.sourceFunds,"onUpdate:modelValue":e[53]||(e[53]=l=>u.value.sourceFunds=l),label:"مصدر التمويل",variant:"outlined",items:el,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"مصدر التمويل مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(gl,{modelValue:u.value.briefDescription,"onUpdate:modelValue":e[54]||(e[54]=l=>u.value.briefDescription=l),label:"وصف مختصر",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:e[55]||(e[55]=l=>me.value=!1)},{default:t(()=>e[92]||(e[92]=[n(" إلغاء ")])),_:1}),a(C,{color:"primary",variant:"flat",onClick:il,disabled:b(Xe)},{default:t(()=>e[93]||(e[93]=[n(" تحديث ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:J.value,"onUpdate:modelValue":e[58]||(e[58]=l=>J.value=l),"max-width":"400px"},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6"},{default:t(()=>e[94]||(e[94]=[n("تأكيد الحذف")])),_:1}),a(N,null,{default:t(()=>{var l;return[e[95]||(e[95]=n(' هل أنت متأكد من حذف المسجد "')),g("strong",null,V((l=D.value)==null?void 0:l.mosqueName),1),e[96]||(e[96]=n('"؟ ')),e[97]||(e[97]=g("br",null,null,-1)),e[98]||(e[98]=g("span",{class:"text-error"},"لا يمكن التراجع عن هذا الإجراء.",-1))]}),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:e[57]||(e[57]=l=>J.value=!1)},{default:t(()=>e[99]||(e[99]=[n(" إلغاء ")])),_:1}),a(C,{color:"error",variant:"flat",onClick:Dl},{default:t(()=>e[100]||(e[100]=[n(" حذف ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:xe.value,"onUpdate:modelValue":e[61]||(e[61]=l=>xe.value=l),"max-width":"1000px",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6"},{default:t(()=>{var l;return[n(" تفاصيل المبنى - "+V((l=D.value)==null?void 0:l.mosqueName),1)]}),_:1}),a(N,null,{default:t(()=>[a(L,{variant:"outlined"},{default:t(()=>[a(E,{class:"text-h6 d-flex justify-space-between align-center"},{default:t(()=>[e[102]||(e[102]=n(" تفاصيل المبنى الحالية ")),a(C,{color:"primary",variant:"flat",size:"small",onClick:nl,"prepend-icon":"tabler-plus",disabled:Q.value},{default:t(()=>e[101]||(e[101]=[n(" إضافة تفصيل جديد ")])),_:1},8,["disabled"])]),_:1}),a(N,null,{default:t(()=>[a(h,{class:"mb-4"},{default:t(()=>[a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:Ne.value,"onUpdate:modelValue":[e[59]||(e[59]=l=>Ne.value=l),Sl],label:"البحث في تفاصيل المبنى",variant:"outlined",density:"compact","prepend-inner-icon":"tabler-search",clearable:"","onClick:clear":Ul,placeholder:"ابحث عن اسم المبنى..."},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6",class:"d-flex align-center"},{default:t(()=>[a(ie,{color:"info",variant:"tonal",size:"small",class:"me-2"},{default:t(()=>[n(V(M.value.length)+" تفصيل ",1)]),_:1})]),_:1})]),_:1}),a(Ze,{headers:Vl.value,items:M.value,loading:Q.value,"items-per-page":10,class:"text-no-wrap","no-data-text":"لا توجد تفاصيل مبنى"},{"no-data":t(()=>[g("div",oa,[a(q,{icon:"tabler-building-off",size:"48",color:"grey",class:"mb-4"}),e[104]||(e[104]=g("div",{class:"text-h6 text-medium-emphasis mb-2"},"لا توجد تفاصيل مبنى",-1)),e[105]||(e[105]=g("div",{class:"text-body-2 text-medium-emphasis mb-4"}," لم يتم إضافة أي تفاصيل مبنى لهذا المسجد بعد ",-1)),a(C,{color:"primary",variant:"outlined",size:"small",onClick:nl,"prepend-icon":"tabler-plus"},{default:t(()=>e[103]||(e[103]=[n(" إضافة أول تفصيل ")])),_:1})])]),"item.name":t(({item:l})=>[g("div",ia,[a(cl,{size:"32",color:"info",variant:"tonal"},{default:t(()=>[n(V(l.name.charAt(0).toUpperCase()),1)]),_:2},1024),g("div",ua,[g("span",ra,V(l.name),1),g("small",na,V(l.floors)+" طابق",1)])])]),"item.buildingCategory":t(({item:l})=>[a(ie,{color:l.buildingCategory==="Facility"?"success":"warning",variant:"tonal",size:"small"},{default:t(()=>[n(V(l.buildingCategory==="Facility"?"منشأة":"وقف"),1)]),_:2},1032,["color"])]),"item.withinMosqueArea":t(({item:l})=>[a(ie,{color:l.withinMosqueArea?"success":"error",variant:"tonal",size:"small"},{default:t(()=>[n(V(l.withinMosqueArea?"داخل المسجد":"خارج المسجد"),1)]),_:2},1032,["color"])]),"item.actions":t(({item:l})=>[g("div",sa,[a(oe,{text:"تعديل تفصيل المبنى",location:"top"},{activator:t(({props:v})=>[a(i,ae({onClick:w=>Fl(l),color:"info"},v),{default:t(()=>[a(q,{icon:"tabler-edit"})]),_:2},1040,["onClick"])]),_:2},1024),a(oe,{text:"حذف تفصيل المبنى",location:"top"},{activator:t(({props:v})=>[a(i,ae({onClick:w=>Nl(l.id),color:"error"},v),{default:t(()=>[a(q,{icon:"tabler-trash"})]),_:2},1040,["onClick"])]),_:2},1024),a(oe,{text:"إدارة المواد",location:"top"},{activator:t(({props:v})=>[a(i,ae({onClick:w=>Ml(l),color:"primary"},v),{default:t(()=>[a(q,{icon:"tabler-package"})]),_:2},1040,["onClick"])]),_:2},1024)])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})]),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:e[60]||(e[60]=l=>xe.value=!1)},{default:t(()=>e[106]||(e[106]=[n(" إغلاق ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:qe.value,"onUpdate:modelValue":e[66]||(e[66]=l=>qe.value=l),"max-width":"600px",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(q,{icon:"tabler-building-plus",class:"me-2"}),e[107]||(e[107]=n(" إضافة تفصيل مبنى جديد ")),a(U),a(i,{onClick:Te,size:"small"},{default:t(()=>[a(q,{icon:"tabler-x"})]),_:1})]),_:1}),D.value?(P(),_(Ge,{key:0,class:"text-medium-emphasis"},{default:t(()=>[n(" للمسجد: "+V(D.value.mosqueName),1)]),_:1})):Ee("",!0),a(N,null,{default:t(()=>[a(ue,{onSubmit:te(rl,["prevent"]),ref_key:"addBuildingDetailForm",ref:$e},{default:t(()=>[a(h,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(f,{modelValue:S.value.name,"onUpdate:modelValue":e[62]||(e[62]=l=>S.value.name=l),label:"اسم المبنى",variant:"outlined",required:"",rules:[l=>!!l||"اسم المبنى مطلوب"],placeholder:"مثال: منزل الإمام، المصلى، دورة المياه...","prepend-inner-icon":"tabler-building",clearable:""},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:S.value.floors,"onUpdate:modelValue":e[63]||(e[63]=l=>S.value.floors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1",max:"50",required:"",rules:[l=>!!l||"عدد الطوابق مطلوب",l=>l>0||"عدد الطوابق يجب أن يكون أكبر من صفر"],"prepend-inner-icon":"tabler-layers"},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(z,{modelValue:S.value.buildingCategory,"onUpdate:modelValue":e[64]||(e[64]=l=>S.value.buildingCategory=l),label:"نوع المبنى",variant:"outlined",items:ll,"item-title":"label","item-value":"value",required:"",rules:[l=>!!l||"نوع المبنى مطلوب"],"prepend-inner-icon":"tabler-category"},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(bl,{modelValue:S.value.withinMosqueArea,"onUpdate:modelValue":e[65]||(e[65]=l=>S.value.withinMosqueArea=l),label:"داخل مساحة المسجد","hide-details":"",color:"primary",class:"mt-2"},null,8,["modelValue"]),a(N,{class:"text-caption text-medium-emphasis pa-0 mt-1"},{default:t(()=>[a(q,{icon:"tabler-info-circle",size:"small",class:"me-1"}),e[108]||(e[108]=n(" إذا كان المبنى داخل حدود المسجد أم خارجه "))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:Te},{default:t(()=>e[109]||(e[109]=[n(" إلغاء ")])),_:1}),a(C,{color:"primary",variant:"flat",onClick:rl,loading:Q.value,"prepend-icon":"tabler-plus"},{default:t(()=>e[110]||(e[110]=[n(" إضافة ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:Ie.value,"onUpdate:modelValue":e[71]||(e[71]=l=>Ie.value=l),"max-width":"600px",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(q,{icon:"tabler-building-edit",class:"me-2"}),e[111]||(e[111]=n(" تعديل تفصيل المبنى ")),a(U),a(i,{onClick:ze,size:"small"},{default:t(()=>[a(q,{icon:"tabler-x"})]),_:1})]),_:1}),D.value?(P(),_(Ge,{key:0,class:"text-medium-emphasis"},{default:t(()=>[n(" للمسجد: "+V(D.value.mosqueName),1)]),_:1})):Ee("",!0),a(N,null,{default:t(()=>[a(ue,{onSubmit:te(sl,["prevent"]),ref_key:"editBuildingDetailForm",ref:Oe},{default:t(()=>[a(h,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(f,{modelValue:I.value.name,"onUpdate:modelValue":e[67]||(e[67]=l=>I.value.name=l),label:"اسم المبنى",variant:"outlined",required:"",rules:[l=>!!l||"اسم المبنى مطلوب"],placeholder:"مثال: منزل الإمام، المصلى، دورة المياه...","prepend-inner-icon":"tabler-building",clearable:""},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:I.value.floors,"onUpdate:modelValue":e[68]||(e[68]=l=>I.value.floors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1",max:"50",required:"",rules:[l=>!!l||"عدد الطوابق مطلوب",l=>l>0||"عدد الطوابق يجب أن يكون أكبر من صفر"],"prepend-inner-icon":"tabler-layers"},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:t(()=>[a(z,{modelValue:I.value.buildingCategory,"onUpdate:modelValue":e[69]||(e[69]=l=>I.value.buildingCategory=l),label:"نوع المبنى",variant:"outlined",items:ll,"item-title":"label","item-value":"value",required:"",rules:[l=>!!l||"نوع المبنى مطلوب"],"prepend-inner-icon":"tabler-category"},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(bl,{modelValue:I.value.withinMosqueArea,"onUpdate:modelValue":e[70]||(e[70]=l=>I.value.withinMosqueArea=l),label:"داخل مساحة المسجد","hide-details":"",color:"primary",class:"mt-2"},null,8,["modelValue"]),a(N,{class:"text-caption text-medium-emphasis pa-0 mt-1"},{default:t(()=>[a(q,{icon:"tabler-info-circle",size:"small",class:"me-1"}),e[112]||(e[112]=n(" إذا كان المبنى داخل حدود المسجد أم خارجه "))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:ze},{default:t(()=>e[113]||(e[113]=[n(" إلغاء ")])),_:1}),a(C,{color:"primary",variant:"flat",onClick:sl,loading:Q.value,"prepend-icon":"tabler-check"},{default:t(()=>e[114]||(e[114]=[n(" تحديث ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:ve.value,"onUpdate:modelValue":e[76]||(e[76]=l=>ve.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(q,{icon:"tabler-package",class:"me-2"}),e[115]||(e[115]=n(" إدارة المواد المرتبطة بالمبنى ")),a(U),a(i,{onClick:e[72]||(e[72]=l=>ve.value=!1),size:"small"},{default:t(()=>[a(q,{icon:"tabler-x"})]),_:1})]),_:1}),fe.value?(P(),_(Ge,{key:0,class:"text-medium-emphasis"},{default:t(()=>[n(" للمبنى: "+V(fe.value.name),1)]),_:1})):Ee("",!0),a(N,null,{default:t(()=>[a(Le,{modelValue:m.value,"onUpdate:modelValue":e[73]||(e[73]=l=>m.value=l),type:c.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[n(V(p.value),1)]),_:1},8,["modelValue","type"]),g("div",da,[a(q,{icon:"tabler-package",size:"48",class:"mb-2"}),e[116]||(e[116]=g("div",null,"هنا سيتم عرض وإدارة المواد (Products) المرتبطة بهذا المبنى.",-1))]),g("div",ma,[a(C,{color:"primary",onClick:Al,"prepend-icon":"tabler-plus"},{default:t(()=>e[117]||(e[117]=[n("إضافة مادة جديدة")])),_:1})]),a(f,{modelValue:Me.value,"onUpdate:modelValue":e[74]||(e[74]=l=>Me.value=l),label:"بحث في المواد...","prepend-inner-icon":"tabler-search",clearable:"",class:"mb-2"},null,8,["modelValue"]),a(Ze,{headers:[{title:"اسم المادة",key:"productName",sortable:!0},{title:"الكمية",key:"quantity",sortable:!0},{title:"الإجراءات",key:"actions",sortable:!1,width:"80px"}],items:Tl.value,loading:Re.value,"items-per-page":10,class:"text-no-wrap","no-data-text":"لا توجد مواد مرتبطة بهذا المبنى"},{"item.productName":t(({item:l})=>{var v;return[g("span",null,V(l.productName||((v=l.product)==null?void 0:v.name)||"---"),1)]}),"item.quantity":t(({item:l})=>[g("span",null,V(l.quantity??l.Quantity??0),1)]),"item.actions":t(({item:l})=>[g("div",va,[a(oe,{text:"تعديل المادة",location:"top"},{activator:t(({props:v})=>[a(i,ae({onClick:w=>$l(l),color:"info"},v),{default:t(()=>[a(q,{icon:"tabler-edit"})]),_:2},1040,["onClick"])]),_:2},1024),a(oe,{text:"حذف المادة",location:"top"},{activator:t(({props:v})=>[a(i,ae({onClick:w=>Ll(l),color:"error"},v),{default:t(()=>[a(q,{icon:"tabler-trash"})]),_:2},1040,["onClick"])]),_:2},1024)])]),_:1},8,["items","loading"])]),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:e[75]||(e[75]=l=>ve.value=!1)},{default:t(()=>e[118]||(e[118]=[n(" إغلاق ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:pe.value,"onUpdate:modelValue":e[80]||(e[80]=l=>pe.value=l),"max-width":"500px",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6"},{default:t(()=>e[119]||(e[119]=[n("إضافة مادة جديدة")])),_:1}),a(N,null,{default:t(()=>[a(Le,{modelValue:m.value,"onUpdate:modelValue":e[77]||(e[77]=l=>m.value=l),type:c.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[n(V(p.value),1)]),_:1},8,["modelValue","type"]),a(ue,{onSubmit:te(ml,["prevent"])},{default:t(()=>[a(re,{modelValue:Y.value.productId,"onUpdate:modelValue":e[78]||(e[78]=l=>Y.value.productId=l),items:ce.value,"item-title":"value","item-value":"key",label:"اختر المادة",loading:Fe.value,required:"",clearable:"","no-data-text":"لا توجد مواد متاحة",placeholder:"اختر المادة..."},null,8,["modelValue","items","loading"]),a(f,{modelValue:Y.value.quantity,"onUpdate:modelValue":e[79]||(e[79]=l=>Y.value.quantity=l),label:"الكمية",type:"number",min:"1",required:""},null,8,["modelValue"])]),_:1})]),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:El},{default:t(()=>e[120]||(e[120]=[n("إلغاء")])),_:1}),a(C,{color:"primary",variant:"flat",onClick:ml,loading:He.value},{default:t(()=>e[121]||(e[121]=[n("حفظ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:ge.value,"onUpdate:modelValue":e[81]||(e[81]=l=>ge.value=l),"max-width":"400px"},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6"},{default:t(()=>e[122]||(e[122]=[n("تأكيد حذف المادة")])),_:1}),a(N,null,{default:t(()=>e[123]||(e[123]=[n(" هل أنت متأكد من حذف المادة؟ "),g("br",null,null,-1),g("span",{class:"text-error"},"لا يمكن التراجع عن هذا الإجراء.",-1)])),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:Pl},{default:t(()=>e[124]||(e[124]=[n("إلغاء")])),_:1}),a(C,{color:"error",variant:"flat",onClick:Bl,loading:We.value},{default:t(()=>e[125]||(e[125]=[n("حذف")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:ye.value,"onUpdate:modelValue":e[85]||(e[85]=l=>ye.value=l),"max-width":"500px",persistent:""},{default:t(()=>[a(L,null,{default:t(()=>[a(E,{class:"text-h6"},{default:t(()=>e[126]||(e[126]=[n("تعديل المادة")])),_:1}),a(N,null,{default:t(()=>[a(Le,{modelValue:m.value,"onUpdate:modelValue":e[82]||(e[82]=l=>m.value=l),type:c.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[n(V(p.value),1)]),_:1},8,["modelValue","type"]),a(ue,{onSubmit:te(vl,["prevent"])},{default:t(()=>[a(h,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(re,{modelValue:$.value.productId,"onUpdate:modelValue":e[83]||(e[83]=l=>$.value.productId=l),items:ce.value,"item-title":"value","item-value":"key",label:"المادة",loading:Fe.value,rules:[l=>!!l||"المادة مطلوبة"],required:"",clearable:"","no-data-text":"لا توجد مواد متاحة",placeholder:"اختر المادة..."},null,8,["modelValue","items","loading","rules"])]),_:1}),a(s,{cols:"12"},{default:t(()=>[a(f,{modelValue:$.value.quantity,"onUpdate:modelValue":e[84]||(e[84]=l=>$.value.quantity=l),label:"الكمية",type:"number",min:"1",rules:[l=>!!l||"الكمية مطلوبة",l=>l>0||"الكمية يجب أن تكون أكبر من صفر"],required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),a(O,null,{default:t(()=>[a(U),a(C,{color:"grey-darken-1",variant:"text",onClick:Ol},{default:t(()=>e[127]||(e[127]=[n("إلغاء")])),_:1}),a(C,{color:"primary",loading:je.value,onClick:vl},{default:t(()=>e[128]||(e[128]=[n("حفظ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),ut=Zl(fa,[["__scopeId","data-v-3c7ea469"]]);export{ut as default};
