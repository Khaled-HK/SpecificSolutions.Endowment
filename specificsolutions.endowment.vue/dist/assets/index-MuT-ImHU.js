import{_ as ie}from"./AppTextField-BayU8qJl.js";import{_ as _e}from"./DialogCloseBtn-DWYjAnC-.js";import{V as Q}from"./VCard-D2JA4AmT.js";import{V as z}from"./VCardText-BH-9XFE8.js";import{V as be}from"./VForm-B8aqMCjq.js";import{V as Ve}from"./VTable-BLedbsy0.js";import{V as j}from"./VCheckbox-YO2u8-YN.js";import{r as p,R as K,w as F,f as S,o as f,e as t,b as e,d as a,v as y,m as i,aR as b,c as R,F as T,h as ee,ac as W,t as h,a as te,l as Z,V as P,bc as B,bd as E,a_ as I,aY as L,aZ as O,bo as G,bn as re,dk as we,dl as xe,dm as ye,b9 as he}from"./index-HAXSP913.js";import{V as Ue}from"./VDialog-DFxEt3Xf.js";import{a as A,V as ae}from"./VRow-D-WQ3rzz.js";import{V as ue}from"./VSpacer-CRFMTN7t.js";import{V as q}from"./VAvatar-rXBq910H.js";import{_ as ke}from"./TablePagination-C9XsIe0N.js";import{_ as Ce}from"./AppSelect-eWxwmW0s.js";import{_ as $e}from"./AddNewUserDrawer-BZ27yyXD.js";import{u as De}from"./useApi-CziEUYSH.js";import{c as Pe}from"./createUrl-kDh1c1SV.js";import{$ as oe}from"./api-D8tF8UkA.js";import{V as Re}from"./VDivider-DWzVCSwo.js";import{V as Ae}from"./VDataTableServer-BXeU8zMj.js";import{V as Me}from"./VMenu-DyxfBKQE.js";import{V as Se,a as H,b as J}from"./VList-eLNL9IS9.js";import{V as Be}from"./VChip-hlgDUXKV.js";import{V as Ee}from"./VImg-19-9jxk0.js";import"./form-DhXBopYm.js";import"./VTextField-Dk4aTvnR.js";/* empty css                   */import"./VCounter-BRAxYcMs.js";import"./VField-DKyThWVI.js";import"./easing-CjukEv2V.js";import"./VInput-BcFLJ-wF.js";import"./forwardRefs-C-GTDzx5.js";import"./VCheckboxBtn-CxN3bhUn.js";import"./VSelectionControl-B_YabqNW.js";import"./VOverlay-DcepxaBF.js";import"./delay-D77_bA3B.js";import"./lazy-BVp99W2x.js";import"./scopeId-CpPFb7me.js";import"./dialog-transition-B3FWIg09.js";/* empty css              */import"./VPagination-CLcdAlyM.js";import"./VSelect-B2jdzs7s.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppDrawerHeaderSection-FEeMnXeQ.js";import"./vue3-perfect-scrollbar-D4ZYwmIE.js";import"./VNavigationDrawer-DMvsan7e.js";import"./ssrBoot-BFDk1D4x.js";import"./index-9rIf2CJL.js";import"./VDataTable-C9xC1VPt.js";import"./filter-BFModbeT.js";import"./VSlideGroup-_SWOzRoE.js";const Ie={class:"text-h4 text-center mb-2"},Le={colspan:"3"},Te={class:"d-flex justify-end"},ze={class:"text-h6"},Ne={class:"d-flex justify-end"},je={class:"d-flex justify-end"},Fe={class:"d-flex justify-end"},Oe={class:"d-flex align-center justify-center gap-4"},ne={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(N,{emit:U}){const u=N,v=U,d=p([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),V=p(!1),w=p(""),n=p(),g=K(()=>{let m=0;return d.value.forEach(r=>{Object.entries(r).forEach(([C,$])=>{C!=="name"&&$&&m++})}),m}),o=K(()=>g.value>0&&g.value<d.value.length*3);F(V,m=>{d.value=d.value.map(r=>({...r,read:m,write:m,create:m}))}),F(o,()=>{o.value||(V.value=!1)}),F(d,()=>{g.value===d.value.length*3&&(V.value=!0)},{deep:!0}),F(()=>u,()=>{u.rolePermissions&&u.rolePermissions.permissions.length&&(w.value=u.rolePermissions.name,d.value=d.value.map(m=>{var C;const r=(C=u.rolePermissions)==null?void 0:C.permissions.find($=>$.name===m.name);return r?{...m,...r}:m}))});const k=()=>{var r;const m={name:w.value,permissions:d.value};v("update:rolePermissions",m),v("update:isDialogVisible",!1),V.value=!1,(r=n.value)==null||r.reset()},x=()=>{var m;v("update:isDialogVisible",!1),V.value=!1,(m=n.value)==null||m.reset()};return(m,r)=>{const C=_e,$=ie;return f(),S(Ue,{width:m.$vuetify.display.smAndDown?"auto":900,"model-value":u.isDialogVisible,"onUpdate:modelValue":x},{default:t(()=>[e(C,{onClick:x}),e(Q,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(z,null,{default:t(()=>[a("h4",Ie,y(u.rolePermissions.name?"Edit":"Add New")+" Role ",1),r[7]||(r[7]=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1)),e(i(be),{ref_key:"refPermissionForm",ref:n},{default:t(()=>[e($,{modelValue:i(w),"onUpdate:modelValue":r[0]||(r[0]=c=>b(w)?w.value=c:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),r[6]||(r[6]=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1)),e(Ve,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[r[3]||(r[3]=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1)),a("td",Le,[a("div",Te,[e(j,{modelValue:i(V),"onUpdate:modelValue":r[1]||(r[1]=c=>b(V)?V.value=c:null),indeterminate:i(o),"onUpdate:indeterminate":r[2]||(r[2]=c=>b(o)?o.value=c:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(f(!0),R(T,null,ee(i(d),c=>(f(),R("tr",{key:c.name},[a("td",null,[a("h6",ze,y(c.name),1)]),a("td",null,[a("div",Ne,[e(j,{modelValue:c.read,"onUpdate:modelValue":D=>c.read=D,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",je,[e(j,{modelValue:c.write,"onUpdate:modelValue":D=>c.write=D,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Fe,[e(j,{modelValue:c.create,"onUpdate:modelValue":D=>c.create=D,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",Oe,[e(W,{onClick:k},{default:t(()=>r[4]||(r[4]=[h(" Submit ")])),_:1}),e(W,{color:"secondary",variant:"tonal",onClick:x},{default:t(()=>r[5]||(r[5]=[h(" Cancel ")])),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},qe="/assets/girl-using-mobile-CKXBkoEQ.png",Qe={class:"text-body-1"},Ke={class:"v-avatar-group"},We={class:"d-flex justify-space-between align-center"},Xe={class:"text-h5"},Ye={class:"d-flex align-center"},Ze=["onClick"],Ge=["src"],He={__name:"RoleCards",setup(N){const U=p([{role:"Administrator",users:[B,E,I,L],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[B,E,I,L,O,G,re],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[B,E,I,L,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[B,E,I,L,O,G],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[B,E,I,L,O,G,re,we,xe,ye],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),u=p(!1),v=p(),d=p(!1),V=w=>{u.value=!0,v.value=w};return(w,n)=>{const g=te("IconBtn");return f(),R(T,null,[e(ae,null,{default:t(()=>[(f(!0),R(T,null,ee(i(U),o=>(f(),S(A,{key:o.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,null,{default:t(()=>[e(z,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",Qe," Total "+y(o.users.length)+" users ",1),e(ue),a("div",Ke,[(f(!0),R(T,null,ee(o.users,(k,x)=>(f(),R(T,{key:k},[o.users.length>4&&o.users.length!==4&&x<3?(f(),S(q,{key:0,size:"40",image:k},null,8,["image"])):Z("",!0),o.users.length===4?(f(),S(q,{key:1,size:"40",image:k},null,8,["image"])):Z("",!0)],64))),128)),o.users.length>4?(f(),S(q,{key:0,color:w.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+y(o.users.length-3),1)]),_:2},1032,["color"])):Z("",!0)])]),_:2},1024),e(z,null,{default:t(()=>[a("div",We,[a("div",null,[a("h5",Xe,y(o.role),1),a("div",Ye,[a("a",{href:"javascript:void(0)",onClick:k=>V(o.details)}," Edit Role ",8,Ze)])]),e(g,null,{default:t(()=>[e(P,{icon:"tabler-copy",class:"text-high-emphasis"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(A,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,{class:"h-100",ripple:!1},{default:t(()=>[e(ae,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(A,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"85",src:i(qe)},null,8,Ge)]),_:1}),e(A,{cols:"7"},{default:t(()=>[e(z,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(W,{size:"small",onClick:n[0]||(n[0]=o=>d.value=!0)},{default:t(()=>n[4]||(n[4]=[h(" Add New Role ")])),_:1}),n[5]||(n[5]=a("div",{class:"text-end"},[h(" Add new role,"),a("br"),h(" if it doesn't exist. ")],-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(ne,{"is-dialog-visible":i(d),"onUpdate:isDialogVisible":n[1]||(n[1]=o=>b(d)?d.value=o:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(ne,{"is-dialog-visible":i(u),"onUpdate:isDialogVisible":n[2]||(n[2]=o=>b(u)?u.value=o:null),"role-permissions":i(v),"onUpdate:rolePermissions":n[3]||(n[3]=o=>b(v)?v.value=o:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}},Je={class:"d-flex gap-2 align-center"},et={class:"d-flex align-center flex-wrap gap-4"},tt={class:"d-flex align-center gap-x-4"},at={key:1},lt={class:"d-flex flex-column"},st={class:"text-base"},rt={class:"text-sm"},ot={class:"d-flex align-center gap-x-2"},nt={class:"text-capitalize text-high-emphasis text-body-1"},it={class:"text-body-1 text-high-emphasis text-capitalize"},ut={__name:"UserList",async setup(N){let U,u;const v=p(""),d=p(),V=p(),w=p(),n=p(10),g=p(1),o=p(),k=p(),x=p([]),m=_=>{var l,M;o.value=(l=_.sortBy[0])==null?void 0:l.key,k.value=(M=_.sortBy[0])==null?void 0:M.order},r=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:C,execute:$}=([U,u]=he(()=>De(Pe("/apps/users",{query:{q:v,status:w,plan:V,role:d,itemsPerPage:n,page:g,sortBy:o,orderBy:k}}))),U=await U,u(),U),c=K(()=>C.value.users),D=K(()=>C.value.totalUsers),de=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],X=_=>{const l=_.toLowerCase();return l==="subscriber"?{color:"primary",icon:"tabler-user"}:l==="author"?{color:"warning",icon:"tabler-settings"}:l==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:l==="editor"?{color:"info",icon:"tabler-pencil"}:l==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},me=_=>{const l=_.toLowerCase();return l==="pending"?"warning":l==="active"?"success":l==="inactive"?"secondary":"primary"},Y=p(!1),pe=async _=>{await oe("/apps/users",{method:"POST",body:_}),$()},le=async _=>{await oe(`/apps/users/${_}`,{method:"DELETE"});const l=x.value.findIndex(M=>M===_);l!==-1&&x.value.splice(l,1),$()};return(_,l)=>{const M=Ce,ce=ie,fe=te("RouterLink"),se=te("IconBtn"),ve=ke;return f(),R("section",null,[e(Q,null,{default:t(()=>[e(z,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[a("div",Je,[l[8]||(l[8]=a("p",{class:"text-body-1 mb-0"}," Show ",-1)),e(M,{"model-value":i(n),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=s=>n.value=parseInt(s,10))},null,8,["model-value"])]),e(ue),a("div",et,[e(ce,{modelValue:i(v),"onUpdate:modelValue":l[1]||(l[1]=s=>b(v)?v.value=s:null),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(M,{modelValue:i(d),"onUpdate:modelValue":l[2]||(l[2]=s=>b(d)?d.value=s:null),placeholder:"Select Role",items:de,clearable:"","clear-icon":"tabler-x",style:{"inline-size":"10rem"}},null,8,["modelValue"])])]),_:1}),e(Re),e(Ae,{"items-per-page":i(n),"onUpdate:itemsPerPage":l[4]||(l[4]=s=>b(n)?n.value=s:null),"model-value":i(x),"onUpdate:modelValue":l[5]||(l[5]=s=>b(x)?x.value=s:null),page:i(g),"onUpdate:page":l[6]||(l[6]=s=>b(g)?g.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:i(c),"items-length":i(D),headers:r,class:"text-no-wrap","show-select":"","onUpdate:options":m},{"item.user":t(({item:s})=>[a("div",tt,[e(q,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:X(s.role).color},{default:t(()=>[s.avatar?(f(),S(Ee,{key:0,src:s.avatar},null,8,["src"])):(f(),R("span",at,y(_.avatarText(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",lt,[a("h6",st,[e(fe,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"font-weight-medium text-link"},{default:t(()=>[h(y(s.fullName),1)]),_:2},1032,["to"])]),a("div",rt,y(s.email),1)])])]),"item.role":t(({item:s})=>[a("div",ot,[e(P,{size:22,icon:X(s.role).icon,color:X(s.role).color},null,8,["icon","color"]),a("div",nt,y(s.role),1)])]),"item.plan":t(({item:s})=>[a("div",it,y(s.currentPlan),1)]),"item.status":t(({item:s})=>[e(Be,{color:me(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[h(y(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(se,{onClick:ge=>le(s.id)},{default:t(()=>[e(P,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(se,null,{default:t(()=>[e(P,{icon:"tabler-eye"})]),_:1}),e(W,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(P,{icon:"tabler-dots-vertical"}),e(Me,{activator:"parent"},{default:t(()=>[e(Se,null,{default:t(()=>[e(H,{to:{name:"apps-user-view-id",params:{id:s.id}}},{prepend:t(()=>[e(P,{icon:"tabler-eye"})]),default:t(()=>[e(J,null,{default:t(()=>l[9]||(l[9]=[h("View")])),_:1})]),_:2},1032,["to"]),e(H,{link:""},{prepend:t(()=>[e(P,{icon:"tabler-pencil"})]),default:t(()=>[e(J,null,{default:t(()=>l[10]||(l[10]=[h("Edit")])),_:1})]),_:1}),e(H,{onClick:ge=>le(s.id)},{prepend:t(()=>[e(P,{icon:"tabler-trash"})]),default:t(()=>[e(J,null,{default:t(()=>l[11]||(l[11]=[h("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(ve,{page:i(g),"onUpdate:page":l[3]||(l[3]=s=>b(g)?g.value=s:null),"items-per-page":i(n),"total-items":i(D)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e($e,{"is-drawer-open":i(Y),"onUpdate:isDrawerOpen":l[7]||(l[7]=s=>b(Y)?Y.value=s:null),onUserData:pe},null,8,["is-drawer-open"])])}}},ia={__name:"index",setup(N){return(U,u)=>(f(),S(ae,null,{default:t(()=>[e(A,{cols:"12"},{default:t(()=>u[0]||(u[0]=[a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1)])),_:1}),e(A,{cols:"12"},{default:t(()=>[e(He)]),_:1}),e(A,{cols:"12"},{default:t(()=>u[1]||(u[1]=[a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),a("p",{class:"text-body-1 mb-0"}," Find all of your company's administrator accounts and their associate roles. ",-1)])),_:1}),e(A,{cols:"12"},{default:t(()=>[e(ut)]),_:1})]),_:1}))}};export{ia as default};
