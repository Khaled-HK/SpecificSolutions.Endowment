import{a$ as Ul,r as d,w as al,G as Ml,R as Nl,a as Fl,c as Ie,o as L,b as a,e as t,t as s,v as D,d as g,f as G,l as Se,ac as V,V as C,q as K,aX as Y}from"./index-BtfhVSwE.js";import{$ as w}from"./api-DMVoFGKx.js";import{V as Al}from"./VAlert-XzerbF0T.js";import{b as A,V as E,d as B,c as Te}from"./VCard-BMKvoKHc.js";import{V as El}from"./VDivider-BskaqePa.js";import{V as I}from"./VCardText-CQ_kqBGy.js";import{V as H,a as r}from"./VRow-DRm1vRrS.js";import{V as v}from"./VTextField-BP9Yt9Bg.js";import{V as ze}from"./VDataTable-arlORk0G.js";import{V as T}from"./VSelect-CV3yq3nX.js";import{V as Ll}from"./VPagination-C4bWb9ez.js";import{V as Z}from"./VTooltip-DRFousGm.js";import{V as _}from"./VChip-DkJYynY0.js";import{V as tl}from"./VAvatar-Di7p70o_.js";import{V as h}from"./VForm-DB6_r-fV.js";import{V as ee}from"./VAutocomplete-DFOTlZAA.js";import{V as ol}from"./VTextarea-CHMuYu0m.js";import{V as U}from"./VSpacer-affoxjwI.js";import{V as $}from"./VDialog-BR-8AWmC.js";import{V as ul}from"./VCheckbox-i2iQig1C.js";import{_ as Pl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-9rIf2CJL.js";import"./VImg-BKSypqLi.js";/* empty css              *//* empty css                   */import"./VCounter-CfEBC7nV.js";import"./VField-DiZdpAIN.js";import"./form-DUL9ls8s.js";import"./easing-CjukEv2V.js";import"./VInput-DIAfQwmh.js";import"./forwardRefs-C-GTDzx5.js";import"./VCheckboxBtn-CPFIFhHb.js";import"./VSelectionControl-C7oASZhF.js";import"./VTable-DxW4-iwJ.js";import"./filter-BALRNvRS.js";import"./VList-Cp76iGum.js";import"./ssrBoot-BJLk6Iwd.js";import"./dialog-transition-CRKIv97n.js";import"./VMenu-Cpm7zxfp.js";import"./VOverlay-BfQOvZM9.js";import"./delay-BDF9y9xB.js";import"./lazy-NLe1V18V.js";import"./scopeId-Cvig9lvB.js";import"./VSlideGroup-BbCsdCyI.js";const Bl={class:"d-flex gap-2"},$l={class:"d-flex align-center"},Tl={class:"d-flex flex-column ms-3"},zl={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Ol={class:"text-medium-emphasis"},Rl={key:1,class:"text-medium-emphasis"},Wl={key:1,class:"text-medium-emphasis"},jl={key:1,class:"text-medium-emphasis"},Ql={class:"d-flex gap-1"},Gl={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},Hl={class:"text-center py-8"},Xl={class:"d-flex align-center"},Jl={class:"d-flex flex-column ms-3"},Kl={class:"d-block font-weight-medium text-truncate text-high-emphasis"},Yl={class:"text-medium-emphasis"},Zl={class:"d-flex gap-1"},_l={class:"text-center text-medium-emphasis py-8"},hl={class:"d-flex justify-end mb-2"},ea={class:"d-flex gap-1"},la=Ul({__name:"mosques",setup(aa){const Ue=d([]),le=d([]),ae=d([]),Me=d(!1),fe=d(!1),ce=d(!1),pe=d(0),Oe=[{value:0,label:"لا شيء"},{value:1,label:"جمعة"},{value:2,label:"أوقات"},{value:3,label:"مسجد مركزي"},{value:4,label:"قاعة صلاة عامة"}],Re=[{value:0,label:"لا شيء"},{value:1,label:"عام"},{value:2,label:"وطني"}],We=[{value:0,label:"منظمة"},{value:1,label:"محسنين"}],M=()=>new Date().toISOString().split("T")[0],f=d(!1),c=d(""),p=d("success"),te=d(!1),oe=d(!1),R=d(!1),ge=d(!1),ye=d(!1),be=d(!1),b=d(null),W=d(null),j=d([]),Ve=d(""),N=d([]),z=d(!1),De=d(""),Ne=d(),Fe=d(),S=d({name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}),q=d({id:"",name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}),je=[{value:"Facility",label:"منشأة"},{value:"Endowment",label:"وقف"}],i=d({name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:M(),constructionDate:M(),mosqueDefinition:0,mosqueClassification:0,landDonorName:"",prayerCapacity:"",sourceFunds:0,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}),u=d({name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:"",constructionDate:"",mosqueDefinition:1,mosqueClassification:1,landDonorName:"",prayerCapacity:"",sourceFunds:1,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}),k=d({page:1,itemsPerPage:10,sortBy:[""],sortDesc:[!1]}),il=[{title:"اسم المسجد",key:"mosqueName",sortable:!0},{title:"رقم الملف",key:"fileNumber",sortable:!0},{title:"المنطقة",key:"region",sortable:!0},{title:"المكتب",key:"office",sortable:!0},{title:"الإجراءات",key:"actions",sortable:!1,width:"120px"}],nl=[{title:"اسم المبنى",key:"name",sortable:!0},{title:"عدد الطوابق",key:"floors",sortable:!0},{title:"نوع المبنى",key:"buildingCategory",sortable:!0},{title:"الموقع",key:"withinMosqueArea",sortable:!0},{title:"الإجراءات",key:"actions",sortable:!1,width:"80px"}],O=async()=>{Me.value=!0;try{const o=new URLSearchParams({PageNumber:k.value.page.toString(),PageSize:k.value.itemsPerPage.toString(),SearchTerm:Ve.value||""}),e=await w(`/Mosque/filter?${o}`);if(Ue.value=e.data.items||[],e.data){pe.value=e.data.totalCount||0;const n=Math.ceil(pe.value/k.value.itemsPerPage);k.value.page>n&&n>0&&(k.value.page=n,await O())}}catch(o){console.error("Error loading mosques:",o),c.value="حدث خطأ أثناء تحميل المساجد",p.value="error",f.value=!0,Ue.value=[],pe.value=0}finally{Me.value=!1}},Qe=async()=>{fe.value=!0;try{const o=await w("/Region/filter?PageSize=100");le.value=o.data.items||[]}catch(o){console.error("Error loading regions:",o),c.value="حدث خطأ أثناء تحميل المناطق",p.value="error",f.value=!0}finally{fe.value=!1}},Ge=async()=>{ce.value=!0;try{const o=await w("/Office/filter?PageSize=100");ae.value=o.data.items||[]}catch(o){console.error("Error loading offices:",o),c.value="حدث خطأ أثناء تحميل المكاتب",p.value="error",f.value=!0}finally{ce.value=!1}},He=async()=>{var o,e;try{const n=m=>{if(!m||m.trim()==="")return M();try{const y=new Date(m);return isNaN(y.getTime())?M():y.toISOString().split("T")[0]}catch{return M()}},l=await w("/Mosque",{method:"POST",body:{name:i.value.name,regionId:i.value.regionId,officeId:i.value.officeId,fileNumber:i.value.fileNumber,definition:i.value.definition,classification:i.value.classification,unit:i.value.unit,nearestLandmark:i.value.nearestLandmark,mapLocation:i.value.mapLocation,sanitation:i.value.sanitation,electricityMeter:i.value.electricityMeter,alternativeEnergySource:i.value.alternativeEnergySource,waterSource:i.value.waterSource,briefDescription:i.value.briefDescription,totalCoveredArea:i.value.totalCoveredArea,totalLandArea:i.value.totalLandArea,numberOfFloors:i.value.numberOfFloors,openingDate:n(i.value.openingDate),constructionDate:n(i.value.constructionDate),mosqueDefinition:i.value.mosqueDefinition,mosqueClassification:i.value.mosqueClassification,landDonorName:i.value.landDonorName,prayerCapacity:i.value.prayerCapacity,sourceFunds:i.value.sourceFunds,servicesSpecialNeeds:i.value.servicesSpecialNeeds,specialEntranceWomen:i.value.specialEntranceWomen,picturePath:i.value.picturePath}});if(l&&l.isSuccess===!1){const m=l.message||((e=(o=l.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء إضافة المسجد";c.value=m,p.value="error",f.value=!0;return}te.value=!1,cl(),O(),c.value="تم إضافة المسجد بنجاح",p.value="success",f.value=!0}catch(n){console.error("Error adding mosque:",n),c.value="حدث خطأ أثناء إضافة المسجد",p.value="error",f.value=!0}},Xe=async()=>{var o,e,n,l,m,y,x;try{const F=ve=>{if(!ve||ve.trim()==="")return M();try{const ll=new Date(ve);return isNaN(ll.getTime())?M():ll.toISOString().split("T")[0]}catch{return M()}};console.log("البيانات المرسلة للتحديث:",{id:(o=b.value)==null?void 0:o.mosqueID,name:u.value.name,regionId:u.value.regionId,officeId:u.value.officeId,openingDate:F(u.value.openingDate),constructionDate:F(u.value.constructionDate)}),console.log("ID المرسل:",(e=b.value)==null?void 0:e.mosqueID),console.log("نوع الـ ID:",typeof((n=b.value)==null?void 0:n.mosqueID));const ke=await w(`/Mosque/${(l=b.value)==null?void 0:l.mosqueID}`,{method:"PUT",body:{id:(m=b.value)==null?void 0:m.mosqueID,name:u.value.name,regionId:u.value.regionId,officeId:u.value.officeId,fileNumber:u.value.fileNumber,definition:u.value.definition,classification:u.value.classification,unit:u.value.unit,nearestLandmark:u.value.nearestLandmark,mapLocation:u.value.mapLocation,sanitation:u.value.sanitation,electricityMeter:u.value.electricityMeter,alternativeEnergySource:u.value.alternativeEnergySource,waterSource:u.value.waterSource,briefDescription:u.value.briefDescription,totalCoveredArea:u.value.totalCoveredArea,totalLandArea:u.value.totalLandArea,numberOfFloors:u.value.numberOfFloors,openingDate:F(u.value.openingDate),constructionDate:F(u.value.constructionDate),mosqueDefinition:u.value.mosqueDefinition,mosqueClassification:u.value.mosqueClassification,landDonorName:u.value.landDonorName,prayerCapacity:u.value.prayerCapacity,sourceFunds:u.value.sourceFunds,servicesSpecialNeeds:u.value.servicesSpecialNeeds,specialEntranceWomen:u.value.specialEntranceWomen,picturePath:u.value.picturePath}});if(ke&&ke.isSuccess===!1){const ve=ke.message||((x=(y=ke.errors)==null?void 0:y[0])==null?void 0:x.errorMessage)||"حدث خطأ أثناء تحديث المسجد";c.value=ve,p.value="error",f.value=!0;return}oe.value=!1,O(),c.value="تم تحديث المسجد بنجاح",p.value="success",f.value=!0}catch(F){console.error("Error updating mosque:",F),c.value="حدث خطأ أثناء تحديث المسجد",p.value="error",f.value=!0}},rl=async()=>{var o,e;if(b.value)try{console.log("Attempting to delete mosque:",b.value.mosqueID);const n=await w(`/Mosque/${b.value.mosqueID}`,{method:"DELETE"});if(console.log("Delete response:",n),console.log("Response data:",n.data),n&&n.isSuccess===!1){const l=n.message||((e=(o=n.errors)==null?void 0:o[0])==null?void 0:e.errorMessage)||"حدث خطأ أثناء حذف المسجد";console.log("API returned error:",l),c.value=l,p.value="error",f.value=!0,R.value=!1;return}console.log("Mosque deleted successfully"),R.value=!1,O(),c.value="تم حذف المسجد بنجاح",p.value="success",f.value=!0}catch(n){console.error("Error deleting mosque:",n),c.value="حدث خطأ في الاتصال بالخادم",p.value="error",f.value=!0,R.value=!1}},sl=async()=>{if(j.value.length!==0)try{const o=j.value.map(l=>w(`/Mosque/${l.mosqueID}`,{method:"DELETE"})),n=(await Promise.all(o)).filter(l=>l&&l.isSuccess===!1);if(n.length>0){const l=n.map(y=>{var x,F;return(y==null?void 0:y.message)||((F=(x=y==null?void 0:y.errors)==null?void 0:x[0])==null?void 0:F.errorMessage)||"حدث خطأ أثناء العملية"}),m=`فشل في حذف ${n.length} عنصر: ${l.join(", ")}`;c.value=m,p.value="error",f.value=!0;return}j.value=[],O(),c.value="تم حذف المساجد المحددة بنجاح",p.value="success",f.value=!0}catch(o){console.error("Error deleting selected mosques:",o),c.value="حدث خطأ في الاتصال بالخادم",p.value="error",f.value=!0}},dl=async o=>{var m,y;console.log("بيانات المسجد من API:",o),le.value.length===0&&await Qe(),ae.value.length===0&&await Ge();const e=((m=le.value.find(x=>x.name===o.region))==null?void 0:m.id)||"",n=((y=ae.value.find(x=>x.name===o.office))==null?void 0:y.id)||"";console.log("تم العثور على:",{regionId:e,officeId:n,regionName:o.region,officeName:o.office});const l=x=>{if(!x)return"";try{return new Date(x).toISOString().split("T")[0]}catch{return""}};u.value={name:o.mosqueName,regionId:e,officeId:n,fileNumber:o.fileNumber,definition:o.definition||"",classification:o.classification||"",unit:o.unit,nearestLandmark:o.nearestLandmark,mapLocation:o.mapLocation,sanitation:o.sanitation,electricityMeter:o.electricityMeter,alternativeEnergySource:o.alternativeEnergySource,waterSource:o.waterSource,briefDescription:o.briefDescription,totalCoveredArea:o.totalCoveredArea,totalLandArea:o.totalLandArea,numberOfFloors:o.numberOfFloors,openingDate:l(o.openingDate),constructionDate:l(o.constructionDate),mosqueDefinition:o.mosqueDefinition||0,mosqueClassification:o.mosqueClassification||0,landDonorName:o.landDonorName||"",prayerCapacity:o.prayerCapacity||"",sourceFunds:o.sourceFunds||0,servicesSpecialNeeds:o.servicesSpecialNeeds||!1,specialEntranceWomen:o.specialEntranceWomen||!1,picturePath:o.picturePath||""},b.value=o,oe.value=!0,console.log("editMosque.value عند التعديل:",u.value)},ml=async o=>{b.value=o,ge.value=!0,await Je(o.mosqueID)},we=async()=>{b.value&&await Je(b.value.mosqueID)},Je=async o=>{z.value=!0;try{const e=await w(`/Mosque/${o}`);if(e&&e.data){const n=e.data.buildingId;if(n){const l=await w(`/BuildingDetail/filter?BuildingId=${n}&PageSize=100&PageNumber=1`);l&&l.data?N.value=l.data.items||[]:N.value=[]}else N.value=[]}else N.value=[]}catch(e){console.error("Error loading building details:",e),c.value="حدث خطأ أثناء تحميل تفاصيل المبنى",p.value="error",f.value=!0,N.value=[]}finally{z.value=!1}},vl=o=>{b.value=o,R.value=!0},fl=()=>{i.value.openingDate=M(),i.value.constructionDate=M(),te.value=!0},cl=()=>{i.value={name:"",regionId:"",officeId:"",fileNumber:"",definition:"",classification:"",unit:"",nearestLandmark:"",mapLocation:"",sanitation:"",electricityMeter:"",alternativeEnergySource:"",waterSource:"",briefDescription:"",totalCoveredArea:0,totalLandArea:0,numberOfFloors:1,openingDate:M(),constructionDate:M(),mosqueDefinition:0,mosqueClassification:0,landDonorName:"",prayerCapacity:"",sourceFunds:0,servicesSpecialNeeds:!1,specialEntranceWomen:!1,picturePath:""}},Ke=async()=>{var e,n,l;if(!Ne.value)return;if(!await Ne.value.validate()){c.value="يرجى ملء جميع الحقول المطلوبة",p.value="warning",f.value=!0;return}try{const m=await w(`/Mosque/${(e=b.value)==null?void 0:e.mosqueID}`);if(!m||!m.data){c.value="لم يتم العثور على المسجد",p.value="error",f.value=!0;return}const y=m.data.buildingId;if(!y){c.value="لم يتم العثور على المبنى المرتبط بالمسجد",p.value="error",f.value=!0;return}const x=await w("/BuildingDetail",{method:"POST",body:{name:S.value.name,buildingId:y,floors:S.value.floors,withinMosqueArea:S.value.withinMosqueArea,buildingCategory:S.value.buildingCategory}});if(x&&x.isSuccess===!1){const F=x.message||((l=(n=x.errors)==null?void 0:n[0])==null?void 0:l.errorMessage)||"حدث خطأ أثناء إضافة تفصيل المبنى";c.value=F,p.value="error",f.value=!0;return}Ae(),await we(),c.value="تم إضافة تفصيل المبنى بنجاح",p.value="success",f.value=!0}catch(m){console.error("Error adding building detail:",m),c.value="حدث خطأ أثناء إضافة تفصيل المبنى",p.value="error",f.value=!0}},pl=async o=>{var e,n;try{const l=await w(`/BuildingDetail/${o}`,{method:"DELETE"});if(l&&l.isSuccess===!1){const m=l.message||((n=(e=l.errors)==null?void 0:e[0])==null?void 0:n.errorMessage)||"حدث خطأ أثناء حذف تفصيل المبنى";c.value=m,p.value="error",f.value=!0;return}b.value&&await we(),c.value="تم حذف تفصيل المبنى بنجاح",p.value="success",f.value=!0}catch(l){console.error("Error deleting building detail:",l),c.value="حدث خطأ أثناء حذف تفصيل المبنى",p.value="error",f.value=!0}},Ye=()=>{ye.value=!0},Ae=()=>{ye.value=!1,S.value={name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}},gl=async()=>{if(b.value){z.value=!0;try{const o=await w(`/Mosque/${b.value.mosqueID}`);if(o&&o.data){const e=o.data.buildingId;if(e){const n=await w(`/BuildingDetail/filter?BuildingId=${e}&SearchTerm=${De.value}&PageSize=100&PageNumber=1`);n&&n.data?N.value=n.data.items||[]:N.value=[]}else N.value=[]}else N.value=[]}catch(o){console.error("Error searching building details:",o),c.value="حدث خطأ أثناء البحث في تفاصيل المبنى",p.value="error",f.value=!0,N.value=[]}finally{z.value=!1}}},yl=async()=>{De.value="",await we()},bl=async o=>{let e="";o.buildingCategory===0||o.buildingCategory==="Facility"?e="Facility":(o.buildingCategory===1||o.buildingCategory,e="Endowment"),q.value={id:o.id,name:o.name,floors:o.floors,withinMosqueArea:o.withinMosqueArea,buildingCategory:e},W.value=o,be.value=!0},Ee=()=>{be.value=!1,W.value=null,q.value={id:"",name:"",floors:1,withinMosqueArea:!0,buildingCategory:"Endowment"}},Ze=async()=>{var e,n;if(!Fe.value)return;if(!await Fe.value.validate()){c.value="يرجى ملء جميع الحقول المطلوبة",p.value="warning",f.value=!0;return}try{const l=await w(`/BuildingDetail/${q.value.id}`,{method:"PUT",body:{id:q.value.id,name:q.value.name,floors:q.value.floors,withinMosqueArea:q.value.withinMosqueArea,buildingCategory:q.value.buildingCategory}});if(l&&l.isSuccess===!1){const m=l.message||((n=(e=l.errors)==null?void 0:e[0])==null?void 0:n.errorMessage)||"حدث خطأ أثناء تحديث تفصيل المبنى";c.value=m,p.value="error",f.value=!0;return}Ee(),await we(),c.value="تم تحديث تفصيل المبنى بنجاح",p.value="success",f.value=!0}catch(l){console.error("Error updating building detail:",l),c.value="حدث خطأ أثناء تحديث تفصيل المبنى",p.value="error",f.value=!0}},ue=d(!1),ie=d(null),X=d([]),Le=d(!1),xe=async o=>{Le.value=!0;try{const e=await w(`/BuildingDetail/${o.id}`);if(!e||!e.data){X.value=[];return}const n=await w(`/FacilityDetail/filter?BuildingDetailId=${o.id}&PageSize=100&searchTerm=`);n&&n.data&&n.data.items?X.value=n.data.items:X.value=[]}catch{X.value=[]}finally{Le.value=!1}},Vl=async o=>{W.value=o,ie.value=o,ue.value=!0,await xe(o)};al(Ve,()=>{k.value.page=1,O()},{immediate:!1}),al([()=>k.value.page,()=>k.value.itemsPerPage],()=>{O()},{immediate:!1}),Ml(()=>{O(),Qe(),Ge()});const ne=d(!1),Q=d({productId:"",quantity:1}),Pe=d(!1),re=d([]),Ce=d(!1),_e=async()=>{Ce.value=!0;try{const o=await w("/Product/GetProducts");if(o&&o.data){const e=o.data.data||o.data||[];re.value=e.map(n=>({...n,name:n.name||n.productName||n.title||n.id}))}else re.value=[]}catch{re.value=[]}finally{Ce.value=!1}},Dl=async()=>{Q.value={productId:"",quantity:1},await _e(),ne.value=!0},wl=()=>{ne.value=!1},he=async()=>{if(W.value){Pe.value=!0;try{await w("/FacilityDetail",{method:"POST",body:{buildingDetailId:W.value.id||W.value.Id,productId:Q.value.productId,quantity:Q.value.quantity}}),ne.value=!1,await xe(W.value),J("تمت إضافة المادة بنجاح","success")}catch{J("حدث خطأ أثناء إضافة المادة","error")}finally{Pe.value=!1}}},se=d(!1),de=d(null),Be=d(!1),xl=o=>{de.value=o,se.value=!0},Cl=()=>{se.value=!1,de.value=null},ql=async()=>{if(de.value){Be.value=!0;try{await w(`/FacilityDetail/${de.value.id||de.value.Id}`,{method:"DELETE"}),se.value=!1,await xe(ie.value),J("تم حذف المادة بنجاح","success")}catch{J("حدث خطأ أثناء حذف المادة","error")}finally{Be.value=!1}}},me=d(!1),P=d({id:"",productId:"",quantity:1}),$e=d(!1),kl=async o=>{await _e(),P.value={id:o.id||o.Id,productId:o.productId||o.ProductId,quantity:o.quantity||o.Quantity||1},me.value=!0},Il=()=>{me.value=!1,P.value={id:"",productId:"",quantity:1}},el=async()=>{$e.value=!0;try{await w(`/FacilityDetail/${P.value.id}`,{method:"PUT",body:{id:P.value.id,productId:P.value.productId,quantity:P.value.quantity}}),me.value=!1,await xe(ie.value),J("تم تعديل المادة بنجاح","success")}catch{J("حدث خطأ أثناء تعديل المادة","error")}finally{$e.value=!1}},qe=d(""),Sl=Nl(()=>{if(!qe.value)return X.value;const o=qe.value.toLowerCase();return X.value.filter(e=>{var x;const n=((x=e.product)==null?void 0:x.name)||e.productName||"",l=String(e.id||e.Id||""),m=String(e.productId||e.ProductId||""),y=String(e.quantity??e.Quantity??"");return n.toLowerCase().includes(o)||l.includes(o)||m.includes(o)||y.includes(o)})});function J(o,e="success"){c.value=o,p.value=e,f.value=!0}return(o,e)=>{const n=Fl("IconBtn");return L(),Ie("div",null,[a(Al,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=l=>f.value=l),type:p.value,variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[s(D(c.value),1)]),_:1},8,["modelValue","type"]),a(E,null,{default:t(()=>[a(A,{class:"d-flex justify-space-between align-center pa-6"},{default:t(()=>[e[76]||(e[76]=g("span",{class:"text-h5"},"إدارة المساجد",-1)),g("div",Bl,[j.value.length>0?(L(),G(V,{key:0,color:"error",variant:"outlined",onClick:sl},{default:t(()=>[s(" حذف المحدد ("+D(j.value.length)+") ",1)]),_:1})):Se("",!0),a(V,{color:"primary",onClick:fl},{default:t(()=>e[75]||(e[75]=[s(" إضافة مسجد ")])),_:1})])]),_:1}),a(El),a(I,null,{default:t(()=>[a(H,null,{default:t(()=>[a(r,{cols:"12","offset-md":"8",md:"4"},{default:t(()=>[a(v,{modelValue:Ve.value,"onUpdate:modelValue":e[1]||(e[1]=l=>Ve.value=l),placeholder:"البحث في المساجد...","prepend-inner-icon":"mdi-magnify","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),a(ze,{headers:il,items:Ue.value,loading:Me.value,"items-per-page":k.value.itemsPerPage,page:k.value.page,options:k.value,class:"text-no-wrap","show-select":"",modelValue:j.value,"onUpdate:modelValue":e[4]||(e[4]=l=>j.value=l)},{"item.mosqueName":t(({item:l})=>[g("div",$l,[a(tl,{size:"32",color:"primary",variant:"tonal"},{default:t(()=>[s(D(l.mosqueName.charAt(0).toUpperCase()),1)]),_:2},1024),g("div",Tl,[g("span",zl,D(l.mosqueName),1),g("small",Ol,D(l.briefDescription||"لا يوجد وصف"),1)])])]),"item.fileNumber":t(({item:l})=>[l.fileNumber?(L(),G(_,{key:0,color:"secondary",variant:"tonal",size:"small"},{default:t(()=>[s(D(l.fileNumber),1)]),_:2},1024)):(L(),Ie("span",Rl," لا يوجد رقم ملف "))]),"item.region":t(({item:l})=>[l.region?(L(),G(_,{key:0,color:"info",variant:"tonal",size:"small"},{default:t(()=>[s(D(l.region),1)]),_:2},1024)):(L(),Ie("span",Wl," لا توجد منطقة "))]),"item.office":t(({item:l})=>[l.office?(L(),G(_,{key:0,color:"success",variant:"tonal",size:"small"},{default:t(()=>[s(D(l.office),1)]),_:2},1024)):(L(),Ie("span",jl," لا يوجد مكتب "))]),"item.actions":t(({item:l})=>[g("div",Ql,[a(n,{onClick:m=>dl(l)},{default:t(()=>[a(C,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(Z,{text:"إدارة تفاصيل المبنى (منزل الإمام، المصلى، دورة المياه...)",location:"top"},{activator:t(({props:m})=>[a(n,K({onClick:y=>ml(l),color:"info"},m),{default:t(()=>[a(C,{icon:"tabler-building"})]),_:2},1040,["onClick"])]),_:2},1024),a(n,{onClick:m=>vl(l)},{default:t(()=>[a(C,{icon:"tabler-trash"})]),_:2},1032,["onClick"])])]),bottom:t(()=>[a(I,{class:"pt-2"},{default:t(()=>[g("div",Gl,[a(T,{modelValue:k.value.itemsPerPage,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value.itemsPerPage=l),items:[5,10,25,50,100],label:"عناصر في الصفحة:",variant:"underlined",style:{"max-inline-size":"8rem","min-inline-size":"5rem"}},null,8,["modelValue"]),a(Ll,{modelValue:k.value.page,"onUpdate:modelValue":e[3]||(e[3]=l=>k.value.page=l),"total-visible":o.$vuetify.display.smAndDown?3:5,length:Math.ceil(pe.value/k.value.itemsPerPage)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1},8,["items","loading","items-per-page","page","options","modelValue"])]),_:1})]),_:1}),a($,{modelValue:te.value,"onUpdate:modelValue":e[26]||(e[26]=l=>te.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[77]||(e[77]=[s("إضافة مسجد جديد")])),_:1}),a(I,null,{default:t(()=>[a(h,{onSubmit:Y(He,["prevent"])},{default:t(()=>[a(H,null,{default:t(()=>[a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.name,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value.name=l),label:"اسم المسجد",variant:"outlined",required:"",rules:[l=>!!l||"اسم المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.fileNumber,"onUpdate:modelValue":e[6]||(e[6]=l=>i.value.fileNumber=l),label:"رقم الملف",variant:"outlined",required:"",rules:[l=>!!l||"رقم الملف مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(ee,{modelValue:i.value.regionId,"onUpdate:modelValue":e[7]||(e[7]=l=>i.value.regionId=l),label:"المنطقة",variant:"outlined",items:le.value,"item-title":"name","item-value":"id",loading:fe.value,clearable:"","no-data-text":"لا توجد مناطق متاحة",required:"",rules:[l=>!!l||"المنطقة مطلوبة"],"prepend-inner-icon":"mdi-map",placeholder:"اختر المنطقة...","hide-no-data":""},null,8,["modelValue","items","loading","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(ee,{modelValue:i.value.officeId,"onUpdate:modelValue":e[8]||(e[8]=l=>i.value.officeId=l),label:"المكتب",variant:"outlined",items:ae.value,"item-title":"name","item-value":"id",loading:ce.value,clearable:"","no-data-text":"لا توجد مكاتب متاحة",required:"",rules:[l=>!!l||"المكتب مطلوب"],"prepend-inner-icon":"mdi-office-building",placeholder:"اختر المكتب...","hide-no-data":""},null,8,["modelValue","items","loading","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.unit,"onUpdate:modelValue":e[9]||(e[9]=l=>i.value.unit=l),label:"الوحدة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.nearestLandmark,"onUpdate:modelValue":e[10]||(e[10]=l=>i.value.nearestLandmark=l),label:"أقرب معلم",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.mapLocation,"onUpdate:modelValue":e[11]||(e[11]=l=>i.value.mapLocation=l),label:"موقع الخريطة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.electricityMeter,"onUpdate:modelValue":e[12]||(e[12]=l=>i.value.electricityMeter=l),label:"عداد الكهرباء",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.alternativeEnergySource,"onUpdate:modelValue":e[13]||(e[13]=l=>i.value.alternativeEnergySource=l),label:"مصدر الطاقة البديل",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.waterSource,"onUpdate:modelValue":e[14]||(e[14]=l=>i.value.waterSource=l),label:"مصدر المياه",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.sanitation,"onUpdate:modelValue":e[15]||(e[15]=l=>i.value.sanitation=l),label:"الصرف الصحي",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.totalLandArea,"onUpdate:modelValue":e[16]||(e[16]=l=>i.value.totalLandArea=l),label:"إجمالي مساحة الأرض",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.totalCoveredArea,"onUpdate:modelValue":e[17]||(e[17]=l=>i.value.totalCoveredArea=l),label:"إجمالي المساحة المغطاة",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.numberOfFloors,"onUpdate:modelValue":e[18]||(e[18]=l=>i.value.numberOfFloors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.openingDate,"onUpdate:modelValue":e[19]||(e[19]=l=>i.value.openingDate=l),label:"تاريخ الافتتاح",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ الافتتاح مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:i.value.constructionDate,"onUpdate:modelValue":e[20]||(e[20]=l=>i.value.constructionDate=l),label:"تاريخ البناء",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ البناء مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:i.value.mosqueDefinition,"onUpdate:modelValue":e[21]||(e[21]=l=>i.value.mosqueDefinition=l),label:"تعريف المسجد",variant:"outlined",items:Oe,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تعريف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:i.value.mosqueClassification,"onUpdate:modelValue":e[22]||(e[22]=l=>i.value.mosqueClassification=l),label:"تصنيف المسجد",variant:"outlined",items:Re,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تصنيف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:i.value.sourceFunds,"onUpdate:modelValue":e[23]||(e[23]=l=>i.value.sourceFunds=l),label:"مصدر التمويل",variant:"outlined",items:We,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"مصدر التمويل مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12"},{default:t(()=>[a(ol,{modelValue:i.value.briefDescription,"onUpdate:modelValue":e[24]||(e[24]=l=>i.value.briefDescription=l),label:"وصف مختصر",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:e[25]||(e[25]=l=>te.value=!1)},{default:t(()=>e[78]||(e[78]=[s(" إلغاء ")])),_:1}),a(V,{color:"primary",variant:"flat",onClick:He},{default:t(()=>e[79]||(e[79]=[s(" حفظ ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:oe.value,"onUpdate:modelValue":e[48]||(e[48]=l=>oe.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[80]||(e[80]=[s("تعديل المسجد")])),_:1}),a(I,null,{default:t(()=>[a(h,{onSubmit:Y(Xe,["prevent"])},{default:t(()=>[a(H,null,{default:t(()=>[a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.name,"onUpdate:modelValue":e[27]||(e[27]=l=>u.value.name=l),label:"اسم المسجد",variant:"outlined",required:"",rules:[l=>!!l||"اسم المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.fileNumber,"onUpdate:modelValue":e[28]||(e[28]=l=>u.value.fileNumber=l),label:"رقم الملف",variant:"outlined",required:"",rules:[l=>!!l||"رقم الملف مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(ee,{modelValue:u.value.regionId,"onUpdate:modelValue":e[29]||(e[29]=l=>u.value.regionId=l),label:"المنطقة",variant:"outlined",items:le.value,"item-title":"name","item-value":"id",loading:fe.value,clearable:"","no-data-text":"لا توجد مناطق متاحة",required:"",rules:[l=>!!l||"المنطقة مطلوبة"],"prepend-inner-icon":"mdi-map",placeholder:"اختر المنطقة...","hide-no-data":""},null,8,["modelValue","items","loading","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(ee,{modelValue:u.value.officeId,"onUpdate:modelValue":e[30]||(e[30]=l=>u.value.officeId=l),label:"المكتب",variant:"outlined",items:ae.value,"item-title":"name","item-value":"id",loading:ce.value,clearable:"","no-data-text":"لا توجد مكاتب متاحة",required:"",rules:[l=>!!l||"المكتب مطلوب"],"prepend-inner-icon":"mdi-office-building",placeholder:"اختر المكتب...","hide-no-data":""},null,8,["modelValue","items","loading","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.unit,"onUpdate:modelValue":e[31]||(e[31]=l=>u.value.unit=l),label:"الوحدة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.nearestLandmark,"onUpdate:modelValue":e[32]||(e[32]=l=>u.value.nearestLandmark=l),label:"أقرب معلم",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.mapLocation,"onUpdate:modelValue":e[33]||(e[33]=l=>u.value.mapLocation=l),label:"موقع الخريطة",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.electricityMeter,"onUpdate:modelValue":e[34]||(e[34]=l=>u.value.electricityMeter=l),label:"عداد الكهرباء",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.alternativeEnergySource,"onUpdate:modelValue":e[35]||(e[35]=l=>u.value.alternativeEnergySource=l),label:"مصدر الطاقة البديل",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.waterSource,"onUpdate:modelValue":e[36]||(e[36]=l=>u.value.waterSource=l),label:"مصدر المياه",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.sanitation,"onUpdate:modelValue":e[37]||(e[37]=l=>u.value.sanitation=l),label:"الصرف الصحي",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.totalLandArea,"onUpdate:modelValue":e[38]||(e[38]=l=>u.value.totalLandArea=l),label:"إجمالي مساحة الأرض",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.totalCoveredArea,"onUpdate:modelValue":e[39]||(e[39]=l=>u.value.totalCoveredArea=l),label:"إجمالي المساحة المغطاة",variant:"outlined",type:"number",step:"0.01"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.numberOfFloors,"onUpdate:modelValue":e[40]||(e[40]=l=>u.value.numberOfFloors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.openingDate,"onUpdate:modelValue":e[41]||(e[41]=l=>u.value.openingDate=l),label:"تاريخ الافتتاح",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ الافتتاح مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:u.value.constructionDate,"onUpdate:modelValue":e[42]||(e[42]=l=>u.value.constructionDate=l),label:"تاريخ البناء",variant:"outlined",type:"date",required:"",rules:[l=>!!l||"تاريخ البناء مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:u.value.mosqueDefinition,"onUpdate:modelValue":e[43]||(e[43]=l=>u.value.mosqueDefinition=l),label:"تعريف المسجد",variant:"outlined",items:Oe,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تعريف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:u.value.mosqueClassification,"onUpdate:modelValue":e[44]||(e[44]=l=>u.value.mosqueClassification=l),label:"تصنيف المسجد",variant:"outlined",items:Re,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"تصنيف المسجد مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:u.value.sourceFunds,"onUpdate:modelValue":e[45]||(e[45]=l=>u.value.sourceFunds=l),label:"مصدر التمويل",variant:"outlined",items:We,"item-title":"label","item-value":"value",required:"",rules:[l=>l!==null||"مصدر التمويل مطلوب"]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12"},{default:t(()=>[a(ol,{modelValue:u.value.briefDescription,"onUpdate:modelValue":e[46]||(e[46]=l=>u.value.briefDescription=l),label:"وصف مختصر",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:e[47]||(e[47]=l=>oe.value=!1)},{default:t(()=>e[81]||(e[81]=[s(" إلغاء ")])),_:1}),a(V,{color:"primary",variant:"flat",onClick:Xe},{default:t(()=>e[82]||(e[82]=[s(" تحديث ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:R.value,"onUpdate:modelValue":e[50]||(e[50]=l=>R.value=l),"max-width":"400px"},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[83]||(e[83]=[s("تأكيد الحذف")])),_:1}),a(I,null,{default:t(()=>{var l;return[e[84]||(e[84]=s(' هل أنت متأكد من حذف المسجد "')),g("strong",null,D((l=b.value)==null?void 0:l.mosqueName),1),e[85]||(e[85]=s('"؟ ')),e[86]||(e[86]=g("br",null,null,-1)),e[87]||(e[87]=g("span",{class:"text-error"},"لا يمكن التراجع عن هذا الإجراء.",-1))]}),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:e[49]||(e[49]=l=>R.value=!1)},{default:t(()=>e[88]||(e[88]=[s(" إلغاء ")])),_:1}),a(V,{color:"error",variant:"flat",onClick:rl},{default:t(()=>e[89]||(e[89]=[s(" حذف ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:ge.value,"onUpdate:modelValue":e[53]||(e[53]=l=>ge.value=l),"max-width":"1000px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>{var l;return[s(" تفاصيل المبنى - "+D((l=b.value)==null?void 0:l.mosqueName),1)]}),_:1}),a(I,null,{default:t(()=>[a(E,{variant:"outlined"},{default:t(()=>[a(A,{class:"text-h6 d-flex justify-space-between align-center"},{default:t(()=>[e[91]||(e[91]=s(" تفاصيل المبنى الحالية ")),a(V,{color:"primary",variant:"flat",size:"small",onClick:Ye,"prepend-icon":"tabler-plus",disabled:z.value},{default:t(()=>e[90]||(e[90]=[s(" إضافة تفصيل جديد ")])),_:1},8,["disabled"])]),_:1}),a(I,null,{default:t(()=>[a(H,{class:"mb-4"},{default:t(()=>[a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:De.value,"onUpdate:modelValue":[e[51]||(e[51]=l=>De.value=l),gl],label:"البحث في تفاصيل المبنى",variant:"outlined",density:"compact","prepend-inner-icon":"tabler-search",clearable:"","onClick:clear":yl,placeholder:"ابحث عن اسم المبنى..."},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"6",class:"d-flex align-center"},{default:t(()=>[a(_,{color:"info",variant:"tonal",size:"small",class:"me-2"},{default:t(()=>[s(D(N.value.length)+" تفصيل ",1)]),_:1})]),_:1})]),_:1}),a(ze,{headers:nl,items:N.value,loading:z.value,"items-per-page":10,class:"text-no-wrap","no-data-text":"لا توجد تفاصيل مبنى"},{"no-data":t(()=>[g("div",Hl,[a(C,{icon:"tabler-building-off",size:"48",color:"grey",class:"mb-4"}),e[93]||(e[93]=g("div",{class:"text-h6 text-medium-emphasis mb-2"},"لا توجد تفاصيل مبنى",-1)),e[94]||(e[94]=g("div",{class:"text-body-2 text-medium-emphasis mb-4"}," لم يتم إضافة أي تفاصيل مبنى لهذا المسجد بعد ",-1)),a(V,{color:"primary",variant:"outlined",size:"small",onClick:Ye,"prepend-icon":"tabler-plus"},{default:t(()=>e[92]||(e[92]=[s(" إضافة أول تفصيل ")])),_:1})])]),"item.name":t(({item:l})=>[g("div",Xl,[a(tl,{size:"32",color:"info",variant:"tonal"},{default:t(()=>[s(D(l.name.charAt(0).toUpperCase()),1)]),_:2},1024),g("div",Jl,[g("span",Kl,D(l.name),1),g("small",Yl,D(l.floors)+" طابق",1)])])]),"item.buildingCategory":t(({item:l})=>[a(_,{color:l.buildingCategory==="Facility"?"success":"warning",variant:"tonal",size:"small"},{default:t(()=>[s(D(l.buildingCategory==="Facility"?"منشأة":"وقف"),1)]),_:2},1032,["color"])]),"item.withinMosqueArea":t(({item:l})=>[a(_,{color:l.withinMosqueArea?"success":"error",variant:"tonal",size:"small"},{default:t(()=>[s(D(l.withinMosqueArea?"داخل المسجد":"خارج المسجد"),1)]),_:2},1032,["color"])]),"item.actions":t(({item:l})=>[g("div",Zl,[a(Z,{text:"تعديل تفصيل المبنى",location:"top"},{activator:t(({props:m})=>[a(n,K({onClick:y=>bl(l),color:"info"},m),{default:t(()=>[a(C,{icon:"tabler-edit"})]),_:2},1040,["onClick"])]),_:2},1024),a(Z,{text:"حذف تفصيل المبنى",location:"top"},{activator:t(({props:m})=>[a(n,K({onClick:y=>pl(l.id),color:"error"},m),{default:t(()=>[a(C,{icon:"tabler-trash"})]),_:2},1040,["onClick"])]),_:2},1024),a(Z,{text:"إدارة المواد",location:"top"},{activator:t(({props:m})=>[a(n,K({onClick:y=>Vl(l),color:"primary"},m),{default:t(()=>[a(C,{icon:"tabler-package"})]),_:2},1040,["onClick"])]),_:2},1024)])]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:e[52]||(e[52]=l=>ge.value=!1)},{default:t(()=>e[95]||(e[95]=[s(" إغلاق ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:ye.value,"onUpdate:modelValue":e[58]||(e[58]=l=>ye.value=l),"max-width":"600px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(C,{icon:"tabler-building-plus",class:"me-2"}),e[96]||(e[96]=s(" إضافة تفصيل مبنى جديد ")),a(U),a(n,{onClick:Ae,size:"small"},{default:t(()=>[a(C,{icon:"tabler-x"})]),_:1})]),_:1}),b.value?(L(),G(Te,{key:0,class:"text-medium-emphasis"},{default:t(()=>[s(" للمسجد: "+D(b.value.mosqueName),1)]),_:1})):Se("",!0),a(I,null,{default:t(()=>[a(h,{onSubmit:Y(Ke,["prevent"]),ref_key:"addBuildingDetailForm",ref:Ne},{default:t(()=>[a(H,null,{default:t(()=>[a(r,{cols:"12"},{default:t(()=>[a(v,{modelValue:S.value.name,"onUpdate:modelValue":e[54]||(e[54]=l=>S.value.name=l),label:"اسم المبنى",variant:"outlined",required:"",rules:[l=>!!l||"اسم المبنى مطلوب"],placeholder:"مثال: منزل الإمام، المصلى، دورة المياه...","prepend-inner-icon":"tabler-building",clearable:""},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:S.value.floors,"onUpdate:modelValue":e[55]||(e[55]=l=>S.value.floors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1",max:"50",required:"",rules:[l=>!!l||"عدد الطوابق مطلوب",l=>l>0||"عدد الطوابق يجب أن يكون أكبر من صفر"],"prepend-inner-icon":"tabler-layers"},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:S.value.buildingCategory,"onUpdate:modelValue":e[56]||(e[56]=l=>S.value.buildingCategory=l),label:"نوع المبنى",variant:"outlined",items:je,"item-title":"label","item-value":"value",required:"",rules:[l=>!!l||"نوع المبنى مطلوب"],"prepend-inner-icon":"tabler-category"},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12"},{default:t(()=>[a(ul,{modelValue:S.value.withinMosqueArea,"onUpdate:modelValue":e[57]||(e[57]=l=>S.value.withinMosqueArea=l),label:"داخل مساحة المسجد","hide-details":"",color:"primary",class:"mt-2"},null,8,["modelValue"]),a(I,{class:"text-caption text-medium-emphasis pa-0 mt-1"},{default:t(()=>[a(C,{icon:"tabler-info-circle",size:"small",class:"me-1"}),e[97]||(e[97]=s(" إذا كان المبنى داخل حدود المسجد أم خارجه "))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:Ae},{default:t(()=>e[98]||(e[98]=[s(" إلغاء ")])),_:1}),a(V,{color:"primary",variant:"flat",onClick:Ke,loading:z.value,"prepend-icon":"tabler-plus"},{default:t(()=>e[99]||(e[99]=[s(" إضافة ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:be.value,"onUpdate:modelValue":e[63]||(e[63]=l=>be.value=l),"max-width":"600px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(C,{icon:"tabler-building-edit",class:"me-2"}),e[100]||(e[100]=s(" تعديل تفصيل المبنى ")),a(U),a(n,{onClick:Ee,size:"small"},{default:t(()=>[a(C,{icon:"tabler-x"})]),_:1})]),_:1}),b.value?(L(),G(Te,{key:0,class:"text-medium-emphasis"},{default:t(()=>[s(" للمسجد: "+D(b.value.mosqueName),1)]),_:1})):Se("",!0),a(I,null,{default:t(()=>[a(h,{onSubmit:Y(Ze,["prevent"]),ref_key:"editBuildingDetailForm",ref:Fe},{default:t(()=>[a(H,null,{default:t(()=>[a(r,{cols:"12"},{default:t(()=>[a(v,{modelValue:q.value.name,"onUpdate:modelValue":e[59]||(e[59]=l=>q.value.name=l),label:"اسم المبنى",variant:"outlined",required:"",rules:[l=>!!l||"اسم المبنى مطلوب"],placeholder:"مثال: منزل الإمام، المصلى، دورة المياه...","prepend-inner-icon":"tabler-building",clearable:""},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(v,{modelValue:q.value.floors,"onUpdate:modelValue":e[60]||(e[60]=l=>q.value.floors=l),label:"عدد الطوابق",variant:"outlined",type:"number",min:"1",max:"50",required:"",rules:[l=>!!l||"عدد الطوابق مطلوب",l=>l>0||"عدد الطوابق يجب أن يكون أكبر من صفر"],"prepend-inner-icon":"tabler-layers"},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12",md:"6"},{default:t(()=>[a(T,{modelValue:q.value.buildingCategory,"onUpdate:modelValue":e[61]||(e[61]=l=>q.value.buildingCategory=l),label:"نوع المبنى",variant:"outlined",items:je,"item-title":"label","item-value":"value",required:"",rules:[l=>!!l||"نوع المبنى مطلوب"],"prepend-inner-icon":"tabler-category"},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12"},{default:t(()=>[a(ul,{modelValue:q.value.withinMosqueArea,"onUpdate:modelValue":e[62]||(e[62]=l=>q.value.withinMosqueArea=l),label:"داخل مساحة المسجد","hide-details":"",color:"primary",class:"mt-2"},null,8,["modelValue"]),a(I,{class:"text-caption text-medium-emphasis pa-0 mt-1"},{default:t(()=>[a(C,{icon:"tabler-info-circle",size:"small",class:"me-1"}),e[101]||(e[101]=s(" إذا كان المبنى داخل حدود المسجد أم خارجه "))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:Ee},{default:t(()=>e[102]||(e[102]=[s(" إلغاء ")])),_:1}),a(V,{color:"primary",variant:"flat",onClick:Ze,loading:z.value,"prepend-icon":"tabler-check"},{default:t(()=>e[103]||(e[103]=[s(" تحديث ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:ue.value,"onUpdate:modelValue":e[67]||(e[67]=l=>ue.value=l),"max-width":"800px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6 d-flex align-center"},{default:t(()=>[a(C,{icon:"tabler-package",class:"me-2"}),e[104]||(e[104]=s(" إدارة المواد المرتبطة بالمبنى ")),a(U),a(n,{onClick:e[64]||(e[64]=l=>ue.value=!1),size:"small"},{default:t(()=>[a(C,{icon:"tabler-x"})]),_:1})]),_:1}),ie.value?(L(),G(Te,{key:0,class:"text-medium-emphasis"},{default:t(()=>[s(" للمبنى: "+D(ie.value.name),1)]),_:1})):Se("",!0),a(I,null,{default:t(()=>[g("div",_l,[a(C,{icon:"tabler-package",size:"48",class:"mb-2"}),e[105]||(e[105]=g("div",null,"هنا سيتم عرض وإدارة المواد (Products) المرتبطة بهذا المبنى.",-1))]),g("div",hl,[a(V,{color:"primary",onClick:Dl,"prepend-icon":"tabler-plus"},{default:t(()=>e[106]||(e[106]=[s("إضافة مادة جديدة")])),_:1})]),a(v,{modelValue:qe.value,"onUpdate:modelValue":e[65]||(e[65]=l=>qe.value=l),label:"بحث في المواد...","prepend-inner-icon":"tabler-search",clearable:"",class:"mb-2"},null,8,["modelValue"]),a(ze,{headers:[{title:"اسم المادة",key:"productName",sortable:!0},{title:"الكمية",key:"quantity",sortable:!0},{title:"الإجراءات",key:"actions",sortable:!1,width:"80px"}],items:Sl.value,loading:Le.value,"items-per-page":10,class:"text-no-wrap","no-data-text":"لا توجد مواد مرتبطة بهذا المبنى"},{"item.productName":t(({item:l})=>{var m;return[g("span",null,D(l.productName||((m=l.product)==null?void 0:m.name)||"---"),1)]}),"item.quantity":t(({item:l})=>[g("span",null,D(l.quantity??l.Quantity??0),1)]),"item.actions":t(({item:l})=>[g("div",ea,[a(Z,{text:"تعديل المادة",location:"top"},{activator:t(({props:m})=>[a(n,K({onClick:y=>kl(l),color:"info"},m),{default:t(()=>[a(C,{icon:"tabler-edit"})]),_:2},1040,["onClick"])]),_:2},1024),a(Z,{text:"حذف المادة",location:"top"},{activator:t(({props:m})=>[a(n,K({onClick:y=>xl(l),color:"error"},m),{default:t(()=>[a(C,{icon:"tabler-trash"})]),_:2},1040,["onClick"])]),_:2},1024)])]),_:1},8,["items","loading"])]),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:e[66]||(e[66]=l=>ue.value=!1)},{default:t(()=>e[107]||(e[107]=[s(" إغلاق ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:ne.value,"onUpdate:modelValue":e[70]||(e[70]=l=>ne.value=l),"max-width":"500px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[108]||(e[108]=[s("إضافة مادة جديدة")])),_:1}),a(I,null,{default:t(()=>[a(h,{onSubmit:Y(he,["prevent"])},{default:t(()=>[a(ee,{modelValue:Q.value.productId,"onUpdate:modelValue":e[68]||(e[68]=l=>Q.value.productId=l),items:re.value,loading:Ce.value,"item-title":"value","item-value":"key",label:"اختر المادة",required:"",clearable:"","no-data-text":"لا توجد مواد متاحة",placeholder:"اختر المادة..."},null,8,["modelValue","items","loading"]),a(v,{modelValue:Q.value.quantity,"onUpdate:modelValue":e[69]||(e[69]=l=>Q.value.quantity=l),label:"الكمية",type:"number",min:"1",required:""},null,8,["modelValue"])]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:wl},{default:t(()=>e[109]||(e[109]=[s("إلغاء")])),_:1}),a(V,{color:"primary",variant:"flat",onClick:he,loading:Pe.value},{default:t(()=>e[110]||(e[110]=[s("حفظ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:se.value,"onUpdate:modelValue":e[71]||(e[71]=l=>se.value=l),"max-width":"400px"},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h6"},{default:t(()=>e[111]||(e[111]=[s("تأكيد حذف المادة")])),_:1}),a(I,null,{default:t(()=>e[112]||(e[112]=[s(" هل أنت متأكد من حذف المادة؟ "),g("br",null,null,-1),g("span",{class:"text-error"},"لا يمكن التراجع عن هذا الإجراء.",-1)])),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"grey-darken-1",variant:"text",onClick:Cl},{default:t(()=>e[113]||(e[113]=[s("إلغاء")])),_:1}),a(V,{color:"error",variant:"flat",onClick:ql,loading:Be.value},{default:t(()=>e[114]||(e[114]=[s("حذف")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a($,{modelValue:me.value,"onUpdate:modelValue":e[74]||(e[74]=l=>me.value=l),"max-width":"600px",persistent:""},{default:t(()=>[a(E,null,{default:t(()=>[a(A,{class:"text-h5"},{default:t(()=>e[115]||(e[115]=[s("تعديل المادة")])),_:1}),a(I,null,{default:t(()=>[a(h,{onSubmit:Y(el,["prevent"])},{default:t(()=>[a(H,null,{default:t(()=>[a(r,{cols:"12"},{default:t(()=>[a(ee,{modelValue:P.value.productId,"onUpdate:modelValue":e[72]||(e[72]=l=>P.value.productId=l),items:re.value,"item-title":"name","item-value":"id",label:"المادة",loading:Ce.value,rules:[l=>!!l||"المادة مطلوبة"],required:"",clearable:"","no-data-text":"لا توجد مواد متاحة"},null,8,["modelValue","items","loading","rules"])]),_:1}),a(r,{cols:"12"},{default:t(()=>[a(v,{modelValue:P.value.quantity,"onUpdate:modelValue":e[73]||(e[73]=l=>P.value.quantity=l),label:"الكمية",type:"number",min:"1",rules:[l=>!!l||"الكمية مطلوبة",l=>l>0||"الكمية يجب أن تكون أكبر من صفر"],required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),a(B,null,{default:t(()=>[a(U),a(V,{color:"error",onClick:Il},{default:t(()=>e[116]||(e[116]=[s("إلغاء")])),_:1}),a(V,{color:"primary",loading:$e.value,onClick:el},{default:t(()=>e[117]||(e[117]=[s(" حفظ ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Xa=Pl(la,[["__scopeId","data-v-fba14d3a"]]);export{Xa as default};
