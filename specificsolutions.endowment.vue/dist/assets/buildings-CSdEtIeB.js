import{aZ as Z,r as u,D as G,c as H,o as J,b as l,e as o,d as K,aa as r,s as d,V as T,aV as q}from"./index-B2yH2wlm.js";import{$ as s}from"./api-Yee635Cw.js";import{b as f,V as g,d as w}from"./VCard-CbXeyWRM.js";import{V as y}from"./VCardText-D3qn0xVt.js";import{V as Q}from"./VDataTable-xmUF_rxc.js";import{V as A}from"./VForm-VUeSLNI1.js";import{V as b}from"./VTextField-Bsi5YaIU.js";import{V as C}from"./VSelect-Djzs4lEs.js";import{V as S}from"./VTextarea-BOmbQ_dF.js";import{V as I}from"./VSpacer-DK1R1B3V.js";import{V as U}from"./VDialog-B5IthHHF.js";import"./index-9rIf2CJL.js";import"./VAvatar-CShMG6gm.js";import"./VImg-LCEu9fG5.js";import"./VPagination-D22GyUdV.js";import"./VCheckboxBtn-BIPGNd9w.js";import"./VSelectionControl-BRBkIS9Q.js";import"./form-CrJ5wAnD.js";import"./VChip-zFsRdrE0.js";import"./VSlideGroup-xF0vztaY.js";import"./VTable-BeF_b8U_.js";import"./filter-CiRrM1UE.js";import"./VDivider-IJOr89EA.js";import"./forwardRefs-C-GTDzx5.js";/* empty css                   */import"./VCounter-D0OrblNh.js";import"./VField-BS4jWEZX.js";import"./easing-CjukEv2V.js";import"./VInput-BBUwaJU8.js";import"./VList-BP_s4Rd6.js";import"./ssrBoot-BM3_9gcl.js";import"./dialog-transition-B1F2T2U2.js";import"./VMenu-sVHB4BSf.js";import"./VOverlay-DatZLL7h.js";import"./delay-D2xRnafG.js";import"./lazy-CIM2OltQ.js";import"./scopeId-Bz1iMFsM.js";/* empty css              */const Se=Z({__name:"buildings",setup(W){const D=u([]),k=u(!1),m=u(!1),p=u(!1),v=u(!1),E=u(null),n=u({name:"",address:"",cityId:null,regionId:null,description:""}),a=u({id:null,name:"",address:"",cityId:null,regionId:null,description:""}),B=u([]),x=u([]),R=[{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Address",key:"address"},{title:"City",key:"cityName"},{title:"Region",key:"regionName"},{title:"Actions",key:"actions",sortable:!1}],V=async()=>{k.value=!0;try{const i=await s("/Buildings");D.value=i}catch(i){console.error("Error loading buildings:",i)}finally{k.value=!1}},M=async()=>{try{const i=await s("/Cities");B.value=i}catch(i){console.error("Error loading cities:",i)}},z=async()=>{try{const i=await s("/Regions");x.value=i}catch(i){console.error("Error loading regions:",i)}},N=async()=>{try{await s("/Buildings",{method:"POST",body:n.value}),m.value=!1,L(),V()}catch(i){console.error("Error adding building:",i)}},$=async()=>{try{await s(`/Buildings/${a.value.id}`,{method:"PUT",body:a.value}),p.value=!1,V()}catch(i){console.error("Error updating building:",i)}},F=async()=>{try{await s(`/Buildings/${E.value.id}`,{method:"DELETE"}),v.value=!1,V()}catch(i){console.error("Error deleting building:",i)}},P=i=>{a.value={...i},p.value=!0},j=i=>{E.value=i,v.value=!0},L=()=>{n.value={name:"",address:"",cityId:null,regionId:null,description:""}};return G(()=>{V(),M(),z()}),(i,e)=>(J(),H("div",null,[l(g,null,{default:o(()=>[l(f,{class:"d-flex justify-space-between align-center"},{default:o(()=>[e[18]||(e[18]=K("span",null,"Buildings Management",-1)),l(r,{color:"primary",onClick:e[0]||(e[0]=t=>m.value=!0)},{default:o(()=>e[17]||(e[17]=[d(" Add Building ")])),_:1})]),_:1}),l(y,null,{default:o(()=>[l(Q,{headers:R,items:D.value,loading:k.value,class:"elevation-1"},{"item.actions":o(({item:t})=>[l(r,{icon:"",size:"small",color:"primary",onClick:O=>P(t)},{default:o(()=>[l(T,null,{default:o(()=>e[19]||(e[19]=[d("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),l(r,{icon:"",size:"small",color:"error",onClick:O=>j(t)},{default:o(()=>[l(T,null,{default:o(()=>e[20]||(e[20]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items","loading"])]),_:1})]),_:1}),l(U,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=t=>m.value=t),"max-width":"600px"},{default:o(()=>[l(g,null,{default:o(()=>[l(f,null,{default:o(()=>e[21]||(e[21]=[d("Add New Building")])),_:1}),l(y,null,{default:o(()=>[l(A,{onSubmit:q(N,["prevent"])},{default:o(()=>[l(b,{modelValue:n.value.name,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.name=t),label:"Building Name",required:""},null,8,["modelValue"]),l(b,{modelValue:n.value.address,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value.address=t),label:"Address",required:""},null,8,["modelValue"]),l(C,{modelValue:n.value.cityId,"onUpdate:modelValue":e[3]||(e[3]=t=>n.value.cityId=t),items:B.value,"item-title":"name","item-value":"id",label:"City",required:""},null,8,["modelValue","items"]),l(C,{modelValue:n.value.regionId,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.regionId=t),items:x.value,"item-title":"name","item-value":"id",label:"Region",required:""},null,8,["modelValue","items"]),l(S,{modelValue:n.value.description,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value.description=t),label:"Description"},null,8,["modelValue"])]),_:1})]),_:1}),l(w,null,{default:o(()=>[l(I),l(r,{color:"blue darken-1",text:"",onClick:e[6]||(e[6]=t=>m.value=!1)},{default:o(()=>e[22]||(e[22]=[d(" Cancel ")])),_:1}),l(r,{color:"blue darken-1",text:"",onClick:N},{default:o(()=>e[23]||(e[23]=[d(" Save ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(U,{modelValue:p.value,"onUpdate:modelValue":e[14]||(e[14]=t=>p.value=t),"max-width":"600px"},{default:o(()=>[l(g,null,{default:o(()=>[l(f,null,{default:o(()=>e[24]||(e[24]=[d("Edit Building")])),_:1}),l(y,null,{default:o(()=>[l(A,{onSubmit:q($,["prevent"])},{default:o(()=>[l(b,{modelValue:a.value.name,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.name=t),label:"Building Name",required:""},null,8,["modelValue"]),l(b,{modelValue:a.value.address,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.address=t),label:"Address",required:""},null,8,["modelValue"]),l(C,{modelValue:a.value.cityId,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.cityId=t),items:B.value,"item-title":"name","item-value":"id",label:"City",required:""},null,8,["modelValue","items"]),l(C,{modelValue:a.value.regionId,"onUpdate:modelValue":e[11]||(e[11]=t=>a.value.regionId=t),items:x.value,"item-title":"name","item-value":"id",label:"Region",required:""},null,8,["modelValue","items"]),l(S,{modelValue:a.value.description,"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.description=t),label:"Description"},null,8,["modelValue"])]),_:1})]),_:1}),l(w,null,{default:o(()=>[l(I),l(r,{color:"blue darken-1",text:"",onClick:e[13]||(e[13]=t=>p.value=!1)},{default:o(()=>e[25]||(e[25]=[d(" Cancel ")])),_:1}),l(r,{color:"blue darken-1",text:"",onClick:$},{default:o(()=>e[26]||(e[26]=[d(" Update ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(U,{modelValue:v.value,"onUpdate:modelValue":e[16]||(e[16]=t=>v.value=t),"max-width":"400px"},{default:o(()=>[l(g,null,{default:o(()=>[l(f,null,{default:o(()=>e[27]||(e[27]=[d("Confirm Delete")])),_:1}),l(y,null,{default:o(()=>e[28]||(e[28]=[d(" Are you sure you want to delete this building? ")])),_:1}),l(w,null,{default:o(()=>[l(I),l(r,{color:"blue darken-1",text:"",onClick:e[15]||(e[15]=t=>v.value=!1)},{default:o(()=>e[29]||(e[29]=[d(" Cancel ")])),_:1}),l(r,{color:"red darken-1",text:"",onClick:F},{default:o(()=>e[30]||(e[30]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{Se as default};
