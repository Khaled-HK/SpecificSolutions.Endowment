import{r as h,e as q}from"./validators-DpYrMFzk.js";import{a$ as F,r as u,i as B,j as D,a as $,c as j,o as A,b as a,e as t,d as o,m as r,H as g,v as y,t as l,aX as E,ac as M,F as N,b6 as _,aW as S}from"./index-gvY-qnCL.js";import{_ as U}from"./AppTextField-CDIsP1WY.js";import{_ as W}from"./AuthProvider-DF6_0p0o.js";import{u as k}from"./useGenerateImageVariant-CWEymrHU.js";import{a as z,b as G,c as H,d as O}from"./auth-v2-login-illustration-light-8U3Ay0LB.js";import{a as X,b as J}from"./misc-mask-light-CdCn4Q-o.js";import{V as K}from"./VNodeRenderer-DyMhY0dn.js";import{$ as Q}from"./api-W9QyqjuE.js";import{a as i,V as x}from"./VRow-DMrMSSGB.js";import{V as Y}from"./VImg-B-4h_lZI.js";import{V as Z}from"./VCard-Ct6DmQBC.js";import{V}from"./VCardText-BPMIhvZk.js";import{V as ee}from"./VAlert-DVBaF7XL.js";import{V as ae}from"./VForm-DWMjd7yE.js";import{V as te}from"./VCheckbox-BeTe0WzA.js";import{V as L}from"./VDivider-1ZFKA2eM.js";import"./helpers-DK5QwNv0.js";import"./form-DFObj21W.js";import"./VTextField-DqVMTGw6.js";/* empty css                   */import"./VCounter-DJjELMu8.js";import"./VField-354SCb06.js";import"./easing-CjukEv2V.js";import"./VInput-BBqA0ZW6.js";import"./forwardRefs-C-GTDzx5.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VAvatar-dK1yEop4.js";import"./VCheckboxBtn-DY3rnop_.js";import"./VSelectionControl-Kt72W0Sf.js";const oe={class:"auth-logo d-flex align-center gap-x-3"},se={class:"auth-title"},re={class:"position-relative bg-background w-100 me-0"},le={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},ie=["src"],ne={class:"text-h4 mb-1"},me={class:"text-capitalize"},de={class:"d-flex align-center flex-wrap justify-space-between my-6"},We=F({__name:"login",setup(ue){const C=k(O,H,G,z,!0),P=k(J,X),p=u(!1),v=B(),I=D();useAbility();const f=u({email:void 0,password:void 0}),b=u(),n=u({email:"admin@demo.com",password:"admin"}),w=u(!1),R=async()=>{try{const s=await Q("/Auth/login",{method:"POST",body:{email:n.value.email,password:n.value.password},onResponseError({response:c}){f.value=c._data.errors||{general:"Login failed. Please check your credentials."}}}),{token:e,user:d}=s;_("accessToken").value=e,_("userData").value=d,await S(()=>{I.replace(v.query.to?String(v.query.to):"/dashboard")})}catch(s){console.error("Login error:",s),f.value={general:"Login failed. Please try again."}}},T=()=>{var s;(s=b.value)==null||s.validate().then(({valid:e})=>{e&&R()})};return(s,e)=>{const d=$("RouterLink"),c=U;return A(),j(N,null,[a(d,{to:"/"},{default:t(()=>[o("div",oe,[a(r(K),{nodes:r(g).app.logo},null,8,["nodes"]),o("h1",se,y(r(g).app.title),1)])]),_:1}),a(x,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[a(i,{md:"8",class:"d-none d-md-flex"},{default:t(()=>[o("div",re,[o("div",le,[a(Y,{"max-width":"613",src:r(C),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),o("img",{class:"auth-footer-mask",src:r(P),alt:"auth-footer-mask",height:"280",width:"100"},null,8,ie)])]),_:1}),a(i,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[a(Z,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:t(()=>[a(V,null,{default:t(()=>[o("h4",ne,[e[4]||(e[4]=l(" Welcome to ")),o("span",me,y(r(g).app.title),1),e[5]||(e[5]=l("!  "))]),e[6]||(e[6]=o("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1))]),_:1}),a(V,null,{default:t(()=>[a(ee,{color:"primary",variant:"tonal"},{default:t(()=>e[7]||(e[7]=[o("p",{class:"text-sm mb-2"},[l(" Admin Email: "),o("strong",null,"admin@demo.com"),l(" / Pass: "),o("strong",null,"admin")],-1),o("p",{class:"text-sm mb-0"},[l(" Client Email: "),o("strong",null,"client@demo.com"),l(" / Pass: "),o("strong",null,"client")],-1)])),_:1})]),_:1}),a(V,null,{default:t(()=>[a(r(ae),{ref_key:"refVForm",ref:b,onSubmit:E(T,["prevent"])},{default:t(()=>[a(x,null,{default:t(()=>[a(i,{cols:"12"},{default:t(()=>[a(c,{modelValue:n.value.email,"onUpdate:modelValue":e[0]||(e[0]=m=>n.value.email=m),label:"Email",placeholder:"johndoe@email.com",type:"email",autofocus:"",rules:["requiredValidator"in s?s.requiredValidator:r(h),"emailValidator"in s?s.emailValidator:r(q)],"error-messages":f.value.email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(c,{modelValue:n.value.password,"onUpdate:modelValue":e[1]||(e[1]=m=>n.value.password=m),label:"Password",placeholder:"路路路路路路路路路路路路",rules:["requiredValidator"in s?s.requiredValidator:r(h)],type:p.value?"text":"password",autocomplete:"password","error-messages":f.value.password,"append-inner-icon":p.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=m=>p.value=!p.value)},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),o("div",de,[a(te,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=m=>w.value=m),label:"Remember me"},null,8,["modelValue"]),a(d,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:t(()=>e[8]||(e[8]=[l(" Forgot Password? ")])),_:1})]),a(M,{block:"",type:"submit"},{default:t(()=>e[9]||(e[9]=[l(" Login ")])),_:1})]),_:1}),a(i,{cols:"12",class:"text-center"},{default:t(()=>[e[11]||(e[11]=o("span",null,"New on our platform?",-1)),a(d,{class:"text-primary ms-1",to:{name:"register"}},{default:t(()=>e[10]||(e[10]=[l(" Create an account ")])),_:1})]),_:1}),a(i,{cols:"12",class:"d-flex align-center"},{default:t(()=>[a(L),e[12]||(e[12]=o("span",{class:"mx-4"},"or",-1)),a(L)]),_:1}),a(i,{cols:"12",class:"text-center"},{default:t(()=>[a(W)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{We as default};
