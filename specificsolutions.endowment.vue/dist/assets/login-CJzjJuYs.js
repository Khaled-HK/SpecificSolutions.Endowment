import{r as h,e as A}from"./validators-DpYrMFzk.js";import{dO as B,a$ as D,r as u,i as N,j as E,a as M,c as S,o as U,b as a,e as t,d as o,m as r,H as V,v as k,t as i,aX as O,ac as W,F as z,b6 as _,aW as G}from"./index-BFF4RbOy.js";import{_ as H}from"./AppTextField-ByzoyiAy.js";import{_ as X}from"./AuthProvider-CYnwuHda.js";import{u as x}from"./useGenerateImageVariant-DjZwBt-t.js";import{a as J,b as K,c as Q,d as Y}from"./auth-v2-login-illustration-light-8U3Ay0LB.js";import{a as Z,b as ee}from"./misc-mask-light-CdCn4Q-o.js";import{V as ae}from"./VNodeRenderer-BIpM6F4O.js";import{$ as te}from"./api-CijkEW0x.js";import{a as n,V as L}from"./VRow-B25eWkMB.js";import{V as oe}from"./VImg-DaugzOTs.js";import{V as se}from"./VCard-1siH9rHD.js";import{V as v}from"./VCardText-bf9RsWdC.js";import{V as re}from"./VAlert-B7fgVCRw.js";import{V as le}from"./VForm-BFpGzUTD.js";import{V as ie}from"./VCheckbox-BRLeVht6.js";import{V as C}from"./VDivider-CxjCOeIn.js";import"./helpers-DK5QwNv0.js";import"./form-gXO3Naa5.js";import"./VTextField-B2FAnqC7.js";/* empty css                   */import"./VCounter-DR2XxcWa.js";import"./VField-B7BZu-6_.js";import"./easing-CjukEv2V.js";import"./VInput-D40BhI2E.js";import"./forwardRefs-C-GTDzx5.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VAvatar-DSBnhOTP.js";import"./VCheckboxBtn-DeCfgi1q.js";import"./VSelectionControl-DNs3t7BI.js";const ne=()=>B(),me={class:"auth-logo d-flex align-center gap-x-3"},de={class:"auth-title"},ue={class:"position-relative bg-background w-100 me-0"},pe={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},fe=["src"],ce={class:"text-h4 mb-1"},ge={class:"text-capitalize"},Ve={class:"d-flex align-center flex-wrap justify-space-between my-6"},Je=D({__name:"login",setup(ve){const P=x(Y,Q,K,J,!0),T=x(ee,Z),p=u(!1),b=N(),I=E(),R=ne(),f=u({email:void 0,password:void 0}),w=u(),m=u({email:"admin@demo.com",password:"admin"}),y=u(!1),q=async()=>{try{const e=(await te("/Auth/login",{method:"POST",body:{email:m.value.email,password:m.value.password},onResponseError({response:g}){f.value=g._data.errors||{general:"Login failed. Please check your credentials."}}})).data,d=e.Token;_("accessToken").value=d,_("userData").value=e;const c=e.Permissions.map(g=>{const[$,j]=g.split(":");return{action:$,subject:j}});R.update(c);const l=b.query.to?String(b.query.to):"/dashboard";console.log("Navigating to:",l),await G(()=>{I.replace(l)})}catch(s){console.error("Login error:",s),f.value={general:"Login failed. Please try again."}}},F=()=>{var s;(s=w.value)==null||s.validate().then(({valid:e})=>{e&&q()})};return(s,e)=>{const d=M("RouterLink"),c=H;return U(),S(z,null,[a(d,{to:"/"},{default:t(()=>[o("div",me,[a(r(ae),{nodes:r(V).app.logo},null,8,["nodes"]),o("h1",de,k(r(V).app.title),1)])]),_:1}),a(L,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[a(n,{md:"8",class:"d-none d-md-flex"},{default:t(()=>[o("div",ue,[o("div",pe,[a(oe,{"max-width":"613",src:r(P),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),o("img",{class:"auth-footer-mask",src:r(T),alt:"auth-footer-mask",height:"280",width:"100"},null,8,fe)])]),_:1}),a(n,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[a(se,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:t(()=>[a(v,null,{default:t(()=>[o("h4",ce,[e[4]||(e[4]=i(" Welcome to ")),o("span",ge,k(r(V).app.title),1),e[5]||(e[5]=i("! 👋🏻 "))]),e[6]||(e[6]=o("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1))]),_:1}),a(v,null,{default:t(()=>[a(re,{color:"primary",variant:"tonal"},{default:t(()=>e[7]||(e[7]=[o("p",{class:"text-sm mb-2"},[i(" Admin Email: "),o("strong",null,"admin@demo.com"),i(" / Pass: "),o("strong",null,"admin")],-1),o("p",{class:"text-sm mb-0"},[i(" Client Email: "),o("strong",null,"client@demo.com"),i(" / Pass: "),o("strong",null,"client")],-1)])),_:1})]),_:1}),a(v,null,{default:t(()=>[a(r(le),{ref_key:"refVForm",ref:w,onSubmit:O(F,["prevent"])},{default:t(()=>[a(L,null,{default:t(()=>[a(n,{cols:"12"},{default:t(()=>[a(c,{modelValue:m.value.email,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value.email=l),label:"Email",placeholder:"johndoe@email.com",type:"email",autofocus:"",rules:["requiredValidator"in s?s.requiredValidator:r(h),"emailValidator"in s?s.emailValidator:r(A)],"error-messages":f.value.email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(c,{modelValue:m.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>m.value.password=l),label:"Password",placeholder:"············",rules:["requiredValidator"in s?s.requiredValidator:r(h)],type:p.value?"text":"password",autocomplete:"password","error-messages":f.value.password,"append-inner-icon":p.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=l=>p.value=!p.value)},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),o("div",Ve,[a(ie,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=l=>y.value=l),label:"Remember me"},null,8,["modelValue"]),a(d,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:t(()=>e[8]||(e[8]=[i(" Forgot Password? ")])),_:1})]),a(W,{block:"",type:"submit"},{default:t(()=>e[9]||(e[9]=[i(" Login ")])),_:1})]),_:1}),a(n,{cols:"12",class:"text-center"},{default:t(()=>[e[11]||(e[11]=o("span",null,"New on our platform?",-1)),a(d,{class:"text-primary ms-1",to:{name:"register"}},{default:t(()=>e[10]||(e[10]=[i(" Create an account ")])),_:1})]),_:1}),a(n,{cols:"12",class:"d-flex align-center"},{default:t(()=>[a(C),e[12]||(e[12]=o("span",{class:"mx-4"},"or",-1)),a(C)]),_:1}),a(n,{cols:"12",class:"text-center"},{default:t(()=>[a(X)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Je as default};
