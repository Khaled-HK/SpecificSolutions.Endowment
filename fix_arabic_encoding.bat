@echo off
echo ================================================
echo         Ø¥ØµÙ„Ø§Ø­ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØ±Ù…ÙŠØ² Ø§Ù„Ø¹Ø±Ø¨ÙŠ
echo         Arabic Encoding Issues Fix
echo ================================================
echo.

echo ðŸ”§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…ÙƒØªØ´ÙØ©:
echo Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¸Ù‡Ø± ÙƒÙ€: Ø¸â€¦Ø¸Æ’Ø·Ú¾Ø·Â¨ Ø·Â§Ø¸â€žØ·Â£Ø¸Ë†Ø¸â€šØ·Â§Ø¸Ù¾
echo ÙŠØ¬Ø¨ Ø£Ù† ØªØ¸Ù‡Ø± ÙƒÙ€: Ù…ÙƒØªØ¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Ù
echo.

echo ðŸš€ Ø¨Ø¯Ø¡ Ø¥ØµÙ„Ø§Ø­ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØ±Ù…ÙŠØ²...
echo.

REM Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù Ø§Ù„Ø¥ØµÙ„Ø§Ø­
if not exist "fix_arabic_encoding.sql" (
    echo âŒ Ø®Ø·Ø£: Ù…Ù„Ù fix_arabic_encoding.sql ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!
    echo âŒ Error: fix_arabic_encoding.sql file not found!
    pause
    exit /b 1
)

echo ðŸ”„ ØªÙ†ÙÙŠØ° Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„ØªØ±Ù…ÙŠØ²...
sqlcmd -S . -d Swagger_Endowment22 -i fix_arabic_encoding.sql -o encoding_fix_output.log

if %ERRORLEVEL% EQU 0 (
    echo.
    echo ================================================
    echo âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØ±Ù…ÙŠØ² Ø¨Ù†Ø¬Ø§Ø­!
    echo âœ… Arabic encoding issues fixed successfully!
    echo ================================================
    echo.
    echo Ø§Ù„Ø¢Ù† ÙŠØ¬Ø¨ Ø£Ù† ØªØ¸Ù‡Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ù„ØªØ§Ù„ÙŠ:
    echo âœ… Ù…ÙƒØªØ¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Ù - Ø·Ø±Ø§Ø¨Ù„Ø³
    echo âœ… Ù…ÙƒØªØ¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Ù - Ø¨Ù†ØºØ§Ø²ÙŠ  
    echo âœ… Ù…ÙƒØªØ¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Ù - Ù…ØµØ±Ø§ØªØ©
    echo âœ… Ù…ÙƒØªØ¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Ù - Ø§Ù„Ø²Ø§ÙˆÙŠØ©
    echo âœ… Ù…ÙƒØªØ¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Ù - Ø´Ø­Ø§Øª
    echo.
    echo ðŸ“‹ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:
    echo â€¢ ØªØºÙŠÙŠØ± Collation Ø¥Ù„Ù‰ Arabic_CI_AS
    echo â€¢ ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù†ØµÙŠØ© Ø¥Ù„Ù‰ NVARCHAR
    echo â€¢ Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ØªØ±Ù…ÙŠØ² N'' ØµØ­ÙŠØ­
    echo â€¢ ÙØ­Øµ ÙˆØ¥ØµÙ„Ø§Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
    echo.
    echo ðŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©:
    echo â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Unicode (UTF-8) ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
    echo â€¢ ÙÙŠ SSMS: Tools ^> Options ^> Query Results ^> SQL Server ^> Results to Grid ^> Include column headers
    echo â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø¶Ø¨Ø· Font ÙÙŠ SSMS Ø¹Ù„Ù‰ Arial Unicode MS
) else (
    echo.
    echo ================================================
    echo âŒ ÙØ´Ù„ ÙÙŠ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªØ±Ù…ÙŠØ²!
    echo âŒ Encoding fix failed!
    echo ================================================
    echo.
    echo Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:
    echo â€¢ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§ÙÙŠØ©
    echo â€¢ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    echo â€¢ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ SQL Server
    echo.
    echo Ø§Ù„Ø­Ù„ÙˆÙ„:
    echo â€¢ ØªØ´ØºÙŠÙ„ Command Prompt as Administrator
    echo â€¢ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ SQL Server
    echo â€¢ ÙØ­Øµ Ù…Ù„Ù encoding_fix_output.log Ù„Ù„ØªÙØ§ØµÙŠÙ„
)

echo.
echo Ø§Ø¶ØºØ· Ø£ÙŠ Ù…ÙØªØ§Ø­ Ù„Ù„Ø®Ø±ÙˆØ¬...
pause > nul