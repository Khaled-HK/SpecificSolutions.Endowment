# دليل تشغيل ملفات البيانات الليبية لقاعدة البيانات

## نظرة عامة
تم إنشاء مجموعة شاملة من ملفات SQL لملء قاعدة البيانات بـ **50 سجل لكل جدول** باستخدام بيانات ليبية أصيلة بالترميز العربي `N''`.

## الملفات المطلوبة

### 1. الجزء الأول: `complete_database_seed_libya_50_records.sql`
يحتوي على:
- **50 مدينة ليبية** (Cities)
- **50 منطقة ليبية** (Regions) 
- **50 بنك** (Banks)
- **50 فرع بنكي** (Branches)
- **50 منتج** (Products)
- **50 مرفق** (Facilities)

### 2. الجزء الثاني: `complete_database_seed_libya_50_records_part2.sql`
يحتوي على:
- **10 مستخدمين** في AspNetUsers
- **50 مكتب** (Offices)
- **50 بناية/مسجد** (Buildings)

### 3. الجزء الثالث: `complete_database_seed_libya_50_records_part3.sql`
يحتوي على:
- **50 مسجد** (Mosques)
- **50 تفصيل بناية** (BuildingDetails)
- **50 تفصيل مرفق** (FacilityDetails)
- **50 حساب** (Accounts)
- **50 تفصيل حساب** (AccountDetails)
- **50 قرار** (Decisions)
- **50 مدرسة قرآنية** (QuranicSchools)

## ترتيب التشغيل المطلوب

⚠️ **مهم جداً**: يجب تشغيل الملفات بالترتيب التالي لضمان عدم حدوث أخطاء في المفاتيح الخارجية:

```sql
-- 1. تشغيل الجزء الأول أولاً
EXEC('complete_database_seed_libya_50_records.sql')

-- 2. تشغيل الجزء الثاني ثانياً  
EXEC('complete_database_seed_libya_50_records_part2.sql')

-- 3. تشغيل الجزء الثالث أخيراً
EXEC('complete_database_seed_libya_50_records_part3.sql')
```

## خصائص البيانات

### 🇱🇾 البيانات الليبية
- **المدن**: جميع المدن الرئيسية في ليبيا (طرابلس، بنغازي، مصراتة، الزاوية، إلخ)
- **الأسماء**: أسماء ليبية أصيلة للأشخاص والأماكن
- **أرقام الهواتف**: أرقام ليبية صحيحة بالمقدمة 0218
- **العناوين**: عناوين ليبية حقيقية

### 🕌 المساجد والأوقاف
- **50 مسجد** موزعة على المدن الليبية
- مساجد تراثية (أحمد باشا، درغوت باشا، إلخ)
- مساجد حديثة بمرافق متطورة
- تفاصيل شاملة لكل مسجد (المصلى، المئذنة، المكتبة، إلخ)

### 💰 النظام المالي
- **50 حساب** بأسماء ليبية
- تفاصيل مالية واقعية
- عمليات متنوعة (إيداع، سحب، تحويل)

### 🏢 النظام الإداري
- **50 مكتب** موزع على المدن
- **50 قرار إداري** بتواريخ متدرجة
- هيكل إداري متكامل

## الترميز العربي

جميع النصوص العربية تستخدم الترميز الصحيح:
```sql
N'طرابلس'  -- ✅ صحيح
'طرابلس'   -- ❌ خطأ
```

## التحقق من البيانات

بعد التشغيل، يمكنك التحقق من البيانات:

```sql
-- عرض إحصائيات سريعة
SELECT 
    'Cities' as TableName, COUNT(*) as RecordCount FROM Cities
UNION ALL SELECT 'Regions', COUNT(*) FROM Regions
UNION ALL SELECT 'Banks', COUNT(*) FROM Banks
UNION ALL SELECT 'Buildings', COUNT(*) FROM Buildings
UNION ALL SELECT 'Mosques', COUNT(*) FROM Mosques
UNION ALL SELECT 'Accounts', COUNT(*) FROM Accounts
UNION ALL SELECT 'Decisions', COUNT(*) FROM Decisions;

-- عرض عينة من المساجد الليبية
SELECT TOP 10 
    Name, 
    FileNumber, 
    NearestLandmark, 
    PrayerCapacity 
FROM Buildings 
WHERE Name LIKE N'%مسجد%';

-- عرض عينة من الحسابات
SELECT TOP 10 
    Name, 
    City, 
    ContactNumber, 
    Balance 
FROM Accounts;
```

## ملاحظات مهمة

1. **حجم البيانات**: مجموع السجلات تقريباً 800+ سجل
2. **الذاكرة**: قد يستغرق التشغيل عدة دقائق حسب قوة الخادم
3. **النسخ الاحتياطي**: يُنصح بعمل نسخة احتياطية قبل التشغيل
4. **الصلاحيات**: تأكد من وجود صلاحيات INSERT/DELETE على جميع الجداول

## استكشاف الأخطاء

### خطأ في المفاتيح الخارجية
```sql
-- إذا حدث خطأ في Foreign Key، تأكد من تشغيل الملفات بالترتيب الصحيح
```

### خطأ في الترميز
```sql
-- تأكد من إعداد قاعدة البيانات لدعم UTF-8
ALTER DATABASE [YourDatabase] 
SET COLLATION Arabic_CI_AS;
```

### خطأ في المستخدمين
```sql
-- إذا لم يوجد جدول AspNetUsers، سيتم إنشاء المستخدمين الافتراضيين
```

## الدعم

إذا واجهت أي مشاكل:
1. تحقق من ترتيب تشغيل الملفات
2. تأكد من وجود جميع الجداول المطلوبة
3. راجع رسائل الخطأ في SQL Server Management Studio

---

**تم إعداد هذه البيانات خصيصاً لنظام إدارة الأوقاف والمساجد في ليبيا** 🇱🇾